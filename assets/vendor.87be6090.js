function mu(t,e){const n=Object.create(null),i=t.split(",");for(let o=0;o<i.length;o++)n[i[o]]=!0;return e?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const IT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",bT=mu(IT);function dp(t){return!!t||t===""}function vu(t){if(pe(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=wt(i)?RT(i):vu(i);if(o)for(const l in o)e[l]=o[l]}return e}else{if(wt(t))return t;if(ht(t))return t}}const TT=/;(?![^(]*\))/g,ST=/:(.+)/;function RT(t){const e={};return t.split(TT).forEach(n=>{if(n){const i=n.split(ST);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function yu(t){let e="";if(wt(t))e=t;else if(pe(t))for(let n=0;n<t.length;n++){const i=yu(t[n]);i&&(e+=i+" ")}else if(ht(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const XP=t=>t==null?"":pe(t)||ht(t)&&(t.toString===mp||!me(t.toString))?JSON.stringify(t,pp,2):String(t),pp=(t,e)=>e&&e.__v_isRef?pp(t,e.value):Ii(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,o])=>(n[`${i} =>`]=o,n),{})}:_p(e)?{[`Set(${e.size})`]:[...e.values()]}:ht(e)&&!pe(e)&&!vp(e)?String(e):e,qe={},wi=[],yn=()=>{},AT=()=>!1,xT=/^on[^a-z]/,Xo=t=>xT.test(t),Cu=t=>t.startsWith("onUpdate:"),St=Object.assign,Eu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},NT=Object.prototype.hasOwnProperty,Le=(t,e)=>NT.call(t,e),pe=Array.isArray,Ii=t=>jo(t)==="[object Map]",_p=t=>jo(t)==="[object Set]",me=t=>typeof t=="function",wt=t=>typeof t=="string",wu=t=>typeof t=="symbol",ht=t=>t!==null&&typeof t=="object",gp=t=>ht(t)&&me(t.then)&&me(t.catch),mp=Object.prototype.toString,jo=t=>mp.call(t),OT=t=>jo(t).slice(8,-1),vp=t=>jo(t)==="[object Object]",Iu=t=>wt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Jo=mu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zo=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},PT=/-(\w)/g,Nn=Zo(t=>t.replace(PT,(e,n)=>n?n.toUpperCase():"")),MT=/\B([A-Z])/g,bi=Zo(t=>t.replace(MT,"-$1").toLowerCase()),el=Zo(t=>t.charAt(0).toUpperCase()+t.slice(1)),bu=Zo(t=>t?`on${el(t)}`:""),_s=(t,e)=>!Object.is(t,e),Tu=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},tl=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},LT=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let yp;const kT=()=>yp||(yp=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Lr;const nl=[];class DT{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Lr&&(this.parent=Lr,this.index=(Lr.scopes||(Lr.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(nl.push(this),Lr=this)}off(){this.active&&(nl.pop(),Lr=nl[nl.length-1])}stop(e){if(this.active){if(this.effects.forEach(n=>n.stop()),this.cleanups.forEach(n=>n()),this.scopes&&this.scopes.forEach(n=>n.stop(!0)),this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function FT(t,e){e=e||Lr,e&&e.active&&e.effects.push(t)}const Su=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Cp=t=>(t.w&fr)>0,Ep=t=>(t.n&fr)>0,UT=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=fr},WT=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const o=e[i];Cp(o)&&!Ep(o)?o.delete(t):e[n++]=o,o.w&=~fr,o.n&=~fr}e.length=n}},Ru=new WeakMap;let gs=0,fr=1;const Au=30,Ti=[];let kr;const Dr=Symbol(""),xu=Symbol("");class Nu{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],FT(this,i)}run(){if(!this.active)return this.fn();if(!Ti.length||!Ti.includes(this))try{return Ti.push(kr=this),BT(),fr=1<<++gs,gs<=Au?UT(this):wp(this),this.fn()}finally{gs<=Au&&WT(this),fr=1<<--gs,Fr(),Ti.pop();const e=Ti.length;kr=e>0?Ti[e-1]:void 0}}stop(){this.active&&(wp(this),this.onStop&&this.onStop(),this.active=!1)}}function wp(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Si=!0;const Ou=[];function Ri(){Ou.push(Si),Si=!1}function BT(){Ou.push(Si),Si=!0}function Fr(){const t=Ou.pop();Si=t===void 0?!0:t}function Jt(t,e,n){if(!Ip())return;let i=Ru.get(t);i||Ru.set(t,i=new Map);let o=i.get(n);o||i.set(n,o=Su()),bp(o)}function Ip(){return Si&&kr!==void 0}function bp(t,e){let n=!1;gs<=Au?Ep(t)||(t.n|=fr,n=!Cp(t)):n=!t.has(kr),n&&(t.add(kr),kr.deps.push(t))}function Qn(t,e,n,i,o,l){const u=Ru.get(t);if(!u)return;let c=[];if(e==="clear")c=[...u.values()];else if(n==="length"&&pe(t))u.forEach((h,d)=>{(d==="length"||d>=i)&&c.push(h)});else switch(n!==void 0&&c.push(u.get(n)),e){case"add":pe(t)?Iu(n)&&c.push(u.get("length")):(c.push(u.get(Dr)),Ii(t)&&c.push(u.get(xu)));break;case"delete":pe(t)||(c.push(u.get(Dr)),Ii(t)&&c.push(u.get(xu)));break;case"set":Ii(t)&&c.push(u.get(Dr));break}if(c.length===1)c[0]&&Pu(c[0]);else{const h=[];for(const d of c)d&&h.push(...d);Pu(Su(h))}}function Pu(t,e){for(const n of pe(t)?t:[...t])(n!==kr||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const HT=mu("__proto__,__v_isRef,__isVue"),Tp=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(wu)),$T=Mu(),zT=Mu(!1,!0),KT=Mu(!0),Sp=GT();function GT(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=Ue(this);for(let l=0,u=this.length;l<u;l++)Jt(i,"get",l+"");const o=i[e](...n);return o===-1||o===!1?i[e](...n.map(Ue)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Ri();const i=Ue(this)[e].apply(this,n);return Fr(),i}}),t}function Mu(t=!1,e=!1){return function(i,o,l){if(o==="__v_isReactive")return!t;if(o==="__v_isReadonly")return t;if(o==="__v_isShallow")return e;if(o==="__v_raw"&&l===(t?e?lS:kp:e?Lp:Mp).get(i))return i;const u=pe(i);if(!t&&u&&Le(Sp,o))return Reflect.get(Sp,o,l);const c=Reflect.get(i,o,l);return(wu(o)?Tp.has(o):HT(o))||(t||Jt(i,"get",o),e)?c:Rt(c)?!u||!Iu(o)?c.value:c:ht(c)?t?Dp(c):ms(c):c}}const VT=Rp(),qT=Rp(!0);function Rp(t=!1){return function(n,i,o,l){let u=n[i];if(vs(u)&&Rt(u))return!1;if(!t&&!vs(o)&&(Fp(o)||(o=Ue(o),u=Ue(u)),!pe(n)&&Rt(u)&&!Rt(o)))return u.value=o,!0;const c=pe(n)&&Iu(i)?Number(i)<n.length:Le(n,i),h=Reflect.set(n,i,o,l);return n===Ue(l)&&(c?_s(o,u)&&Qn(n,"set",i,o):Qn(n,"add",i,o)),h}}function YT(t,e){const n=Le(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&Qn(t,"delete",e,void 0),i}function QT(t,e){const n=Reflect.has(t,e);return(!wu(e)||!Tp.has(e))&&Jt(t,"has",e),n}function XT(t){return Jt(t,"iterate",pe(t)?"length":Dr),Reflect.ownKeys(t)}const Ap={get:$T,set:VT,deleteProperty:YT,has:QT,ownKeys:XT},jT={get:KT,set(t,e){return!0},deleteProperty(t,e){return!0}},JT=St({},Ap,{get:zT,set:qT}),Lu=t=>t,rl=t=>Reflect.getPrototypeOf(t);function il(t,e,n=!1,i=!1){t=t.__v_raw;const o=Ue(t),l=Ue(e);e!==l&&!n&&Jt(o,"get",e),!n&&Jt(o,"get",l);const{has:u}=rl(o),c=i?Lu:n?Fu:ys;if(u.call(o,e))return c(t.get(e));if(u.call(o,l))return c(t.get(l));t!==o&&t.get(e)}function sl(t,e=!1){const n=this.__v_raw,i=Ue(n),o=Ue(t);return t!==o&&!e&&Jt(i,"has",t),!e&&Jt(i,"has",o),t===o?n.has(t):n.has(t)||n.has(o)}function ol(t,e=!1){return t=t.__v_raw,!e&&Jt(Ue(t),"iterate",Dr),Reflect.get(t,"size",t)}function xp(t){t=Ue(t);const e=Ue(this);return rl(e).has.call(e,t)||(e.add(t),Qn(e,"add",t,t)),this}function Np(t,e){e=Ue(e);const n=Ue(this),{has:i,get:o}=rl(n);let l=i.call(n,t);l||(t=Ue(t),l=i.call(n,t));const u=o.call(n,t);return n.set(t,e),l?_s(e,u)&&Qn(n,"set",t,e):Qn(n,"add",t,e),this}function Op(t){const e=Ue(this),{has:n,get:i}=rl(e);let o=n.call(e,t);o||(t=Ue(t),o=n.call(e,t)),i&&i.call(e,t);const l=e.delete(t);return o&&Qn(e,"delete",t,void 0),l}function Pp(){const t=Ue(this),e=t.size!==0,n=t.clear();return e&&Qn(t,"clear",void 0,void 0),n}function ll(t,e){return function(i,o){const l=this,u=l.__v_raw,c=Ue(u),h=e?Lu:t?Fu:ys;return!t&&Jt(c,"iterate",Dr),u.forEach((d,_)=>i.call(o,h(d),h(_),l))}}function al(t,e,n){return function(...i){const o=this.__v_raw,l=Ue(o),u=Ii(l),c=t==="entries"||t===Symbol.iterator&&u,h=t==="keys"&&u,d=o[t](...i),_=n?Lu:e?Fu:ys;return!e&&Jt(l,"iterate",h?xu:Dr),{next(){const{value:g,done:y}=d.next();return y?{value:g,done:y}:{value:c?[_(g[0]),_(g[1])]:_(g),done:y}},[Symbol.iterator](){return this}}}}function hr(t){return function(...e){return t==="delete"?!1:this}}function ZT(){const t={get(l){return il(this,l)},get size(){return ol(this)},has:sl,add:xp,set:Np,delete:Op,clear:Pp,forEach:ll(!1,!1)},e={get(l){return il(this,l,!1,!0)},get size(){return ol(this)},has:sl,add:xp,set:Np,delete:Op,clear:Pp,forEach:ll(!1,!0)},n={get(l){return il(this,l,!0)},get size(){return ol(this,!0)},has(l){return sl.call(this,l,!0)},add:hr("add"),set:hr("set"),delete:hr("delete"),clear:hr("clear"),forEach:ll(!0,!1)},i={get(l){return il(this,l,!0,!0)},get size(){return ol(this,!0)},has(l){return sl.call(this,l,!0)},add:hr("add"),set:hr("set"),delete:hr("delete"),clear:hr("clear"),forEach:ll(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=al(l,!1,!1),n[l]=al(l,!0,!1),e[l]=al(l,!1,!0),i[l]=al(l,!0,!0)}),[t,n,e,i]}const[eS,tS,nS,rS]=ZT();function ku(t,e){const n=e?t?rS:nS:t?tS:eS;return(i,o,l)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?i:Reflect.get(Le(n,o)&&o in i?n:i,o,l)}const iS={get:ku(!1,!1)},sS={get:ku(!1,!0)},oS={get:ku(!0,!1)},Mp=new WeakMap,Lp=new WeakMap,kp=new WeakMap,lS=new WeakMap;function aS(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function uS(t){return t.__v_skip||!Object.isExtensible(t)?0:aS(OT(t))}function ms(t){return vs(t)?t:Du(t,!1,Ap,iS,Mp)}function cS(t){return Du(t,!1,JT,sS,Lp)}function Dp(t){return Du(t,!0,jT,oS,kp)}function Du(t,e,n,i,o){if(!ht(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=o.get(t);if(l)return l;const u=uS(t);if(u===0)return t;const c=new Proxy(t,u===2?i:n);return o.set(t,c),c}function Ai(t){return vs(t)?Ai(t.__v_raw):!!(t&&t.__v_isReactive)}function vs(t){return!!(t&&t.__v_isReadonly)}function Fp(t){return!!(t&&t.__v_isShallow)}function Up(t){return Ai(t)||vs(t)}function Ue(t){const e=t&&t.__v_raw;return e?Ue(e):t}function Wp(t){return tl(t,"__v_skip",!0),t}const ys=t=>ht(t)?ms(t):t,Fu=t=>ht(t)?Dp(t):t;function Bp(t){Ip()&&(t=Ue(t),t.dep||(t.dep=Su()),bp(t.dep))}function Hp(t,e){t=Ue(t),t.dep&&Pu(t.dep)}function Rt(t){return Boolean(t&&t.__v_isRef===!0)}function fS(t){return $p(t,!1)}function hS(t){return $p(t,!0)}function $p(t,e){return Rt(t)?t:new dS(t,e)}class dS{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ue(e),this._value=n?e:ys(e)}get value(){return Bp(this),this._value}set value(e){e=this.__v_isShallow?e:Ue(e),_s(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:ys(e),Hp(this))}}function Cs(t){return Rt(t)?t.value:t}const pS={get:(t,e,n)=>Cs(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const o=t[e];return Rt(o)&&!Rt(n)?(o.value=n,!0):Reflect.set(t,e,n,i)}};function zp(t){return Ai(t)?t:new Proxy(t,pS)}class _S{constructor(e,n,i,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Nu(e,()=>{this._dirty||(this._dirty=!0,Hp(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=i}get value(){const e=Ue(this);return Bp(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function gS(t,e,n=!1){let i,o;const l=me(t);return l?(i=t,o=yn):(i=t.get,o=t.set),new _S(i,o,l||!o,n)}Promise.resolve();function dr(t,e,n,i){let o;try{o=i?t(...i):t()}catch(l){ul(l,e,n)}return o}function fn(t,e,n,i){if(me(t)){const l=dr(t,e,n,i);return l&&gp(l)&&l.catch(u=>{ul(u,e,n)}),l}const o=[];for(let l=0;l<t.length;l++)o.push(fn(t[l],e,n,i));return o}function ul(t,e,n,i=!0){const o=e?e.vnode:null;if(e){let l=e.parent;const u=e.proxy,c=n;for(;l;){const d=l.ec;if(d){for(let _=0;_<d.length;_++)if(d[_](t,u,c)===!1)return}l=l.parent}const h=e.appContext.config.errorHandler;if(h){dr(h,null,10,[t,u,c]);return}}mS(t,n,o,i)}function mS(t,e,n,i=!0){console.error(t)}let cl=!1,Uu=!1;const Zt=[];let Xn=0;const Es=[];let ws=null,xi=0;const Is=[];let pr=null,Ni=0;const Kp=Promise.resolve();let Wu=null,Bu=null;function Gp(t){const e=Wu||Kp;return t?e.then(this?t.bind(this):t):e}function vS(t){let e=Xn+1,n=Zt.length;for(;e<n;){const i=e+n>>>1;bs(Zt[i])<t?e=i+1:n=i}return e}function Vp(t){(!Zt.length||!Zt.includes(t,cl&&t.allowRecurse?Xn+1:Xn))&&t!==Bu&&(t.id==null?Zt.push(t):Zt.splice(vS(t.id),0,t),qp())}function qp(){!cl&&!Uu&&(Uu=!0,Wu=Kp.then(Xp))}function yS(t){const e=Zt.indexOf(t);e>Xn&&Zt.splice(e,1)}function Yp(t,e,n,i){pe(t)?n.push(...t):(!e||!e.includes(t,t.allowRecurse?i+1:i))&&n.push(t),qp()}function CS(t){Yp(t,ws,Es,xi)}function ES(t){Yp(t,pr,Is,Ni)}function Hu(t,e=null){if(Es.length){for(Bu=e,ws=[...new Set(Es)],Es.length=0,xi=0;xi<ws.length;xi++)ws[xi]();ws=null,xi=0,Bu=null,Hu(t,e)}}function Qp(t){if(Is.length){const e=[...new Set(Is)];if(Is.length=0,pr){pr.push(...e);return}for(pr=e,pr.sort((n,i)=>bs(n)-bs(i)),Ni=0;Ni<pr.length;Ni++)pr[Ni]();pr=null,Ni=0}}const bs=t=>t.id==null?1/0:t.id;function Xp(t){Uu=!1,cl=!0,Hu(t),Zt.sort((n,i)=>bs(n)-bs(i));const e=yn;try{for(Xn=0;Xn<Zt.length;Xn++){const n=Zt[Xn];n&&n.active!==!1&&dr(n,null,14)}}finally{Xn=0,Zt.length=0,Qp(),cl=!1,Wu=null,(Zt.length||Es.length||Is.length)&&Xp(t)}}function wS(t,e,...n){const i=t.vnode.props||qe;let o=n;const l=e.startsWith("update:"),u=l&&e.slice(7);if(u&&u in i){const _=`${u==="modelValue"?"model":u}Modifiers`,{number:g,trim:y}=i[_]||qe;y?o=n.map(b=>b.trim()):g&&(o=n.map(LT))}let c,h=i[c=bu(e)]||i[c=bu(Nn(e))];!h&&l&&(h=i[c=bu(bi(e))]),h&&fn(h,t,6,o);const d=i[c+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,fn(d,t,6,o)}}function jp(t,e,n=!1){const i=e.emitsCache,o=i.get(t);if(o!==void 0)return o;const l=t.emits;let u={},c=!1;if(!me(t)){const h=d=>{const _=jp(d,e,!0);_&&(c=!0,St(u,_))};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}return!l&&!c?(i.set(t,null),null):(pe(l)?l.forEach(h=>u[h]=null):St(u,l),i.set(t,u),u)}function $u(t,e){return!t||!Xo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Le(t,e[0].toLowerCase()+e.slice(1))||Le(t,bi(e))||Le(t,e))}let hn=null,fl=null;function hl(t){const e=hn;return hn=t,fl=t&&t.type.__scopeId||null,e}function jP(t){fl=t}function JP(){fl=null}function IS(t,e=hn,n){if(!e||t._n)return t;const i=(...o)=>{i._d&&R_(-1);const l=hl(e),u=t(...o);return hl(l),i._d&&R_(1),u};return i._n=!0,i._c=!0,i._d=!0,i}function zu(t){const{type:e,vnode:n,proxy:i,withProxy:o,props:l,propsOptions:[u],slots:c,attrs:h,emit:d,render:_,renderCache:g,data:y,setupState:b,ctx:R,inheritAttrs:W}=t;let U,G;const J=hl(t);try{if(n.shapeFlag&4){const le=o||i;U=Mn(_.call(le,le,g,l,b,y,R)),G=h}else{const le=e;U=Mn(le.length>1?le(l,{attrs:h,slots:c,emit:d}):le(l,null)),G=e.props?h:bS(h)}}catch(le){Ts.length=0,ul(le,t,1),U=$t(Pn)}let ne=U;if(G&&W!==!1){const le=Object.keys(G),{shapeFlag:we}=ne;le.length&&we&(1|6)&&(u&&le.some(Cu)&&(G=TS(G,u)),ne=Oi(ne,G))}return n.dirs&&(ne.dirs=ne.dirs?ne.dirs.concat(n.dirs):n.dirs),n.transition&&(ne.transition=n.transition),U=ne,hl(J),U}const bS=t=>{let e;for(const n in t)(n==="class"||n==="style"||Xo(n))&&((e||(e={}))[n]=t[n]);return e},TS=(t,e)=>{const n={};for(const i in t)(!Cu(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function SS(t,e,n){const{props:i,children:o,component:l}=t,{props:u,children:c,patchFlag:h}=e,d=l.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return i?Jp(i,u,d):!!u;if(h&8){const _=e.dynamicProps;for(let g=0;g<_.length;g++){const y=_[g];if(u[y]!==i[y]&&!$u(d,y))return!0}}}else return(o||c)&&(!c||!c.$stable)?!0:i===u?!1:i?u?Jp(i,u,d):!0:!!u;return!1}function Jp(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let o=0;o<i.length;o++){const l=i[o];if(e[l]!==t[l]&&!$u(n,l))return!0}return!1}function RS({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const AS=t=>t.__isSuspense;function xS(t,e){e&&e.pendingBranch?pe(t)?e.effects.push(...t):e.effects.push(t):ES(t)}function dl(t,e){if(_t){let n=_t.provides;const i=_t.parent&&_t.parent.provides;i===n&&(n=_t.provides=Object.create(i)),n[t]=e}}function jn(t,e,n=!1){const i=_t||hn;if(i){const o=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&me(e)?e.call(i.proxy):e}}const Zp={};function pl(t,e,n){return e_(t,e,n)}function e_(t,e,{immediate:n,deep:i,flush:o,onTrack:l,onTrigger:u}=qe){const c=_t;let h,d=!1,_=!1;if(Rt(t)?(h=()=>t.value,d=Fp(t)):Ai(t)?(h=()=>t,i=!0):pe(t)?(_=!0,d=t.some(Ai),h=()=>t.map(G=>{if(Rt(G))return G.value;if(Ai(G))return Ur(G);if(me(G))return dr(G,c,2)})):me(t)?e?h=()=>dr(t,c,2):h=()=>{if(!(c&&c.isUnmounted))return g&&g(),fn(t,c,3,[y])}:h=yn,e&&i){const G=h;h=()=>Ur(G())}let g,y=G=>{g=U.onStop=()=>{dr(G,c,4)}};if(Ss)return y=yn,e?n&&fn(e,c,3,[h(),_?[]:void 0,y]):h(),yn;let b=_?[]:Zp;const R=()=>{if(!!U.active)if(e){const G=U.run();(i||d||(_?G.some((J,ne)=>_s(J,b[ne])):_s(G,b)))&&(g&&g(),fn(e,c,3,[G,b===Zp?void 0:b,y]),b=G)}else U.run()};R.allowRecurse=!!e;let W;o==="sync"?W=R:o==="post"?W=()=>Ht(R,c&&c.suspense):W=()=>{!c||c.isMounted?CS(R):R()};const U=new Nu(h,W);return e?n?R():b=U.run():o==="post"?Ht(U.run.bind(U),c&&c.suspense):U.run(),()=>{U.stop(),c&&c.scope&&Eu(c.scope.effects,U)}}function NS(t,e,n){const i=this.proxy,o=wt(t)?t.includes(".")?t_(i,t):()=>i[t]:t.bind(i,i);let l;me(e)?l=e:(l=e.handler,n=e);const u=_t;Pi(this);const c=e_(o,l.bind(i),n);return u?Pi(u):Kr(),c}function t_(t,e){const n=e.split(".");return()=>{let i=t;for(let o=0;o<n.length&&i;o++)i=i[n[o]];return i}}function Ur(t,e){if(!ht(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Rt(t))Ur(t.value,e);else if(pe(t))for(let n=0;n<t.length;n++)Ur(t[n],e);else if(_p(t)||Ii(t))t.forEach(n=>{Ur(n,e)});else if(vp(t))for(const n in t)Ur(t[n],e);return t}function OS(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return l_(()=>{t.isMounted=!0}),a_(()=>{t.isUnmounting=!0}),t}const dn=[Function,Array],PS={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:dn,onEnter:dn,onAfterEnter:dn,onEnterCancelled:dn,onBeforeLeave:dn,onLeave:dn,onAfterLeave:dn,onLeaveCancelled:dn,onBeforeAppear:dn,onAppear:dn,onAfterAppear:dn,onAppearCancelled:dn},setup(t,{slots:e}){const n=yR(),i=OS();let o;return()=>{const l=e.default&&i_(e.default(),!0);if(!l||!l.length)return;const u=Ue(t),{mode:c}=u,h=l[0];if(i.isLeaving)return Gu(h);const d=r_(h);if(!d)return Gu(h);const _=Ku(d,u,i,n);Vu(d,_);const g=n.subTree,y=g&&r_(g);let b=!1;const{getTransitionKey:R}=d.type;if(R){const W=R();o===void 0?o=W:W!==o&&(o=W,b=!0)}if(y&&y.type!==Pn&&(!zr(d,y)||b)){const W=Ku(y,u,i,n);if(Vu(y,W),c==="out-in")return i.isLeaving=!0,W.afterLeave=()=>{i.isLeaving=!1,n.update()},Gu(h);c==="in-out"&&d.type!==Pn&&(W.delayLeave=(U,G,J)=>{const ne=n_(i,y);ne[String(y.key)]=y,U._leaveCb=()=>{G(),U._leaveCb=void 0,delete _.delayedLeave},_.delayedLeave=J})}return h}}},MS=PS;function n_(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function Ku(t,e,n,i){const{appear:o,mode:l,persisted:u=!1,onBeforeEnter:c,onEnter:h,onAfterEnter:d,onEnterCancelled:_,onBeforeLeave:g,onLeave:y,onAfterLeave:b,onLeaveCancelled:R,onBeforeAppear:W,onAppear:U,onAfterAppear:G,onAppearCancelled:J}=e,ne=String(t.key),le=n_(n,t),we=(ie,Me)=>{ie&&fn(ie,i,9,Me)},Pe={mode:l,persisted:u,beforeEnter(ie){let Me=c;if(!n.isMounted)if(o)Me=W||c;else return;ie._leaveCb&&ie._leaveCb(!0);const Ie=le[ne];Ie&&zr(t,Ie)&&Ie.el._leaveCb&&Ie.el._leaveCb(),we(Me,[ie])},enter(ie){let Me=h,Ie=d,$e=_;if(!n.isMounted)if(o)Me=U||h,Ie=G||d,$e=J||_;else return;let xe=!1;const Ze=ie._enterCb=Tn=>{xe||(xe=!0,Tn?we($e,[ie]):we(Ie,[ie]),Pe.delayedLeave&&Pe.delayedLeave(),ie._enterCb=void 0)};Me?(Me(ie,Ze),Me.length<=1&&Ze()):Ze()},leave(ie,Me){const Ie=String(t.key);if(ie._enterCb&&ie._enterCb(!0),n.isUnmounting)return Me();we(g,[ie]);let $e=!1;const xe=ie._leaveCb=Ze=>{$e||($e=!0,Me(),Ze?we(R,[ie]):we(b,[ie]),ie._leaveCb=void 0,le[Ie]===t&&delete le[Ie])};le[Ie]=t,y?(y(ie,xe),y.length<=1&&xe()):xe()},clone(ie){return Ku(ie,e,n,i)}};return Pe}function Gu(t){if(_l(t))return t=Oi(t),t.children=null,t}function r_(t){return _l(t)?t.children?t.children[0]:void 0:t}function Vu(t,e){t.shapeFlag&6&&t.component?Vu(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function i_(t,e=!1){let n=[],i=0;for(let o=0;o<t.length;o++){const l=t[o];l.type===On?(l.patchFlag&128&&i++,n=n.concat(i_(l.children,e))):(e||l.type!==Pn)&&n.push(l)}if(i>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function s_(t){return me(t)?{setup:t,name:t.name}:t}const qu=t=>!!t.type.__asyncLoader,_l=t=>t.type.__isKeepAlive;function LS(t,e){o_(t,"a",e)}function kS(t,e){o_(t,"da",e)}function o_(t,e,n=_t){const i=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(gl(e,i,n),n){let o=n.parent;for(;o&&o.parent;)_l(o.parent.vnode)&&DS(i,e,n,o),o=o.parent}}function DS(t,e,n,i){const o=gl(e,t,i,!0);u_(()=>{Eu(i[e],o)},n)}function gl(t,e,n=_t,i=!1){if(n){const o=n[t]||(n[t]=[]),l=e.__weh||(e.__weh=(...u)=>{if(n.isUnmounted)return;Ri(),Pi(n);const c=fn(e,n,t,u);return Kr(),Fr(),c});return i?o.unshift(l):o.push(l),l}}const Jn=t=>(e,n=_t)=>(!Ss||t==="sp")&&gl(t,e,n),FS=Jn("bm"),l_=Jn("m"),US=Jn("bu"),WS=Jn("u"),a_=Jn("bum"),u_=Jn("um"),BS=Jn("sp"),HS=Jn("rtg"),$S=Jn("rtc");function zS(t,e=_t){gl("ec",t,e)}let Yu=!0;function KS(t){const e=h_(t),n=t.proxy,i=t.ctx;Yu=!1,e.beforeCreate&&c_(e.beforeCreate,t,"bc");const{data:o,computed:l,methods:u,watch:c,provide:h,inject:d,created:_,beforeMount:g,mounted:y,beforeUpdate:b,updated:R,activated:W,deactivated:U,beforeDestroy:G,beforeUnmount:J,destroyed:ne,unmounted:le,render:we,renderTracked:Pe,renderTriggered:ie,errorCaptured:Me,serverPrefetch:Ie,expose:$e,inheritAttrs:xe,components:Ze,directives:Tn,filters:Un}=e;if(d&&GS(d,i,null,t.appContext.config.unwrapInjectedRef),u)for(const Ne in u){const Se=u[Ne];me(Se)&&(i[Ne]=Se.bind(n))}if(o){const Ne=o.call(n,n);ht(Ne)&&(t.data=ms(Ne))}if(Yu=!0,l)for(const Ne in l){const Se=l[Ne],Lt=me(Se)?Se.bind(n,n):me(Se.get)?Se.get.bind(n,n):yn,pn=!me(Se)&&me(Se.set)?Se.set.bind(n):yn,ut=kn({get:Lt,set:pn});Object.defineProperty(i,Ne,{enumerable:!0,configurable:!0,get:()=>ut.value,set:tn=>ut.value=tn})}if(c)for(const Ne in c)f_(c[Ne],i,n,Ne);if(h){const Ne=me(h)?h.call(n):h;Reflect.ownKeys(Ne).forEach(Se=>{dl(Se,Ne[Se])})}_&&c_(_,t,"c");function ot(Ne,Se){pe(Se)?Se.forEach(Lt=>Ne(Lt.bind(n))):Se&&Ne(Se.bind(n))}if(ot(FS,g),ot(l_,y),ot(US,b),ot(WS,R),ot(LS,W),ot(kS,U),ot(zS,Me),ot($S,Pe),ot(HS,ie),ot(a_,J),ot(u_,le),ot(BS,Ie),pe($e))if($e.length){const Ne=t.exposed||(t.exposed={});$e.forEach(Se=>{Object.defineProperty(Ne,Se,{get:()=>n[Se],set:Lt=>n[Se]=Lt})})}else t.exposed||(t.exposed={});we&&t.render===yn&&(t.render=we),xe!=null&&(t.inheritAttrs=xe),Ze&&(t.components=Ze),Tn&&(t.directives=Tn)}function GS(t,e,n=yn,i=!1){pe(t)&&(t=Qu(t));for(const o in t){const l=t[o];let u;ht(l)?"default"in l?u=jn(l.from||o,l.default,!0):u=jn(l.from||o):u=jn(l),Rt(u)&&i?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>u.value,set:c=>u.value=c}):e[o]=u}}function c_(t,e,n){fn(pe(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function f_(t,e,n,i){const o=i.includes(".")?t_(n,i):()=>n[i];if(wt(t)){const l=e[t];me(l)&&pl(o,l)}else if(me(t))pl(o,t.bind(n));else if(ht(t))if(pe(t))t.forEach(l=>f_(l,e,n,i));else{const l=me(t.handler)?t.handler.bind(n):e[t.handler];me(l)&&pl(o,l,t)}}function h_(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:o,optionsCache:l,config:{optionMergeStrategies:u}}=t.appContext,c=l.get(e);let h;return c?h=c:!o.length&&!n&&!i?h=e:(h={},o.length&&o.forEach(d=>ml(h,d,u,!0)),ml(h,e,u)),l.set(e,h),h}function ml(t,e,n,i=!1){const{mixins:o,extends:l}=e;l&&ml(t,l,n,!0),o&&o.forEach(u=>ml(t,u,n,!0));for(const u in e)if(!(i&&u==="expose")){const c=VS[u]||n&&n[u];t[u]=c?c(t[u],e[u]):e[u]}return t}const VS={data:d_,props:Wr,emits:Wr,methods:Wr,computed:Wr,beforeCreate:Mt,created:Mt,beforeMount:Mt,mounted:Mt,beforeUpdate:Mt,updated:Mt,beforeDestroy:Mt,beforeUnmount:Mt,destroyed:Mt,unmounted:Mt,activated:Mt,deactivated:Mt,errorCaptured:Mt,serverPrefetch:Mt,components:Wr,directives:Wr,watch:YS,provide:d_,inject:qS};function d_(t,e){return e?t?function(){return St(me(t)?t.call(this,this):t,me(e)?e.call(this,this):e)}:e:t}function qS(t,e){return Wr(Qu(t),Qu(e))}function Qu(t){if(pe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Mt(t,e){return t?[...new Set([].concat(t,e))]:e}function Wr(t,e){return t?St(St(Object.create(null),t),e):e}function YS(t,e){if(!t)return e;if(!e)return t;const n=St(Object.create(null),t);for(const i in e)n[i]=Mt(t[i],e[i]);return n}function QS(t,e,n,i=!1){const o={},l={};tl(l,Cl,1),t.propsDefaults=Object.create(null),p_(t,e,o,l);for(const u in t.propsOptions[0])u in o||(o[u]=void 0);n?t.props=i?o:cS(o):t.type.props?t.props=o:t.props=l,t.attrs=l}function XS(t,e,n,i){const{props:o,attrs:l,vnode:{patchFlag:u}}=t,c=Ue(o),[h]=t.propsOptions;let d=!1;if((i||u>0)&&!(u&16)){if(u&8){const _=t.vnode.dynamicProps;for(let g=0;g<_.length;g++){let y=_[g];const b=e[y];if(h)if(Le(l,y))b!==l[y]&&(l[y]=b,d=!0);else{const R=Nn(y);o[R]=Xu(h,c,R,b,t,!1)}else b!==l[y]&&(l[y]=b,d=!0)}}}else{p_(t,e,o,l)&&(d=!0);let _;for(const g in c)(!e||!Le(e,g)&&((_=bi(g))===g||!Le(e,_)))&&(h?n&&(n[g]!==void 0||n[_]!==void 0)&&(o[g]=Xu(h,c,g,void 0,t,!0)):delete o[g]);if(l!==c)for(const g in l)(!e||!Le(e,g)&&!0)&&(delete l[g],d=!0)}d&&Qn(t,"set","$attrs")}function p_(t,e,n,i){const[o,l]=t.propsOptions;let u=!1,c;if(e)for(let h in e){if(Jo(h))continue;const d=e[h];let _;o&&Le(o,_=Nn(h))?!l||!l.includes(_)?n[_]=d:(c||(c={}))[_]=d:$u(t.emitsOptions,h)||(!(h in i)||d!==i[h])&&(i[h]=d,u=!0)}if(l){const h=Ue(n),d=c||qe;for(let _=0;_<l.length;_++){const g=l[_];n[g]=Xu(o,h,g,d[g],t,!Le(d,g))}}return u}function Xu(t,e,n,i,o,l){const u=t[n];if(u!=null){const c=Le(u,"default");if(c&&i===void 0){const h=u.default;if(u.type!==Function&&me(h)){const{propsDefaults:d}=o;n in d?i=d[n]:(Pi(o),i=d[n]=h.call(null,e),Kr())}else i=h}u[0]&&(l&&!c?i=!1:u[1]&&(i===""||i===bi(n))&&(i=!0))}return i}function __(t,e,n=!1){const i=e.propsCache,o=i.get(t);if(o)return o;const l=t.props,u={},c=[];let h=!1;if(!me(t)){const _=g=>{h=!0;const[y,b]=__(g,e,!0);St(u,y),b&&c.push(...b)};!n&&e.mixins.length&&e.mixins.forEach(_),t.extends&&_(t.extends),t.mixins&&t.mixins.forEach(_)}if(!l&&!h)return i.set(t,wi),wi;if(pe(l))for(let _=0;_<l.length;_++){const g=Nn(l[_]);g_(g)&&(u[g]=qe)}else if(l)for(const _ in l){const g=Nn(_);if(g_(g)){const y=l[_],b=u[g]=pe(y)||me(y)?{type:y}:y;if(b){const R=y_(Boolean,b.type),W=y_(String,b.type);b[0]=R>-1,b[1]=W<0||R<W,(R>-1||Le(b,"default"))&&c.push(g)}}}const d=[u,c];return i.set(t,d),d}function g_(t){return t[0]!=="$"}function m_(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function v_(t,e){return m_(t)===m_(e)}function y_(t,e){return pe(e)?e.findIndex(n=>v_(n,t)):me(e)&&v_(e,t)?0:-1}const C_=t=>t[0]==="_"||t==="$stable",ju=t=>pe(t)?t.map(Mn):[Mn(t)],jS=(t,e,n)=>{const i=IS((...o)=>ju(e(...o)),n);return i._c=!1,i},E_=(t,e,n)=>{const i=t._ctx;for(const o in t){if(C_(o))continue;const l=t[o];if(me(l))e[o]=jS(o,l,i);else if(l!=null){const u=ju(l);e[o]=()=>u}}},w_=(t,e)=>{const n=ju(e);t.slots.default=()=>n},JS=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ue(e),tl(e,"_",n)):E_(e,t.slots={})}else t.slots={},e&&w_(t,e);tl(t.slots,Cl,1)},ZS=(t,e,n)=>{const{vnode:i,slots:o}=t;let l=!0,u=qe;if(i.shapeFlag&32){const c=e._;c?n&&c===1?l=!1:(St(o,e),!n&&c===1&&delete o._):(l=!e.$stable,E_(e,o)),u=e}else e&&(w_(t,e),u={default:1});if(l)for(const c in o)!C_(c)&&!(c in u)&&delete o[c]};function ZP(t,e){const n=hn;if(n===null)return t;const i=n.proxy,o=t.dirs||(t.dirs=[]);for(let l=0;l<e.length;l++){let[u,c,h,d=qe]=e[l];me(u)&&(u={mounted:u,updated:u}),u.deep&&Ur(c),o.push({dir:u,instance:i,value:c,oldValue:void 0,arg:h,modifiers:d})}return t}function Br(t,e,n,i){const o=t.dirs,l=e&&e.dirs;for(let u=0;u<o.length;u++){const c=o[u];l&&(c.oldValue=l[u].value);let h=c.dir[i];h&&(Ri(),fn(h,n,8,[t.el,c,t,e]),Fr())}}function I_(){return{app:null,config:{isNativeTag:AT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let eR=0;function tR(t,e){return function(i,o=null){o!=null&&!ht(o)&&(o=null);const l=I_(),u=new Set;let c=!1;const h=l.app={_uid:eR++,_component:i,_props:o,_container:null,_context:l,_instance:null,version:SR,get config(){return l.config},set config(d){},use(d,..._){return u.has(d)||(d&&me(d.install)?(u.add(d),d.install(h,..._)):me(d)&&(u.add(d),d(h,..._))),h},mixin(d){return l.mixins.includes(d)||l.mixins.push(d),h},component(d,_){return _?(l.components[d]=_,h):l.components[d]},directive(d,_){return _?(l.directives[d]=_,h):l.directives[d]},mount(d,_,g){if(!c){const y=$t(i,o);return y.appContext=l,_&&e?e(y,d):t(y,d,g),c=!0,h._container=d,d.__vue_app__=h,rc(y.component)||y.component.proxy}},unmount(){c&&(t(null,h._container),delete h._container.__vue_app__)},provide(d,_){return l.provides[d]=_,h}};return h}}function Ju(t,e,n,i,o=!1){if(pe(t)){t.forEach((y,b)=>Ju(y,e&&(pe(e)?e[b]:e),n,i,o));return}if(qu(i)&&!o)return;const l=i.shapeFlag&4?rc(i.component)||i.component.proxy:i.el,u=o?null:l,{i:c,r:h}=t,d=e&&e.r,_=c.refs===qe?c.refs={}:c.refs,g=c.setupState;if(d!=null&&d!==h&&(wt(d)?(_[d]=null,Le(g,d)&&(g[d]=null)):Rt(d)&&(d.value=null)),me(h))dr(h,c,12,[u,_]);else{const y=wt(h),b=Rt(h);if(y||b){const R=()=>{if(t.f){const W=y?_[h]:h.value;o?pe(W)&&Eu(W,l):pe(W)?W.includes(l)||W.push(l):y?_[h]=[l]:(h.value=[l],t.k&&(_[t.k]=h.value))}else y?(_[h]=u,Le(g,h)&&(g[h]=u)):Rt(h)&&(h.value=u,t.k&&(_[t.k]=u))};u?(R.id=-1,Ht(R,n)):R()}}}const Ht=xS;function nR(t){return rR(t)}function rR(t,e){const n=kT();n.__VUE__=!0;const{insert:i,remove:o,patchProp:l,createElement:u,createText:c,createComment:h,setText:d,setElementText:_,parentNode:g,nextSibling:y,setScopeId:b=yn,cloneNode:R,insertStaticContent:W}=t,U=(C,I,x,D=null,M=null,z=null,q=!1,H=null,B=!!I.dynamicChildren)=>{if(C===I)return;C&&!zr(C,I)&&(D=j(C),kt(C,M,z,!0),C=null),I.patchFlag===-2&&(B=!1,I.dynamicChildren=null);const{type:F,ref:te,shapeFlag:X}=I;switch(F){case Zu:G(C,I,x,D);break;case Pn:J(C,I,x,D);break;case vl:C==null&&ne(I,x,D,q);break;case On:Tn(C,I,x,D,M,z,q,H,B);break;default:X&1?Pe(C,I,x,D,M,z,q,H,B):X&6?Un(C,I,x,D,M,z,q,H,B):(X&64||X&128)&&F.process(C,I,x,D,M,z,q,H,B,Ge)}te!=null&&M&&Ju(te,C&&C.ref,z,I||C,!I)},G=(C,I,x,D)=>{if(C==null)i(I.el=c(I.children),x,D);else{const M=I.el=C.el;I.children!==C.children&&d(M,I.children)}},J=(C,I,x,D)=>{C==null?i(I.el=h(I.children||""),x,D):I.el=C.el},ne=(C,I,x,D)=>{[C.el,C.anchor]=W(C.children,I,x,D,C.el,C.anchor)},le=({el:C,anchor:I},x,D)=>{let M;for(;C&&C!==I;)M=y(C),i(C,x,D),C=M;i(I,x,D)},we=({el:C,anchor:I})=>{let x;for(;C&&C!==I;)x=y(C),o(C),C=x;o(I)},Pe=(C,I,x,D,M,z,q,H,B)=>{q=q||I.type==="svg",C==null?ie(I,x,D,M,z,q,H,B):$e(C,I,M,z,q,H,B)},ie=(C,I,x,D,M,z,q,H)=>{let B,F;const{type:te,props:X,shapeFlag:ee,transition:ue,patchFlag:ve,dirs:ke}=C;if(C.el&&R!==void 0&&ve===-1)B=C.el=R(C.el);else{if(B=C.el=u(C.type,z,X&&X.is,X),ee&8?_(B,C.children):ee&16&&Ie(C.children,B,null,D,M,z&&te!=="foreignObject",q,H),ke&&Br(C,null,D,"created"),X){for(const ze in X)ze!=="value"&&!Jo(ze)&&l(B,ze,null,X[ze],z,C.children,D,M,K);"value"in X&&l(B,"value",null,X.value),(F=X.onVnodeBeforeMount)&&Ln(F,D,C)}Me(B,C,C.scopeId,q,D)}ke&&Br(C,null,D,"beforeMount");const De=(!M||M&&!M.pendingBranch)&&ue&&!ue.persisted;De&&ue.beforeEnter(B),i(B,I,x),((F=X&&X.onVnodeMounted)||De||ke)&&Ht(()=>{F&&Ln(F,D,C),De&&ue.enter(B),ke&&Br(C,null,D,"mounted")},M)},Me=(C,I,x,D,M)=>{if(x&&b(C,x),D)for(let z=0;z<D.length;z++)b(C,D[z]);if(M){let z=M.subTree;if(I===z){const q=M.vnode;Me(C,q,q.scopeId,q.slotScopeIds,M.parent)}}},Ie=(C,I,x,D,M,z,q,H,B=0)=>{for(let F=B;F<C.length;F++){const te=C[F]=H?_r(C[F]):Mn(C[F]);U(null,te,I,x,D,M,z,q,H)}},$e=(C,I,x,D,M,z,q)=>{const H=I.el=C.el;let{patchFlag:B,dynamicChildren:F,dirs:te}=I;B|=C.patchFlag&16;const X=C.props||qe,ee=I.props||qe;let ue;x&&Hr(x,!1),(ue=ee.onVnodeBeforeUpdate)&&Ln(ue,x,I,C),te&&Br(I,C,x,"beforeUpdate"),x&&Hr(x,!0);const ve=M&&I.type!=="foreignObject";if(F?xe(C.dynamicChildren,F,H,x,D,ve,z):q||Lt(C,I,H,null,x,D,ve,z,!1),B>0){if(B&16)Ze(H,I,X,ee,x,D,M);else if(B&2&&X.class!==ee.class&&l(H,"class",null,ee.class,M),B&4&&l(H,"style",X.style,ee.style,M),B&8){const ke=I.dynamicProps;for(let De=0;De<ke.length;De++){const ze=ke[De],xt=X[ze],Sn=ee[ze];(Sn!==xt||ze==="value")&&l(H,ze,xt,Sn,M,C.children,x,D,K)}}B&1&&C.children!==I.children&&_(H,I.children)}else!q&&F==null&&Ze(H,I,X,ee,x,D,M);((ue=ee.onVnodeUpdated)||te)&&Ht(()=>{ue&&Ln(ue,x,I,C),te&&Br(I,C,x,"updated")},D)},xe=(C,I,x,D,M,z,q)=>{for(let H=0;H<I.length;H++){const B=C[H],F=I[H],te=B.el&&(B.type===On||!zr(B,F)||B.shapeFlag&(6|64))?g(B.el):x;U(B,F,te,null,D,M,z,q,!0)}},Ze=(C,I,x,D,M,z,q)=>{if(x!==D){for(const H in D){if(Jo(H))continue;const B=D[H],F=x[H];B!==F&&H!=="value"&&l(C,H,F,B,q,I.children,M,z,K)}if(x!==qe)for(const H in x)!Jo(H)&&!(H in D)&&l(C,H,x[H],null,q,I.children,M,z,K);"value"in D&&l(C,"value",x.value,D.value)}},Tn=(C,I,x,D,M,z,q,H,B)=>{const F=I.el=C?C.el:c(""),te=I.anchor=C?C.anchor:c("");let{patchFlag:X,dynamicChildren:ee,slotScopeIds:ue}=I;ue&&(H=H?H.concat(ue):ue),C==null?(i(F,x,D),i(te,x,D),Ie(I.children,x,te,M,z,q,H,B)):X>0&&X&64&&ee&&C.dynamicChildren?(xe(C.dynamicChildren,ee,x,M,z,q,H),(I.key!=null||M&&I===M.subTree)&&b_(C,I,!0)):Lt(C,I,x,te,M,z,q,H,B)},Un=(C,I,x,D,M,z,q,H,B)=>{I.slotScopeIds=H,C==null?I.shapeFlag&512?M.ctx.activate(I,x,D,q,B):tr(I,x,D,M,z,q,B):ot(C,I,B)},tr=(C,I,x,D,M,z,q)=>{const H=C.component=vR(C,D,M);if(_l(C)&&(H.ctx.renderer=Ge),CR(H),H.asyncDep){if(M&&M.registerDep(H,Ne),!C.el){const B=H.subTree=$t(Pn);J(null,B,I,x)}return}Ne(H,C,I,x,M,z,q)},ot=(C,I,x)=>{const D=I.component=C.component;if(SS(C,I,x))if(D.asyncDep&&!D.asyncResolved){Se(D,I,x);return}else D.next=I,yS(D.update),D.update();else I.component=C.component,I.el=C.el,D.vnode=I},Ne=(C,I,x,D,M,z,q)=>{const H=()=>{if(C.isMounted){let{next:te,bu:X,u:ee,parent:ue,vnode:ve}=C,ke=te,De;Hr(C,!1),te?(te.el=ve.el,Se(C,te,q)):te=ve,X&&Tu(X),(De=te.props&&te.props.onVnodeBeforeUpdate)&&Ln(De,ue,te,ve),Hr(C,!0);const ze=zu(C),xt=C.subTree;C.subTree=ze,U(xt,ze,g(xt.el),j(xt),C,M,z),te.el=ze.el,ke===null&&RS(C,ze.el),ee&&Ht(ee,M),(De=te.props&&te.props.onVnodeUpdated)&&Ht(()=>Ln(De,ue,te,ve),M)}else{let te;const{el:X,props:ee}=I,{bm:ue,m:ve,parent:ke}=C,De=qu(I);if(Hr(C,!1),ue&&Tu(ue),!De&&(te=ee&&ee.onVnodeBeforeMount)&&Ln(te,ke,I),Hr(C,!0),X&&ce){const ze=()=>{C.subTree=zu(C),ce(X,C.subTree,C,M,null)};De?I.type.__asyncLoader().then(()=>!C.isUnmounted&&ze()):ze()}else{const ze=C.subTree=zu(C);U(null,ze,x,D,C,M,z),I.el=ze.el}if(ve&&Ht(ve,M),!De&&(te=ee&&ee.onVnodeMounted)){const ze=I;Ht(()=>Ln(te,ke,ze),M)}I.shapeFlag&256&&C.a&&Ht(C.a,M),C.isMounted=!0,I=x=D=null}},B=C.effect=new Nu(H,()=>Vp(C.update),C.scope),F=C.update=B.run.bind(B);F.id=C.uid,Hr(C,!0),F()},Se=(C,I,x)=>{I.component=C;const D=C.vnode.props;C.vnode=I,C.next=null,XS(C,I.props,D,x),ZS(C,I.children,x),Ri(),Hu(void 0,C.update),Fr()},Lt=(C,I,x,D,M,z,q,H,B=!1)=>{const F=C&&C.children,te=C?C.shapeFlag:0,X=I.children,{patchFlag:ee,shapeFlag:ue}=I;if(ee>0){if(ee&128){ut(F,X,x,D,M,z,q,H,B);return}else if(ee&256){pn(F,X,x,D,M,z,q,H,B);return}}ue&8?(te&16&&K(F,M,z),X!==F&&_(x,X)):te&16?ue&16?ut(F,X,x,D,M,z,q,H,B):K(F,M,z,!0):(te&8&&_(x,""),ue&16&&Ie(X,x,D,M,z,q,H,B))},pn=(C,I,x,D,M,z,q,H,B)=>{C=C||wi,I=I||wi;const F=C.length,te=I.length,X=Math.min(F,te);let ee;for(ee=0;ee<X;ee++){const ue=I[ee]=B?_r(I[ee]):Mn(I[ee]);U(C[ee],ue,x,null,M,z,q,H,B)}F>te?K(C,M,z,!0,!1,X):Ie(I,x,D,M,z,q,H,B,X)},ut=(C,I,x,D,M,z,q,H,B)=>{let F=0;const te=I.length;let X=C.length-1,ee=te-1;for(;F<=X&&F<=ee;){const ue=C[F],ve=I[F]=B?_r(I[F]):Mn(I[F]);if(zr(ue,ve))U(ue,ve,x,null,M,z,q,H,B);else break;F++}for(;F<=X&&F<=ee;){const ue=C[X],ve=I[ee]=B?_r(I[ee]):Mn(I[ee]);if(zr(ue,ve))U(ue,ve,x,null,M,z,q,H,B);else break;X--,ee--}if(F>X){if(F<=ee){const ue=ee+1,ve=ue<te?I[ue].el:D;for(;F<=ee;)U(null,I[F]=B?_r(I[F]):Mn(I[F]),x,ve,M,z,q,H,B),F++}}else if(F>ee)for(;F<=X;)kt(C[F],M,z,!0),F++;else{const ue=F,ve=F,ke=new Map;for(F=ve;F<=ee;F++){const yt=I[F]=B?_r(I[F]):Mn(I[F]);yt.key!=null&&ke.set(yt.key,F)}let De,ze=0;const xt=ee-ve+1;let Sn=!1,oi=0;const Wn=new Array(xt);for(F=0;F<xt;F++)Wn[F]=0;for(F=ue;F<=X;F++){const yt=C[F];if(ze>=xt){kt(yt,M,z,!0);continue}let Dt;if(yt.key!=null)Dt=ke.get(yt.key);else for(De=ve;De<=ee;De++)if(Wn[De-ve]===0&&zr(yt,I[De])){Dt=De;break}Dt===void 0?kt(yt,M,z,!0):(Wn[Dt-ve]=F+1,Dt>=oi?oi=Dt:Sn=!0,U(yt,I[Dt],x,null,M,z,q,H,B),ze++)}const li=Sn?iR(Wn):wi;for(De=li.length-1,F=xt-1;F>=0;F--){const yt=ve+F,Dt=I[yt],oo=yt+1<te?I[yt+1].el:D;Wn[F]===0?U(null,Dt,x,oo,M,z,q,H,B):Sn&&(De<0||F!==li[De]?tn(Dt,x,oo,2):De--)}}},tn=(C,I,x,D,M=null)=>{const{el:z,type:q,transition:H,children:B,shapeFlag:F}=C;if(F&6){tn(C.component.subTree,I,x,D);return}if(F&128){C.suspense.move(I,x,D);return}if(F&64){q.move(C,I,x,Ge);return}if(q===On){i(z,I,x);for(let X=0;X<B.length;X++)tn(B[X],I,x,D);i(C.anchor,I,x);return}if(q===vl){le(C,I,x);return}if(D!==2&&F&1&&H)if(D===0)H.beforeEnter(z),i(z,I,x),Ht(()=>H.enter(z),M);else{const{leave:X,delayLeave:ee,afterLeave:ue}=H,ve=()=>i(z,I,x),ke=()=>{X(z,()=>{ve(),ue&&ue()})};ee?ee(z,ve,ke):ke()}else i(z,I,x)},kt=(C,I,x,D=!1,M=!1)=>{const{type:z,props:q,ref:H,children:B,dynamicChildren:F,shapeFlag:te,patchFlag:X,dirs:ee}=C;if(H!=null&&Ju(H,null,x,C,!0),te&256){I.ctx.deactivate(C);return}const ue=te&1&&ee,ve=!qu(C);let ke;if(ve&&(ke=q&&q.onVnodeBeforeUnmount)&&Ln(ke,I,C),te&6)Q(C.component,x,D);else{if(te&128){C.suspense.unmount(x,D);return}ue&&Br(C,null,I,"beforeUnmount"),te&64?C.type.remove(C,I,x,M,Ge,D):F&&(z!==On||X>0&&X&64)?K(F,I,x,!1,!0):(z===On&&X&(128|256)||!M&&te&16)&&K(B,I,x),D&&Zi(C)}(ve&&(ke=q&&q.onVnodeUnmounted)||ue)&&Ht(()=>{ke&&Ln(ke,I,C),ue&&Br(C,null,I,"unmounted")},x)},Zi=C=>{const{type:I,el:x,anchor:D,transition:M}=C;if(I===On){L(x,D);return}if(I===vl){we(C);return}const z=()=>{o(x),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(C.shapeFlag&1&&M&&!M.persisted){const{leave:q,delayLeave:H}=M,B=()=>q(x,z);H?H(C.el,z,B):B()}else z()},L=(C,I)=>{let x;for(;C!==I;)x=y(C),o(C),C=x;o(I)},Q=(C,I,x)=>{const{bum:D,scope:M,update:z,subTree:q,um:H}=C;D&&Tu(D),M.stop(),z&&(z.active=!1,kt(q,C,I,x)),H&&Ht(H,I),Ht(()=>{C.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},K=(C,I,x,D=!1,M=!1,z=0)=>{for(let q=z;q<C.length;q++)kt(C[q],I,x,D,M)},j=C=>C.shapeFlag&6?j(C.component.subTree):C.shapeFlag&128?C.suspense.next():y(C.anchor||C.el),Oe=(C,I,x)=>{C==null?I._vnode&&kt(I._vnode,null,null,!0):U(I._vnode||null,C,I,null,null,null,x),Qp(),I._vnode=C},Ge={p:U,um:kt,m:tn,r:Zi,mt:tr,mc:Ie,pc:Lt,pbc:xe,n:j,o:t};let de,ce;return e&&([de,ce]=e(Ge)),{render:Oe,hydrate:de,createApp:tR(Oe,de)}}function Hr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function b_(t,e,n=!1){const i=t.children,o=e.children;if(pe(i)&&pe(o))for(let l=0;l<i.length;l++){const u=i[l];let c=o[l];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=o[l]=_r(o[l]),c.el=u.el),n||b_(u,c))}}function iR(t){const e=t.slice(),n=[0];let i,o,l,u,c;const h=t.length;for(i=0;i<h;i++){const d=t[i];if(d!==0){if(o=n[n.length-1],t[o]<d){e[i]=o,n.push(i);continue}for(l=0,u=n.length-1;l<u;)c=l+u>>1,t[n[c]]<d?l=c+1:u=c;d<t[n[l]]&&(l>0&&(e[i]=n[l-1]),n[l]=i)}}for(l=n.length,u=n[l-1];l-- >0;)n[l]=u,u=e[u];return n}const sR=t=>t.__isTeleport,T_="components";function eM(t,e){return lR(T_,t,!0,e)||t}const oR=Symbol();function lR(t,e,n=!0,i=!1){const o=hn||_t;if(o){const l=o.type;if(t===T_){const c=bR(l);if(c&&(c===e||c===Nn(e)||c===el(Nn(e))))return l}const u=S_(o[t]||l[t],e)||S_(o.appContext[t],e);return!u&&i?l:u}}function S_(t,e){return t&&(t[e]||t[Nn(e)]||t[el(Nn(e))])}const On=Symbol(void 0),Zu=Symbol(void 0),Pn=Symbol(void 0),vl=Symbol(void 0),Ts=[];let $r=null;function aR(t=!1){Ts.push($r=t?null:[])}function uR(){Ts.pop(),$r=Ts[Ts.length-1]||null}let yl=1;function R_(t){yl+=t}function A_(t){return t.dynamicChildren=yl>0?$r||wi:null,uR(),yl>0&&$r&&$r.push(t),t}function tM(t,e,n,i,o,l){return A_(N_(t,e,n,i,o,l,!0))}function cR(t,e,n,i,o){return A_($t(t,e,n,i,o,!0))}function ec(t){return t?t.__v_isVNode===!0:!1}function zr(t,e){return t.type===e.type&&t.key===e.key}const Cl="__vInternal",x_=({key:t})=>t!=null?t:null,El=({ref:t,ref_key:e,ref_for:n})=>t!=null?wt(t)||Rt(t)||me(t)?{i:hn,r:t,k:e,f:!!n}:t:null;function N_(t,e=null,n=null,i=0,o=null,l=t===On?0:1,u=!1,c=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&x_(e),ref:e&&El(e),scopeId:fl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};return c?(tc(h,n),l&128&&t.normalize(h)):n&&(h.shapeFlag|=wt(n)?8:16),yl>0&&!u&&$r&&(h.patchFlag>0||l&6)&&h.patchFlag!==32&&$r.push(h),h}const $t=fR;function fR(t,e=null,n=null,i=0,o=null,l=!1){if((!t||t===oR)&&(t=Pn),ec(t)){const c=Oi(t,e,!0);return n&&tc(c,n),c}if(TR(t)&&(t=t.__vccOpts),e){e=hR(e);let{class:c,style:h}=e;c&&!wt(c)&&(e.class=yu(c)),ht(h)&&(Up(h)&&!pe(h)&&(h=St({},h)),e.style=vu(h))}const u=wt(t)?1:AS(t)?128:sR(t)?64:ht(t)?4:me(t)?2:0;return N_(t,e,n,i,o,u,l,!0)}function hR(t){return t?Up(t)||Cl in t?St({},t):t:null}function Oi(t,e,n=!1){const{props:i,ref:o,patchFlag:l,children:u}=t,c=e?pR(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&x_(c),ref:e&&e.ref?n&&o?pe(o)?o.concat(El(e)):[o,El(e)]:El(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==On?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Oi(t.ssContent),ssFallback:t.ssFallback&&Oi(t.ssFallback),el:t.el,anchor:t.anchor}}function dR(t=" ",e=0){return $t(Zu,null,t,e)}function nM(t,e){const n=$t(vl,null,t);return n.staticCount=e,n}function rM(t="",e=!1){return e?(aR(),cR(Pn,null,t)):$t(Pn,null,t)}function Mn(t){return t==null||typeof t=="boolean"?$t(Pn):pe(t)?$t(On,null,t.slice()):typeof t=="object"?_r(t):$t(Zu,null,String(t))}function _r(t){return t.el===null||t.memo?t:Oi(t)}function tc(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(pe(e))n=16;else if(typeof e=="object")if(i&(1|64)){const o=e.default;o&&(o._c&&(o._d=!1),tc(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!(Cl in e)?e._ctx=hn:o===3&&hn&&(hn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else me(e)?(e={default:e,_ctx:hn},n=32):(e=String(e),i&64?(n=16,e=[dR(e)]):n=8);t.children=e,t.shapeFlag|=n}function pR(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const o in i)if(o==="class")e.class!==i.class&&(e.class=yu([e.class,i.class]));else if(o==="style")e.style=vu([e.style,i.style]);else if(Xo(o)){const l=e[o],u=i[o];u&&l!==u&&!(pe(l)&&l.includes(u))&&(e[o]=l?[].concat(l,u):u)}else o!==""&&(e[o]=i[o])}return e}function Ln(t,e,n,i=null){fn(t,e,7,[n,i])}function iM(t,e,n,i){let o;const l=n&&n[i];if(pe(t)||wt(t)){o=new Array(t.length);for(let u=0,c=t.length;u<c;u++)o[u]=e(t[u],u,void 0,l&&l[u])}else if(typeof t=="number"){o=new Array(t);for(let u=0;u<t;u++)o[u]=e(u+1,u,void 0,l&&l[u])}else if(ht(t))if(t[Symbol.iterator])o=Array.from(t,(u,c)=>e(u,c,void 0,l&&l[c]));else{const u=Object.keys(t);o=new Array(u.length);for(let c=0,h=u.length;c<h;c++){const d=u[c];o[c]=e(t[d],d,c,l&&l[c])}}else o=[];return n&&(n[i]=o),o}const nc=t=>t?O_(t)?rc(t)||t.proxy:nc(t.parent):null,wl=St(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>nc(t.parent),$root:t=>nc(t.root),$emit:t=>t.emit,$options:t=>h_(t),$forceUpdate:t=>()=>Vp(t.update),$nextTick:t=>Gp.bind(t.proxy),$watch:t=>NS.bind(t)}),_R={get({_:t},e){const{ctx:n,setupState:i,data:o,props:l,accessCache:u,type:c,appContext:h}=t;let d;if(e[0]!=="$"){const b=u[e];if(b!==void 0)switch(b){case 1:return i[e];case 2:return o[e];case 4:return n[e];case 3:return l[e]}else{if(i!==qe&&Le(i,e))return u[e]=1,i[e];if(o!==qe&&Le(o,e))return u[e]=2,o[e];if((d=t.propsOptions[0])&&Le(d,e))return u[e]=3,l[e];if(n!==qe&&Le(n,e))return u[e]=4,n[e];Yu&&(u[e]=0)}}const _=wl[e];let g,y;if(_)return e==="$attrs"&&Jt(t,"get",e),_(t);if((g=c.__cssModules)&&(g=g[e]))return g;if(n!==qe&&Le(n,e))return u[e]=4,n[e];if(y=h.config.globalProperties,Le(y,e))return y[e]},set({_:t},e,n){const{data:i,setupState:o,ctx:l}=t;if(o!==qe&&Le(o,e))o[e]=n;else if(i!==qe&&Le(i,e))i[e]=n;else if(Le(t.props,e))return!1;return e[0]==="$"&&e.slice(1)in t?!1:(l[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:o,propsOptions:l}},u){let c;return!!n[u]||t!==qe&&Le(t,u)||e!==qe&&Le(e,u)||(c=l[0])&&Le(c,u)||Le(i,u)||Le(wl,u)||Le(o.config.globalProperties,u)}},gR=I_();let mR=0;function vR(t,e,n){const i=t.type,o=(e?e.appContext:t.appContext)||gR,l={uid:mR++,vnode:t,type:i,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new DT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:__(i,o),emitsOptions:jp(i,o),emit:null,emitted:null,propsDefaults:qe,inheritAttrs:i.inheritAttrs,ctx:qe,data:qe,props:qe,attrs:qe,slots:qe,refs:qe,setupState:qe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=wS.bind(null,l),t.ce&&t.ce(l),l}let _t=null;const yR=()=>_t||hn,Pi=t=>{_t=t,t.scope.on()},Kr=()=>{_t&&_t.scope.off(),_t=null};function O_(t){return t.vnode.shapeFlag&4}let Ss=!1;function CR(t,e=!1){Ss=e;const{props:n,children:i}=t.vnode,o=O_(t);QS(t,n,o,e),JS(t,i);const l=o?ER(t,e):void 0;return Ss=!1,l}function ER(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Wp(new Proxy(t.ctx,_R));const{setup:i}=n;if(i){const o=t.setupContext=i.length>1?IR(t):null;Pi(t),Ri();const l=dr(i,t,0,[t.props,o]);if(Fr(),Kr(),gp(l)){if(l.then(Kr,Kr),e)return l.then(u=>{P_(t,u,e)}).catch(u=>{ul(u,t,0)});t.asyncDep=l}else P_(t,l,e)}else L_(t,e)}function P_(t,e,n){me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ht(e)&&(t.setupState=zp(e)),L_(t,n)}let M_;function L_(t,e,n){const i=t.type;if(!t.render){if(!e&&M_&&!i.render){const o=i.template;if(o){const{isCustomElement:l,compilerOptions:u}=t.appContext.config,{delimiters:c,compilerOptions:h}=i,d=St(St({isCustomElement:l,delimiters:c},u),h);i.render=M_(o,d)}}t.render=i.render||yn}Pi(t),Ri(),KS(t),Fr(),Kr()}function wR(t){return new Proxy(t.attrs,{get(e,n){return Jt(t,"get","$attrs"),e[n]}})}function IR(t){const e=i=>{t.exposed=i||{}};let n;return{get attrs(){return n||(n=wR(t))},slots:t.slots,emit:t.emit,expose:e}}function rc(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(zp(Wp(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in wl)return wl[n](t)}}))}function bR(t){return me(t)&&t.displayName||t.name}function TR(t){return me(t)&&"__vccOpts"in t}const kn=(t,e)=>gS(t,e,Ss);function k_(t,e,n){const i=arguments.length;return i===2?ht(e)&&!pe(e)?ec(e)?$t(t,null,[e]):$t(t,e):$t(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&ec(n)&&(n=[n]),$t(t,e,n))}const SR="3.2.28",RR="http://www.w3.org/2000/svg",Gr=typeof document!="undefined"?document:null,D_=Gr&&Gr.createElement("template"),AR={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const o=e?Gr.createElementNS(RR,t):Gr.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:t=>Gr.createTextNode(t),createComment:t=>Gr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Gr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,i,o,l){const u=n?n.previousSibling:e.lastChild;if(o&&l)for(;e.insertBefore(o.cloneNode(!0),n),!(o===l||!(o=o.nextSibling)););else{D_.innerHTML=i?`<svg>${t}</svg>`:t;const c=D_.content;if(i){const h=c.firstChild;for(;h.firstChild;)c.appendChild(h.firstChild);c.removeChild(h)}e.insertBefore(c,n)}return[u?u.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function xR(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function NR(t,e,n){const i=t.style,o=wt(n);if(n&&!o){for(const l in n)ic(i,l,n[l]);if(e&&!wt(e))for(const l in e)n[l]==null&&ic(i,l,"")}else{const l=i.display;o?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=l)}}const F_=/\s*!important$/;function ic(t,e,n){if(pe(n))n.forEach(i=>ic(t,e,i));else if(e.startsWith("--"))t.setProperty(e,n);else{const i=OR(t,e);F_.test(n)?t.setProperty(bi(i),n.replace(F_,""),"important"):t[i]=n}}const U_=["Webkit","Moz","ms"],sc={};function OR(t,e){const n=sc[e];if(n)return n;let i=Nn(e);if(i!=="filter"&&i in t)return sc[e]=i;i=el(i);for(let o=0;o<U_.length;o++){const l=U_[o]+i;if(l in t)return sc[e]=l}return e}const W_="http://www.w3.org/1999/xlink";function PR(t,e,n,i,o){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(W_,e.slice(6,e.length)):t.setAttributeNS(W_,e,n);else{const l=bT(e);n==null||l&&!dp(n)?t.removeAttribute(e):t.setAttribute(e,l?"":n)}}function MR(t,e,n,i,o,l,u){if(e==="innerHTML"||e==="textContent"){i&&u(i,o,l),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const c=n==null?"":n;(t.value!==c||t.tagName==="OPTION")&&(t.value=c),n==null&&t.removeAttribute(e);return}if(n===""||n==null){const c=typeof t[e];if(c==="boolean"){t[e]=dp(n);return}else if(n==null&&c==="string"){t[e]="",t.removeAttribute(e);return}else if(c==="number"){try{t[e]=0}catch{}t.removeAttribute(e);return}}try{t[e]=n}catch{}}let Il=Date.now,B_=!1;if(typeof window!="undefined"){Il()>document.createEvent("Event").timeStamp&&(Il=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);B_=!!(t&&Number(t[1])<=53)}let oc=0;const LR=Promise.resolve(),kR=()=>{oc=0},DR=()=>oc||(LR.then(kR),oc=Il());function FR(t,e,n,i){t.addEventListener(e,n,i)}function UR(t,e,n,i){t.removeEventListener(e,n,i)}function WR(t,e,n,i,o=null){const l=t._vei||(t._vei={}),u=l[e];if(i&&u)u.value=i;else{const[c,h]=BR(e);if(i){const d=l[e]=HR(i,o);FR(t,c,d,h)}else u&&(UR(t,c,u,h),l[e]=void 0)}}const H_=/(?:Once|Passive|Capture)$/;function BR(t){let e;if(H_.test(t)){e={};let n;for(;n=t.match(H_);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[bi(t.slice(2)),e]}function HR(t,e){const n=i=>{const o=i.timeStamp||Il();(B_||o>=n.attached-1)&&fn($R(i,n.value),e,5,[i])};return n.value=t,n.attached=DR(),n}function $R(t,e){if(pe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>o=>!o._stopped&&i&&i(o))}else return e}const $_=/^on[a-z]/,zR=(t,e,n,i,o=!1,l,u,c,h)=>{e==="class"?xR(t,i,o):e==="style"?NR(t,n,i):Xo(e)?Cu(e)||WR(t,e,n,i,u):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):KR(t,e,i,o))?MR(t,e,i,l,u,c,h):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),PR(t,e,i,o))};function KR(t,e,n,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&$_.test(e)&&me(n)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||$_.test(e)&&wt(n)?!1:e in t}const GR={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};MS.props;const sM={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Rs(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),Rs(t,!0),i.enter(t)):i.leave(t,()=>{Rs(t,!1)}):Rs(t,e))},beforeUnmount(t,{value:e}){Rs(t,e)}};function Rs(t,e){t.style.display=e?t._vod:"none"}const VR=St({patchProp:zR},AR);let z_;function qR(){return z_||(z_=nR(VR))}const oM=(...t)=>{const e=qR().createApp(...t),{mount:n}=e;return e.mount=i=>{const o=YR(i);if(!o)return;const l=e._component;!me(l)&&!l.render&&!l.template&&(l.template=o.innerHTML),o.innerHTML="";const u=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},e};function YR(t){return wt(t)?document.querySelector(t):t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=function(t,e){if(!t)throw Mi(e)},Mi=function(t){return new Error("Firebase Database ("+K_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)==55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)==56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},QR=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],u=t[n++],c=t[n++],h=((o&7)<<18|(l&63)<<12|(u&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const l=t[n++],u=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},lc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const l=t[o],u=o+1<t.length,c=u?t[o+1]:0,h=o+2<t.length,d=h?t[o+2]:0,_=l>>2,g=(l&3)<<4|c>>4;let y=(c&15)<<2|d>>6,b=d&63;h||(b=64,u||(y=64)),i.push(n[_],n[g],n[y],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(G_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],c=o<t.length?n[t.charAt(o)]:0;++o;const d=o<t.length?n[t.charAt(o)]:64;++o;const g=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||c==null||d==null||g==null)throw Error();const y=l<<2|c>>4;if(i.push(y),d!==64){const b=c<<4&240|d>>2;if(i.push(b),g!==64){const R=d<<6&192|g;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},XR=function(t){const e=G_(t);return lc.encodeByteArray(e,!0)},ac=function(t){try{return lc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){return V_(void 0,t)}function V_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!JR(n)||(t[n]=V_(t[n],e[n]));return t}function JR(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uc(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function ZR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function q_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Y_(){return K_.NODE_ADMIN===!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="FirebaseError";class As extends Error{constructor(e,n,i){super(n);this.code=e,this.customData=i,this.name=eA,Object.setPrototypeOf(this,As.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xs.prototype.create)}}class xs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?tA(l,i):"Error",c=`${this.serviceName}: ${u} (${o}).`;return new As(o,c,i)}}function tA(t,e){return t.replace(nA,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const nA=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t){return JSON.parse(t)}function gt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=function(t){let e={},n={},i={},o="";try{const l=t.split(".");e=Ns(ac(l[0])||""),n=Ns(ac(l[1])||""),o=l[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:o}},rA=function(t){const e=Q_(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},iA=function(t){const e=Q_(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function X_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tl(t,e,n){const i={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=e.call(n,t[o],o,t));return i}function cc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const l=t[o],u=e[o];if(j_(l)&&j_(u)){if(!cc(l,u))return!1}else if(l!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function j_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let g=0;g<16;g++)i[g]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let g=0;g<16;g++)i[g]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let g=16;g<80;g++){const y=i[g-3]^i[g-8]^i[g-14]^i[g-16];i[g]=(y<<1|y>>>31)&4294967295}let o=this.chain_[0],l=this.chain_[1],u=this.chain_[2],c=this.chain_[3],h=this.chain_[4],d,_;for(let g=0;g<80;g++){g<40?g<20?(d=c^l&(u^c),_=1518500249):(d=l^u^c,_=1859775393):g<60?(d=l&u|c&(l|u),_=2400959708):(d=l^u^c,_=3395469782);const y=(o<<5|o>>>27)+d+h+_+i[g]&4294967295;h=c,c=u,u=(l<<30|l>>>2)&4294967295,l=o,o=y}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let o=0;const l=this.buf_;let u=this.inbuf_;for(;o<n;){if(u===0)for(;o<=i;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(l[u]=e.charCodeAt(o),++u,++o,u===this.blockSize){this.compress_(l),u=0;break}}else for(;o<n;)if(l[u]=e[o],++u,++o,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let o=0;o<5;o++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[o]>>l&255,++i;return e}}function oA(t,e){const n=new lA(t,e);return n.subscribe.bind(n)}class lA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");aA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=hc),o.error===void 0&&(o.error=hc),o.complete===void 0&&(o.complete=hc);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hc(){}function J_(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);if(o>=55296&&o<=56319){const l=o-55296;i++,$(i<t.length,"Surrogate pair missing trail surrogate.");const u=t.charCodeAt(i)-56320;o=65536+(l<<10)+u}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Sl=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t){return t&&t._delegate?t._delegate:t}class Li{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new bl;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hA(e))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qr){return this.instances.has(e)}getOptions(e=qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(l);i===c&&u.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const u=this.instances.get(o);return u&&e(u,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(!!i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qr){return this.component?this.component.multipleInstances?e:qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fA(t){return t===qr?void 0:t}function hA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const pA={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},_A=Ye.INFO,gA={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},mA=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=gA[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dc{constructor(e){this.name=e,this._logLevel=_A,this._logHandler=mA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function yA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pc="@firebase/app",Z_="0.7.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new dc("@firebase/app"),CA="@firebase/app-compat",EA="@firebase/analytics-compat",wA="@firebase/analytics",IA="@firebase/app-check-compat",bA="@firebase/app-check",TA="@firebase/auth",SA="@firebase/auth-compat",RA="@firebase/database",AA="@firebase/database-compat",xA="@firebase/functions",NA="@firebase/functions-compat",OA="@firebase/installations",PA="@firebase/installations-compat",MA="@firebase/messaging",LA="@firebase/messaging-compat",kA="@firebase/performance",DA="@firebase/performance-compat",FA="@firebase/remote-config",UA="@firebase/remote-config-compat",WA="@firebase/storage",BA="@firebase/storage-compat",HA="@firebase/firestore",$A="@firebase/firestore-compat",zA="firebase",KA="9.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="[DEFAULT]",GA={[pc]:"fire-core",[CA]:"fire-core-compat",[wA]:"fire-analytics",[EA]:"fire-analytics-compat",[bA]:"fire-app-check",[IA]:"fire-app-check-compat",[TA]:"fire-auth",[SA]:"fire-auth-compat",[RA]:"fire-rtdb",[AA]:"fire-rtdb-compat",[xA]:"fire-fn",[NA]:"fire-fn-compat",[OA]:"fire-iid",[PA]:"fire-iid-compat",[MA]:"fire-fcm",[LA]:"fire-fcm-compat",[kA]:"fire-perf",[DA]:"fire-perf-compat",[FA]:"fire-rc",[UA]:"fire-rc-compat",[WA]:"fire-gcs",[BA]:"fire-gcs-compat",[HA]:"fire-fst",[$A]:"fire-fst-compat","fire-js":"fire-js",[zA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=new Map,gc=new Map;function VA(t,e){try{t.container.addComponent(e)}catch(n){_c.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Os(t){const e=t.name;if(gc.has(e))return _c.debug(`There were multiple attempts to register component ${e}.`),!1;gc.set(e,t);for(const n of Rl.values())VA(n,t);return!0}function qA(t,e){return t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Al=new xs("app","Firebase",YA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Al.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=KA;function lM(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:eg,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Al.create("bad-app-name",{appName:String(i)});const o=Rl.get(i);if(o){if(cc(t,o.options)&&cc(n,o.config))return o;throw Al.create("duplicate-app",{appName:i})}const l=new dA(i);for(const c of gc.values())l.addComponent(c);const u=new QA(t,n,l);return Rl.set(i,u),u}function XA(t=eg){const e=Rl.get(t);if(!e)throw Al.create("no-app",{appName:t});return e}function mr(t,e,n){var i;let o=(i=GA[t])!==null&&i!==void 0?i:t;n&&(o+=`-${n}`);const l=o.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const c=[`Unable to register library "${o}" with version "${e}":`];l&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_c.warn(c.join(" "));return}Os(new Li(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t){Os(new Li("platform-logger",e=>new vA(e),"PRIVATE")),mr(pc,Z_,t),mr(pc,Z_,"esm2017"),mr("fire-js","")}jA("");var JA="firebase",ZA="9.6.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(JA,ZA,"app");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function tg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function ng(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ex=ng,rg=new xs("auth","Firebase",ng());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=new dc("@firebase/auth");function xl(t,...e){ig.logLevel<=Ye.ERROR&&ig.error(`Auth (${mc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t,...e){throw vc(t,...e)}function og(t,...e){return vc(t,...e)}function tx(t,e,n){const i=Object.assign(Object.assign({},ex()),{[e]:n});return new xs("auth","Firebase",i).create(e,{appName:t.name})}function vc(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return rg.create(t,...e)}function He(t,e,...n){if(!t)throw vc(e,...n)}function Ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xl(e),new Error(e)}function Nl(t,e){t||Ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=new Map;function Yr(t){Nl(t instanceof Function,"Expected a class definition");let e=lg.get(t);return e?(Nl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lg.set(t,e),e)}function nx(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Yr);(e==null?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function rx(){return ag()==="http:"||ag()==="https:"}function ag(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rx()||ZR()||"connection"in navigator)?navigator.onLine:!0}function sx(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n){this.shortDelay=e,this.longDelay=n,Nl(n>e,"Short delay should be less than long delay!"),this.isMobile=uc()||q_()}get(){return ix()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t,e){Nl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new Ms(3e4,6e4);async function cg(t,e,n,i,o={}){return fg(t,o,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const c=fc(Object.assign({key:t.config.apiKey},u)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),ug.fetch()(hg(t,t.config.apiHost,n,c),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))})}async function fg(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},lx),e);try{const o=new ux(t),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw yc(t,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const c=l.ok?u.errorMessage:u.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw yc(t,"credential-already-in-use",u);if(h==="EMAIL_EXISTS")throw yc(t,"email-already-in-use",u);const _=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw tx(t,_,d);sg(t,_)}}catch(o){if(o instanceof As)throw o;sg(t,"network-request-failed")}}function hg(t,e,n,i){const o=`${e}${n}?${i}`;return t.config.emulator?ox(t.config,o):`${t.config.apiScheme}://${o}`}class ux{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(og(this.auth,"network-request-failed")),ax.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=og(t,e,i);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(t,e){return cg(t,"POST","/v1/accounts:delete",e)}async function fx(t,e){return cg(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hx(t,e=!1){const n=gr(t),i=await n.getIdToken(e),o=dg(i);He(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Ls(Cc(o.auth_time)),issuedAtTime:Ls(Cc(o.iat)),expirationTime:Ls(Cc(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Cc(t){return Number(t)*1e3}function dg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return xl("JWT malformed, contained fewer than 3 sections"),null;try{const o=ac(n);return o?JSON.parse(o):(xl("Failed to decode base64 JWT payload"),null)}catch(o){return xl("Caught error parsing JWT payload as JSON",o),null}}function dx(t){const e=dg(t);return He(e,"internal-error"),He(typeof e.exp!="undefined","internal-error"),He(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof As&&px(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function px({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ls(this.lastLoginAt),this.creationTime=Ls(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(t){var e;const n=t.auth,i=await t.getIdToken(),o=await Ec(t,fx(n,{idToken:i}));He(o==null?void 0:o.users.length,n,"internal-error");const l=o.users[0];t._notifyReloadListener(l);const u=((e=l.providerUserInfo)===null||e===void 0?void 0:e.length)?vx(l.providerUserInfo):[],c=mx(t.providerData,u),h=t.isAnonymous,d=!(t.email&&l.passwordHash)&&!(c==null?void 0:c.length),_=h?d:!1,g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new pg(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(t,g)}async function gx(t){const e=gr(t);await Ol(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mx(t,e){return[...t.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function vx(t){return t.map(e=>{var{providerId:n}=e,i=tg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(t,e){const n=await fg(t,{},async()=>{const i=fc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=t.config,u=hg(t,o,"/v1/token",`key=${l}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",ug.fetch()(u,{method:"POST",headers:c,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken!="undefined","internal-error"),He(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):dx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return He(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:l}=await yx(e,n);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:l}=n,u=new ks;return i&&(He(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(He(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(He(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ks,this.toJSON())}_performRefresh(){return Ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,e){He(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class ki{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,l=tg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new _x(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.metadata=new pg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Ec(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hx(this,e)}reload(){return gx(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ki(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ol(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ec(this,cx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,l,u,c,h,d,_;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(o=n.email)!==null&&o!==void 0?o:void 0,b=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,R=(u=n.photoURL)!==null&&u!==void 0?u:void 0,W=(c=n.tenantId)!==null&&c!==void 0?c:void 0,U=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,G=(d=n.createdAt)!==null&&d!==void 0?d:void 0,J=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ne,emailVerified:le,isAnonymous:we,providerData:Pe,stsTokenManager:ie}=n;He(ne&&ie,e,"internal-error");const Me=ks.fromJSON(this.name,ie);He(typeof ne=="string",e,"internal-error"),vr(g,e.name),vr(y,e.name),He(typeof le=="boolean",e,"internal-error"),He(typeof we=="boolean",e,"internal-error"),vr(b,e.name),vr(R,e.name),vr(W,e.name),vr(U,e.name),vr(G,e.name),vr(J,e.name);const Ie=new ki({uid:ne,auth:e,email:y,emailVerified:le,displayName:g,isAnonymous:we,photoURL:R,phoneNumber:b,tenantId:W,stsTokenManager:Me,createdAt:G,lastLoginAt:J});return Pe&&Array.isArray(Pe)&&(Ie.providerData=Pe.map($e=>Object.assign({},$e))),U&&(Ie._redirectEventId=U),Ie}static async _fromIdTokenResponse(e,n,i=!1){const o=new ks;o.updateFromServerResponse(n);const l=new ki({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Ol(l),l}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_g.type="NONE";const gg=_g;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t,e,n){return`firebase:${t}:${e}:${n}`}class Di{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=wc(this.userKey,o.apiKey,l),this.fullPersistenceKey=wc("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ki._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Di(Yr(gg),e,i);const o=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let l=o[0]||Yr(gg);const u=wc(i,e.config.apiKey,e.name);let c=null;for(const d of n)try{const _=await d._get(u);if(_){const g=ki._fromJSON(e,_);d!==l&&(c=g),l=d;break}}catch{}const h=o.filter(d=>d._shouldAllowMigration);return!l._shouldAllowMigration||!h.length?new Di(l,e,i):(l=h[0],c&&await l._set(u,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==l)try{await d._remove(u)}catch{}})),new Di(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ix(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tx(e))return"Blackberry";if(Sx(e))return"Webos";if(Ex(e))return"Safari";if((e.includes("chrome/")||wx(e))&&!e.includes("edge/"))return"Chrome";if(bx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Cx(t=Dn()){return/firefox\//i.test(t)}function Ex(t=Dn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wx(t=Dn()){return/crios\//i.test(t)}function Ix(t=Dn()){return/iemobile/i.test(t)}function bx(t=Dn()){return/android/i.test(t)}function Tx(t=Dn()){return/blackberry/i.test(t)}function Sx(t=Dn()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t,e=[]){let n;switch(t){case"Browser":n=mg(Dn());break;case"Worker":n=`${mg(Dn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mc}/${i}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n){this.app=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yg(this),this.idTokenSubscription=new yg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rg,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yr(n)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await Di.create(this,e),!this._deleted)){if((i=this._popupRedirectResolver)===null||i===void 0?void 0:i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var n;let i=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u==null?void 0:u.user)&&(i=u.user)}return i?i._redirectEventId?(He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)):this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ol(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?gr(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Yr(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yr(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=await Di.create(this,[Yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n),u=this._isInitialized?Promise.resolve():this._initializationPromise;return He(u,this,"internal-error"),u.then(()=>l(this.currentUser)),typeof n=="function"?e.addObserver(n,i,o):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={["X-Client-Version"]:this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function Ax(t){return gr(t)}class yg{constructor(e){this.auth=e,this.observer=null,this.addObserver=oA(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}new Ms(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ms(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ms(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ms(5e3,15e3);var Cg="@firebase/auth",Eg="0.19.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{var o;e(((o=i)===null||o===void 0?void 0:o.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Ox(t){Os(new Li("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),{apiKey:o,authDomain:l}=i.options;return(u=>{He(o&&!o.includes(":"),"invalid-api-key",{appName:u.name}),He(!(l==null?void 0:l.includes(":")),"argument-error",{appName:u.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vg(t)},h=new Rx(u,c);return nx(h,n),h})(i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Os(new Li("auth-internal",e=>{const n=Ax(e.getProvider("auth").getImmediate());return(i=>new xx(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(Cg,Eg,Nx(t)),mr(Cg,Eg,"esm2017")}Ox("Browser");const wg="@firebase/database",Ig="0.12.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bg="";function Px(t){bg=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),gt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ns(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Cn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=function(t){try{if(typeof window!="undefined"&&typeof window[t]!="undefined"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Mx(e)}}catch{}return new Lx},Qr=Tg("localStorage"),Ic=Tg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new dc("@firebase/database"),Sg=function(){let t=1;return function(){return t++}}(),Rg=function(t){const e=uA(t),n=new sA;n.update(e);const i=n.digest();return lc.encodeByteArray(i)},Ds=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Ds.apply(null,i):typeof i=="object"?e+=gt(i):e+=i,e+=" "}return e};let Xr=null,Ag=!0;const kx=function(t,e){$(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Fi.logLevel=Ye.VERBOSE,Xr=Fi.log.bind(Fi),e&&Ic.set("logging_enabled",!0)):typeof t=="function"?Xr=t:(Xr=null,Ic.remove("logging_enabled"))},At=function(...t){if(Ag===!0&&(Ag=!1,Xr===null&&Ic.get("logging_enabled")===!0&&kx(!0)),Xr){const e=Ds.apply(null,t);Xr(e)}},Fs=function(t){return function(...e){At(t,...e)}},bc=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ds(...t);Fi.error(e)},jr=function(...t){const e=`FIREBASE FATAL ERROR: ${Ds(...t)}`;throw Fi.error(e),new Error(e)},en=function(...t){const e="FIREBASE WARNING: "+Ds(...t);Fi.warn(e)},Dx=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&en("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Tc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Fx=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ui="[MIN_NAME]",Jr="[MAX_NAME]",Wi=function(t,e){if(t===e)return 0;if(t===Ui||e===Jr)return-1;if(e===Ui||t===Jr)return 1;{const n=Og(t),i=Og(e);return n!==null?i!==null?n-i==0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},Ux=function(t,e){return t===e?0:t<e?-1:1},Us=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+gt(e))},Sc=function(t){if(typeof t!="object"||t===null)return gt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=gt(e[i]),n+=":",n+=Sc(t[e[i]]);return n+="}",n},xg=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let o=0;o<n;o+=e)o+e>n?i.push(t.substring(o,n)):i.push(t.substring(o,o+e));return i};function zt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Ng=function(t){$(!Tc(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let o,l,u,c,h;t===0?(l=0,u=0,o=1/t==-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),i),l=c+i,u=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(l=0,u=Math.round(t/Math.pow(2,1-i-n))));const d=[];for(h=n;h;h-=1)d.push(u%2?1:0),u=Math.floor(u/2);for(h=e;h;h-=1)d.push(l%2?1:0),l=Math.floor(l/2);d.push(o?1:0),d.reverse();const _=d.join("");let g="";for(h=0;h<64;h+=8){let y=parseInt(_.substr(h,8),2).toString(16);y.length===1&&(y="0"+y),g=g+y}return g.toLowerCase()},Wx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Bx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Hx(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const $x=new RegExp("^-?(0*)\\d{1,10}$"),zx=-2147483648,Kx=2147483647,Og=function(t){if($x.test(t)){const e=Number(t);if(e>=zx&&e<=Kx)return e}return null},Ws=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw en("Exception was thrown by user callback.",n),e},Math.floor(0))}},Gx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Bs=function(t,e){const n=setTimeout(t,e);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){en(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(At("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',en(e)}}class Rc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Rc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac="5",Pg="v",Mg="s",Lg="r",kg="f",Dg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Fg="ls",Yx="p",xc="ac",Ug="websocket",Wg="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n,i,o,l=!1,u="",c=!1){this.secure=n,this.namespace=i,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Qr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Xx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Bg(t,e,n){$(typeof e=="string","typeof type must == string"),$(typeof n=="object","typeof params must == object");let i;if(e===Ug)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Wg)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Xx(t)&&(n.ns=t.namespace);const o=[];return zt(n,(l,u)=>{o.push(l+"="+u)}),i+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.counters_={}}incrementCounter(e,n=1){Cn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return jR(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc={},Oc={};function Pc(t){const e=t.toString();return Nc[e]||(Nc[e]=new jx),Nc[e]}function Jx(t,e){const n=t.toString();return Oc[n]||(Oc[n]=e()),Oc[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<i.length;++o)i[o]&&Ws(()=>{this.onMessage_(i[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="start",e1="close",t1="pLPCommand",n1="pRTLPCB",$g="id",zg="pw",Kg="ser",r1="cb",i1="seg",s1="ts",o1="d",l1="dframe",Gg=1870,Vg=30,a1=Gg-Vg,u1=25e3,c1=3e4;class Bi{constructor(e,n,i,o,l,u,c){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.transportSessionId=u,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fs(e),this.stats_=Pc(n),this.urlFn=h=>(this.appCheckToken&&(h[xc]=this.appCheckToken),Bg(n,Wg,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Zx(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(c1)),Fx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Mc((...l)=>{const[u,c,h,d,_]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===Hg)this.id=c,this.password=h;else if(u===e1)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,c]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,c)},()=>{this.onClosed_()},this.urlFn);const i={};i[Hg]="t",i[Kg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[r1]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Pg]=Ac,this.transportSessionId&&(i[Mg]=this.transportSessionId),this.lastSessionId&&(i[Fg]=this.lastSessionId),this.applicationId&&(i[Yx]=this.applicationId),this.appCheckToken&&(i[xc]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&Dg.test(location.hostname)&&(i[Lg]=kg);const o=this.urlFn(i);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bi.forceAllow_=!0}static forceDisallow(){Bi.forceDisallow_=!0}static isAvailable(){return Bi.forceAllow_?!0:!Bi.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!Wx()&&!Bx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=gt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=XR(n),o=xg(i,a1);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[l1]="t",i[$g]=e,i[zg]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=gt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Mc{constructor(e,n,i,o){this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Sg(),window[t1+this.uniqueCallbackIdentifier]=e,window[n1+this.uniqueCallbackIdentifier]=n,this.myIFrame=Mc.createIFrame_();let l="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,"javascript:".length)==="javascript:"){const c=document.domain;l='<script>document.domain="'+c+'";<\/script>'}const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(c){At("frame writing exception"),c.stack&&At(c.stack),At(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||At("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[$g]=this.myID,e[zg]=this.myPW,e[Kg]=this.currentSerial;let n=this.urlFn(e),i="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Vg+i.length<=Gg;){const u=this.pendingSegs.shift();i=i+"&"+i1+o+"="+u.seg+"&"+s1+o+"="+u.ts+"&"+o1+o+"="+u.d,o++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(i,Math.floor(u1)),l=()=>{clearTimeout(o),i()};this.addTag(e,l)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const o=i.readyState;(!o||o==="loaded"||o==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{At("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=16384,h1=45e3;let Pl=null;typeof MozWebSocket!="undefined"?Pl=MozWebSocket:typeof WebSocket!="undefined"&&(Pl=WebSocket);class En{constructor(e,n,i,o,l,u,c){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fs(this.connId),this.stats_=Pc(n),this.connURL=En.connectionURL_(n,u,c,o),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,o){const l={};return l[Pg]=Ac,typeof location!="undefined"&&location.hostname&&Dg.test(location.hostname)&&(l[Lg]=kg),n&&(l[Mg]=n),i&&(l[Fg]=i),o&&(l[xc]=o),Bg(e,Ug,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qr.set("previous_websocket_failure",!0);try{if(!Y_()){const i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Pl(this.connURL,[],i)}}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){En.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Pl!==null&&!En.forceDisallow_}static previouslyFailed(){return Qr.isInMemoryStorage||Qr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Qr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Ns(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if($(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=gt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=xg(n,f1);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(h1))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}En.responsesRequiredToBeHealthy=2;En.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Bi,En]}initTransports_(e){const n=En&&En.isAvailable();let i=n&&!En.previouslyFailed();if(e.webSocketOnly&&(n||en("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[En];else{const o=this.transports_=[];for(const l of Lc.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=6e4,p1=5e3,_1=10*1024,g1=100*1024,kc="t",qg="d",m1="s",Yg="r",v1="e",Qg="o",Xg="a",jg="n",Jg="p",y1="h";class C1{constructor(e,n,i,o,l,u,c,h,d,_){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=u,this.onReady_=c,this.onDisconnect_=h,this.onKill_=d,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fs("c:"+this.id+":"),this.transportManager_=new Lc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Bs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>g1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>_1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(kc in e){const n=e[kc];n===Xg?this.upgradeIfSecondaryHealthy_():n===Yg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Qg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Us("t",e),i=Us("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Jg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Xg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:jg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Us("t",e),i=Us("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Us(kc,e);if(qg in e){const i=e[qg];if(n===y1)this.onHandshake_(i);else if(n===jg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===m1?this.onConnectionShutdown_(i):n===Yg?this.onReset_(i):n===v1?bc("Server Error: "+i):n===Qg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ac!==i&&en("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Bs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(d1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(p1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Jg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{put(e,n,i,o){}merge(e,n,i,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let o=0;o<i.length;o++)i[o].callback.apply(i[o].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const o=this.getInitialEvent(e);o&&n.apply(i,o)}off(e,n,i){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===n&&(!i||i===o[l].context)){o.splice(l,1);return}}validateEventType_(e){$(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml extends em{constructor(){super(["online"]);this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!uc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ml}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm=32,nm=768;class Qe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[i]=this.pieces_[o],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function We(){return new Qe("")}function Ce(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function yr(t){return t.pieces_.length-t.pieceNum_}function Je(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Qe(t.pieces_,e)}function rm(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function E1(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function im(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function sm(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Qe(e,0)}function dt(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Qe)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let o=0;o<i.length;o++)i[o].length>0&&n.push(i[o])}return new Qe(n,0)}function Te(t){return t.pieceNum_>=t.pieces_.length}function Kt(t,e){const n=Ce(t),i=Ce(e);if(n===null)return e;if(n===i)return Kt(Je(t),Je(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Dc(t,e){if(yr(t)!==yr(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function wn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(yr(t)>yr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class w1{constructor(e,n){this.errorPrefix_=n,this.parts_=im(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Sl(this.parts_[i]);om(this)}}function I1(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Sl(e),om(t)}function b1(t){const e=t.parts_.pop();t.byteLength_-=Sl(e),t.parts_.length>0&&(t.byteLength_-=1)}function om(t){if(t.byteLength_>nm)throw new Error(t.errorPrefix_+"has a key path longer than "+nm+" bytes ("+t.byteLength_+").");if(t.parts_.length>tm)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tm+") or object contains a cycle "+Zr(t))}function Zr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends em{constructor(){super(["visible"]);let e,n;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(n="visibilitychange",e="hidden"):typeof document.mozHidden!="undefined"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden!="undefined"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden!="undefined"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Fc}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=1e3,T1=60*5*1e3,S1=3*1e3,lm=30*1e3,R1=1.3,A1=3e4,x1="server_kill",am=3;class Zn extends Zg{constructor(e,n,i,o,l,u,c,h){super();if(this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=c,this.authOverride_=h,this.id=Zn.nextPersistentConnectionId_++,this.log_=Fs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hs,this.maxReconnectDelay_=T1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!Y_())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Fc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ml.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const o=++this.requestNumber_,l={r:o,a:e,b:n};this.log_(gt(l)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const n=new bl,i={p:e._path.toString(),q:e._queryObject},o={action:"g",request:i,onComplete:u=>{const c=u.d;u.s==="ok"?(this.onDataUpdate_(i.p,c,!1,null),n.resolve(c)):n.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const u=this.outstandingGets_[l];u===void 0||o!==u||(delete this.outstandingGets_[l],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),n.reject(new Error("Client is offline.")))},S1),this.connected_&&this.sendGet_(l),n.promise}listen(e,n,i,o){this.initConnection_();const l=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const c={onComplete:o,hashFn:n,query:e,tag:i};this.listens.get(u).set(l,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i},u="q";e.tag&&(l.q=n._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(u,l,c=>{const h=c.d,d=c.s;Zn.warnOnListenWarnings_(h,n),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,o),e.onComplete&&e.onComplete(d,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Cn(e,"w")){const i=Vr(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',l=n._path.toString();en(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||iA(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=lm)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=rA(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,o=>{const l=o.s,u=o.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,n)}sendUnlisten_(e,n,i,o){this.log_("Unlisten on "+e+" for "+n);const l={p:e},u="n";o&&(l.q=i,l.t=o),this.sendRequest(u,l)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,o){const l={p:n,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,u=>{o&&setTimeout(()=>{o(u.s,u.d)},Math.floor(0))})}put(e,n,i,o){this.putInternal("p",e,n,i,o)}merge(e,n,i,o){this.putInternal("m",e,n,i,o)}putInternal(e,n,i,o,l){this.initConnection_();const u={p:n,d:i};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:e,request:u,onComplete:o}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,l=>{this.log_(n+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+gt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):bc("Unrecognized action received from server: "+gt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Hs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>A1&&(this.reconnectDelay_=Hs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*R1)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Zn.nextConnectionId_++,l=this.lastSessionId;let u=!1,c=null;const h=function(){c?c.close():(u=!0,i())},d=function(g){$(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:h,sendRequest:d};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,y]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);u?At("getToken() completed but was canceled"):(At("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=y&&y.token,c=new C1(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,b=>{en(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(x1)},l))}catch(g){this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&en(g),h())}}}interrupt(e){At("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){At("Resuming connection for reason: "+e),delete this.interruptReasons_[e],X_(this.interruptReasons_)&&(this.reconnectDelay_=Hs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(l=>Sc(l)).join("$"):i="default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const i=new Qe(e).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(n),l.delete(n),l.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,n){At("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=am&&(this.reconnectDelay_=lm,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){At("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=am&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+bg.replace(/\./g,"-")]=1,uc()?e["framework.cordova"]=1:q_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ml.getInstance().currentlyOnline();return X_(this.interruptReasons_)&&e}}Zn.nextPersistentConnectionId_=0;Zn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ee(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Ee(Ui,e),o=new Ee(Ui,n);return this.compare(i,o)!==0}minPost(){return Ee.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl;class um extends Ll{static get __EMPTY_NODE(){return kl}static set __EMPTY_NODE(e){kl=e}compare(e,n){return Wi(e.name,n.name)}isDefinedOn(e){throw Mi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ee.MIN}maxPost(){return new Ee(Jr,kl)}makePost(e,n){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new Ee(e,kl)}toString(){return".key"}}const Hi=new um;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,i,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=n?i(e.key,n):1,o&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class mt{constructor(e,n,i,o,l){this.key=e,this.value=n,this.color=i!=null?i:mt.RED,this.left=o!=null?o:Gt.EMPTY_NODE,this.right=l!=null?l:Gt.EMPTY_NODE}copy(e,n,i,o,l){return new mt(e!=null?e:this.key,n!=null?n:this.value,i!=null?i:this.color,o!=null?o:this.left,l!=null?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const l=i(e,o.key);return l<0?o=o.copy(null,null,null,o.left.insert(e,n,i),null):l===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,o;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Gt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}mt.RED=!0;mt.BLACK=!1;class N1{copy(e,n,i,o,l){return this}insert(e,n,i){return new mt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Gt{constructor(e,n=Gt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Gt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,mt.BLACK,null,null))}remove(e){return new Gt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,mt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,o=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return o?o.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(o=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Dl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Dl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Dl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Dl(this.root_,null,this.comparator_,!0,e)}}Gt.EMPTY_NODE=new N1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(t,e){return Wi(t.name,e.name)}function Uc(t,e){return Wi(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc;function P1(t){Wc=t}const cm=function(t){return typeof t=="number"?"number:"+Ng(t):"string:"+t},fm=function(t){if(t.isLeafNode()){const e=t.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Cn(e,".sv"),"Priority must be a string or number.")}else $(t===Wc||t.isEmpty(),"priority of unexpected type.");$(t===Wc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hm;class vt{constructor(e,n=vt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fm(this.priorityNode_)}static set __childrenNodeConstructor(e){hm=e}static get __childrenNodeConstructor(){return hm}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new vt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:vt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Te(e)?this:Ce(e)===".priority"?this.priorityNode_:vt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:vt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Ce(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:($(i!==".priority"||yr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,vt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Je(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+cm(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Ng(this.value_):e+=this.value_,this.lazyHash_=Rg(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===vt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof vt.__childrenNodeConstructor?-1:($(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,o=vt.VALUE_TYPE_ORDER.indexOf(n),l=vt.VALUE_TYPE_ORDER.indexOf(i);return $(o>=0,"Unknown leaf type: "+n),$(l>=0,"Unknown leaf type: "+i),o===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}vt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dm,pm;function M1(t){dm=t}function L1(t){pm=t}class k1 extends Ll{compare(e,n){const i=e.node.getPriority(),o=n.node.getPriority(),l=i.compareTo(o);return l===0?Wi(e.name,n.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ee.MIN}maxPost(){return new Ee(Jr,new vt("[PRIORITY-POST]",pm))}makePost(e,n){const i=dm(e);return new Ee(n,new vt("[PRIORITY-POST]",i))}toString(){return".priority"}}const it=new k1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=Math.log(2);class F1{constructor(e){const n=l=>parseInt(Math.log(l)/D1,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=i(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fl=function(t,e,n,i){t.sort(e);const o=function(h,d){const _=d-h;let g,y;if(_===0)return null;if(_===1)return g=t[h],y=n?n(g):g,new mt(y,g.node,mt.BLACK,null,null);{const b=parseInt(_/2,10)+h,R=o(h,b),W=o(b+1,d);return g=t[b],y=n?n(g):g,new mt(y,g.node,mt.BLACK,R,W)}},l=function(h){let d=null,_=null,g=t.length;const y=function(R,W){const U=g-R,G=g;g-=R;const J=o(U+1,G),ne=t[U],le=n?n(ne):ne;b(new mt(le,ne.node,W,null,J))},b=function(R){d?(d.left=R,d=R):(_=R,d=R)};for(let R=0;R<h.count;++R){const W=h.nextBitIsOne(),U=Math.pow(2,h.count-(R+1));W?y(U,mt.BLACK):(y(U,mt.BLACK),y(U,mt.RED))}return _},u=new F1(t.length),c=l(u);return new Gt(i||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc;const $i={};class er{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return $($i&&it,"ChildrenNode.ts has not been loaded"),Bc=Bc||new er({".priority":$i},{".priority":it}),Bc}get(e){const n=Vr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Gt?n:null}hasIndex(e){return Cn(this.indexSet_,e.toString())}addIndex(e,n){$(e!==Hi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let o=!1;const l=n.getIterator(Ee.Wrap);let u=l.getNext();for(;u;)o=o||e.isDefinedOn(u.node),i.push(u),u=l.getNext();let c;o?c=Fl(i,e.getCompare()):c=$i;const h=e.toString(),d=Object.assign({},this.indexSet_);d[h]=e;const _=Object.assign({},this.indexes_);return _[h]=c,new er(_,d)}addToIndexes(e,n){const i=Tl(this.indexes_,(o,l)=>{const u=Vr(this.indexSet_,l);if($(u,"Missing index implementation for "+l),o===$i)if(u.isDefinedOn(e.node)){const c=[],h=n.getIterator(Ee.Wrap);let d=h.getNext();for(;d;)d.name!==e.name&&c.push(d),d=h.getNext();return c.push(e),Fl(c,u.getCompare())}else return $i;else{const c=n.get(e.name);let h=o;return c&&(h=h.remove(new Ee(e.name,c))),h.insert(e,e.node)}});return new er(i,this.indexSet_)}removeFromIndexes(e,n){const i=Tl(this.indexes_,o=>{if(o===$i)return o;{const l=n.get(e.name);return l?o.remove(new Ee(e.name,l)):o}});return new er(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $s;class ae{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&fm(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $s||($s=new ae(new Gt(Uc),null,er.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$s}updatePriority(e){return this.children_.isEmpty()?this:new ae(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?$s:n}}getChild(e){const n=Ce(e);return n===null?this:this.getImmediateChild(n).getChild(Je(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if($(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Ee(e,n);let o,l;n.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,n),l=this.indexMap_.addToIndexes(i,this.children_));const u=o.isEmpty()?$s:this.priorityNode_;return new ae(o,u,l)}}updateChild(e,n){const i=Ce(e);if(i===null)return n;{$(Ce(e)!==".priority"||yr(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Je(e),n);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,o=0,l=!0;if(this.forEachChild(it,(u,c)=>{n[u]=c.val(e),i++,l&&ae.INTEGER_REGEXP_.test(u)?o=Math.max(o,Number(u)):l=!1}),!e&&l&&o<2*i){const u=[];for(const c in n)u[c]=n[c];return u}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+cm(this.getPriority().val())+":"),this.forEachChild(it,(n,i)=>{const o=i.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":Rg(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new Ee(e,n));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ee(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ee(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Ee.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Ee.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)>0;)o.getNext(),l=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===zs?-1:0}withIndex(e){if(e===Hi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ae(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Hi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(it),o=n.getIterator(it);let l=i.getNext(),u=o.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=i.getNext(),u=o.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===Hi?null:this.indexMap_.get(e.toString())}}ae.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class U1 extends ae{constructor(){super(new Gt(Uc),ae.EMPTY_NODE,er.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ae.EMPTY_NODE}isEmpty(){return!1}}const zs=new U1;Object.defineProperties(Ee,{MIN:{value:new Ee(Ui,ae.EMPTY_NODE)},MAX:{value:new Ee(Jr,zs)}});um.__EMPTY_NODE=ae.EMPTY_NODE;vt.__childrenNodeConstructor=ae;P1(zs);L1(zs);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=!0;function It(t,e=null){if(t===null)return ae.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new vt(n,It(e))}if(!(t instanceof Array)&&W1){const n=[];let i=!1;if(zt(t,(u,c)=>{if(u.substring(0,1)!=="."){const h=It(c);h.isEmpty()||(i=i||!h.getPriority().isEmpty(),n.push(new Ee(u,h)))}}),n.length===0)return ae.EMPTY_NODE;const l=Fl(n,O1,u=>u.name,Uc);if(i){const u=Fl(n,it.getCompare());return new ae(l,It(e),new er({".priority":u},{".priority":it}))}else return new ae(l,It(e),er.Default)}else{let n=ae.EMPTY_NODE;return zt(t,(i,o)=>{if(Cn(t,i)&&i.substring(0,1)!=="."){const l=It(o);(l.isLeafNode()||!l.isEmpty())&&(n=n.updateImmediateChild(i,l))}}),n.updatePriority(It(e))}}M1(It);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1 extends Ll{constructor(e){super();this.indexPath_=e,$(!Te(e)&&Ce(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),o=this.extractChild(n.node),l=i.compareTo(o);return l===0?Wi(e.name,n.name):l}makePost(e,n){const i=It(e),o=ae.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ee(n,o)}maxPost(){const e=ae.EMPTY_NODE.updateChild(this.indexPath_,zs);return new Ee(Jr,e)}toString(){return im(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1 extends Ll{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Wi(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ee.MIN}maxPost(){return Ee.MAX}makePost(e,n){const i=It(e);return new Ee(n,i)}toString(){return".value"}}const $1=new H1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t){return{type:"value",snapshotNode:t}}function zi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ks(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Gs(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function z1(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.index_=e}updateChild(e,n,i,o,l,u){$(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(o).equals(i.getChild(o))&&c.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?e.hasChild(n)?u.trackChildChange(Ks(n,c)):$(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?u.trackChildChange(zi(n,i)):u.trackChildChange(Gs(n,i,c))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(it,(o,l)=>{n.hasChild(o)||i.trackChildChange(Ks(o,l))}),n.isLeafNode()||n.forEachChild(it,(o,l)=>{if(e.hasChild(o)){const u=e.getImmediateChild(o);u.equals(l)||i.trackChildChange(Gs(o,l,u))}else i.trackChildChange(zi(o,l))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ae.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.indexedFilter_=new Hc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Vs.getStartPost_(e),this.endPost_=Vs.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,n,i,o,l,u){return this.matches(new Ee(n,i))||(i=ae.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,o,l,u)}updateFullNode(e,n,i){n.isLeafNode()&&(n=ae.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(ae.EMPTY_NODE);const l=this;return n.forEachChild(it,(u,c)=>{l.matches(new Ee(u,c))||(o=o.updateImmediateChild(u,ae.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.rangedFilter_=new Vs(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,n,i,o,l,u){return this.rangedFilter_.matches(new Ee(n,i))||(i=ae.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,o,l,u):this.fullLimitUpdateChild_(e,n,i,l,u)}updateFullNode(e,n,i){let o;if(n.isLeafNode()||n.isEmpty())o=ae.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=ae.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const c=l.getNext();let h;if(this.reverse_?h=this.index_.compare(this.rangedFilter_.getStartPost(),c)<=0:h=this.index_.compare(c,this.rangedFilter_.getEndPost())<=0,h)o=o.updateImmediateChild(c.name,c.node),u++;else break}}else{o=n.withIndex(this.index_),o=o.updatePriority(ae.EMPTY_NODE);let l,u,c,h;if(this.reverse_){h=o.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const g=this.index_.getCompare();c=(y,b)=>g(b,y)}else h=o.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();let d=0,_=!1;for(;h.hasNext();){const g=h.getNext();!_&&c(l,g)<=0&&(_=!0),_&&d<this.limit_&&c(g,u)<=0?d++:o=o.updateImmediateChild(g.name,ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,o,l){let u;if(this.reverse_){const g=this.index_.getCompare();u=(y,b)=>g(b,y)}else u=this.index_.getCompare();const c=e;$(c.numChildren()===this.limit_,"");const h=new Ee(n,i),d=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),_=this.rangedFilter_.matches(h);if(c.hasChild(n)){const g=c.getImmediateChild(n);let y=o.getChildAfterChild(this.index_,d,this.reverse_);for(;y!=null&&(y.name===n||c.hasChild(y.name));)y=o.getChildAfterChild(this.index_,y,this.reverse_);const b=y==null?1:u(y,h);if(_&&!i.isEmpty()&&b>=0)return l!=null&&l.trackChildChange(Gs(n,i,g)),c.updateImmediateChild(n,i);{l!=null&&l.trackChildChange(Ks(n,g));const W=c.updateImmediateChild(n,ae.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(l!=null&&l.trackChildChange(zi(y.name,y.node)),W.updateImmediateChild(y.name,y.node)):W}}else return i.isEmpty()?e:_&&u(d,h)>=0?(l!=null&&(l.trackChildChange(Ks(d.name,d.node)),l.trackChildChange(zi(n,i))),c.updateImmediateChild(n,i).updateImmediateChild(d.name,ae.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=it}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ui}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===it}copy(){const e=new $c;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function G1(t){return t.loadsAllData()?new Hc(t.getIndex()):t.hasLimit()?new K1(t):new Vs(t)}function gm(t){const e={};if(t.isDefault())return e;let n;return t.index_===it?n="$priority":t.index_===$1?n="$value":t.index_===Hi?n="$key":($(t.index_ instanceof B1,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=gt(n),t.startSet_&&(e.startAt=gt(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+gt(t.indexStartName_))),t.endSet_&&(e.endAt=gt(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+gt(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function mm(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==it&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends Zg{constructor(e,n,i,o){super();this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.log_=Fs("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=Ul.getListenId_(e,i),c={};this.listens_[u]=c;const h=gm(e._queryParams);this.restRequest_(l+".json",h,(d,_)=>{let g=_;if(d===404&&(g=null,d=null),d===null&&this.onDataUpdate_(l,g,!1,i),Vr(this.listens_,u)===c){let y;d?d===401?y="permission_denied":y="rest_error:"+d:y="ok",o(y,null)}})}unlisten(e,n){const i=Ul.getListenId_(e,n);delete this.listens_[i]}get(e){const n=gm(e._queryParams),i=e._path.toString(),o=new bl;return this.restRequest_(i+".json",n,(l,u)=>{let c=u;l===404&&(c=null,l=null),l===null?(this.onDataUpdate_(i,c,!1,null),o.resolve(c)):o.reject(new Error(c))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(n.auth=o.accessToken),l&&l.token&&(n.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+fc(n);this.log_("Sending REST request for "+u);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(i&&c.readyState===4){this.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);let h=null;if(c.status>=200&&c.status<300){try{h=Ns(c.responseText)}catch{en("Failed to parse JSON response for "+u+": "+c.responseText)}i(null,h)}else c.status!==401&&c.status!==404&&en("Got unsuccessful REST response for "+u+" Status: "+c.status),i(c.status);i=null}},c.open("GET",u,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this.rootNode_=ae.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(){return{value:null,children:new Map}}function vm(t,e,n){if(Te(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Ce(e);t.children.has(i)||t.children.set(i,Wl());const o=t.children.get(i);e=Je(e),vm(o,e,n)}}function zc(t,e,n){t.value!==null?n(e,t.value):q1(t,(i,o)=>{const l=new Qe(e.toString()+"/"+i);zc(o,l,n)})}function q1(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&zt(this.last_,(i,o)=>{n[i]=n[i]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=10*1e3,Q1=30*1e3,X1=5*60*1e3;class j1{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Y1(e);const i=ym+(Q1-ym)*Math.random();Bs(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;zt(e,(o,l)=>{l>0&&Cn(this.statsToReport_,o)&&(n[o]=l,i=!0)}),i&&this.server_.reportStats(n),Bs(this.reportStats_.bind(this),Math.floor(Math.random()*2*X1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var In;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(In||(In={}));function Cm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Kc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Gc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=In.ACK_USER_WRITE,this.source=Cm()}operationForChild(e){if(Te(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Qe(e));return new Bl(We(),n,this.revert)}}else return $(Ce(this.path)===e,"operationForChild called for unrelated child."),new Bl(Je(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){this.source=e,this.path=n,this.type=In.LISTEN_COMPLETE}operationForChild(e){return Te(this.path)?new qs(this.source,We()):new qs(this.source,Je(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=In.OVERWRITE}operationForChild(e){return Te(this.path)?new ei(this.source,We(),this.snap.getImmediateChild(e)):new ei(this.source,Je(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=In.MERGE}operationForChild(e){if(Te(this.path)){const n=this.children.subtree(new Qe(e));return n.isEmpty()?null:n.value?new ei(this.source,We(),n.value):new Ys(this.source,We(),n)}else return $(Ce(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ys(this.source,Je(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Te(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ce(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Z1(t,e,n,i){const o=[],l=[];return e.forEach(u=>{u.type==="child_changed"&&t.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(z1(u.childName,u.snapshotNode))}),Qs(t,o,"child_removed",e,i,n),Qs(t,o,"child_added",e,i,n),Qs(t,o,"child_moved",l,i,n),Qs(t,o,"child_changed",e,i,n),Qs(t,o,"value",e,i,n),o}function Qs(t,e,n,i,o,l){const u=i.filter(c=>c.type===n);u.sort((c,h)=>tN(t,c,h)),u.forEach(c=>{const h=eN(t,c,l);o.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(h,t.query_))})})}function eN(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function tN(t,e,n){if(e.childName==null||n.childName==null)throw Mi("Should only compare child_ events.");const i=new Ee(e.childName,e.snapshotNode),o=new Ee(n.childName,n.snapshotNode);return t.index_.compare(i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t,e){return{eventCache:t,serverCache:e}}function Xs(t,e,n,i){return Hl(new ti(e,n,i),t.serverCache)}function Em(t,e,n,i){return Hl(t.eventCache,new ti(e,n,i))}function Vc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ni(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc;const nN=()=>(qc||(qc=new Gt(Ux)),qc);class tt{constructor(e,n=nN()){this.value=e,this.children=n}static fromObject(e){let n=new tt(null);return zt(e,(i,o)=>{n=n.set(new Qe(i),o)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:We(),value:this.value};if(Te(e))return null;{const i=Ce(e),o=this.children.get(i);if(o!==null){const l=o.findRootMostMatchingPathAndValue(Je(e),n);return l!=null?{path:dt(new Qe(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Te(e))return this;{const n=Ce(e),i=this.children.get(n);return i!==null?i.subtree(Je(e)):new tt(null)}}set(e,n){if(Te(e))return new tt(n,this.children);{const i=Ce(e),l=(this.children.get(i)||new tt(null)).set(Je(e),n),u=this.children.insert(i,l);return new tt(this.value,u)}}remove(e){if(Te(e))return this.children.isEmpty()?new tt(null):new tt(null,this.children);{const n=Ce(e),i=this.children.get(n);if(i){const o=i.remove(Je(e));let l;return o.isEmpty()?l=this.children.remove(n):l=this.children.insert(n,o),this.value===null&&l.isEmpty()?new tt(null):new tt(this.value,l)}else return this}}get(e){if(Te(e))return this.value;{const n=Ce(e),i=this.children.get(n);return i?i.get(Je(e)):null}}setTree(e,n){if(Te(e))return n;{const i=Ce(e),l=(this.children.get(i)||new tt(null)).setTree(Je(e),n);let u;return l.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,l),new tt(this.value,u)}}fold(e){return this.fold_(We(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((o,l)=>{i[o]=l.fold_(dt(e,o),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,We(),n)}findOnPath_(e,n,i){const o=this.value?i(n,this.value):!1;if(o)return o;if(Te(e))return null;{const l=Ce(e),u=this.children.get(l);return u?u.findOnPath_(Je(e),dt(n,l),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,We(),n)}foreachOnPath_(e,n,i){if(Te(e))return this;{this.value&&i(n,this.value);const o=Ce(e),l=this.children.get(o);return l?l.foreachOnPath_(Je(e),dt(n,o),i):new tt(null)}}foreach(e){this.foreach_(We(),e)}foreach_(e,n){this.children.inorderTraversal((i,o)=>{o.foreach_(dt(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.writeTree_=e}static empty(){return new bn(new tt(null))}}function js(t,e,n){if(Te(e))return new bn(new tt(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const o=i.path;let l=i.value;const u=Kt(o,e);return l=l.updateChild(u,n),new bn(t.writeTree_.set(o,l))}else{const o=new tt(n),l=t.writeTree_.setTree(e,o);return new bn(l)}}}function wm(t,e,n){let i=t;return zt(n,(o,l)=>{i=js(i,dt(e,o),l)}),i}function Im(t,e){if(Te(e))return bn.empty();{const n=t.writeTree_.setTree(e,new tt(null));return new bn(n)}}function Yc(t,e){return ri(t,e)!=null}function ri(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Kt(n.path,e)):null}function bm(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(it,(i,o)=>{e.push(new Ee(i,o))}):t.writeTree_.children.inorderTraversal((i,o)=>{o.value!=null&&e.push(new Ee(i,o.value))}),e}function Cr(t,e){if(Te(e))return t;{const n=ri(t,e);return n!=null?new bn(new tt(n)):new bn(t.writeTree_.subtree(e))}}function Qc(t){return t.writeTree_.isEmpty()}function Ki(t,e){return Tm(We(),t.writeTree_,e)}function Tm(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((o,l)=>{o===".priority"?($(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):n=Tm(dt(t,o),l,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(dt(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(t,e){return Nm(e,t)}function rN(t,e,n,i,o){$(i>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:o}),o&&(t.visibleWrites=js(t.visibleWrites,e,n)),t.lastWriteId=i}function iN(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function sN(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);$(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let o=i.visible,l=!1,u=t.allWrites.length-1;for(;o&&u>=0;){const c=t.allWrites[u];c.visible&&(u>=n&&oN(c,i.path)?o=!1:wn(i.path,c.path)&&(l=!0)),u--}if(o){if(l)return lN(t),!0;if(i.snap)t.visibleWrites=Im(t.visibleWrites,i.path);else{const c=i.children;zt(c,h=>{t.visibleWrites=Im(t.visibleWrites,dt(i.path,h))})}return!0}else return!1}function oN(t,e){if(t.snap)return wn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&wn(dt(t.path,n),e))return!0;return!1}function lN(t){t.visibleWrites=Sm(t.allWrites,aN,We()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function aN(t){return t.visible}function Sm(t,e,n){let i=bn.empty();for(let o=0;o<t.length;++o){const l=t[o];if(e(l)){const u=l.path;let c;if(l.snap)wn(n,u)?(c=Kt(n,u),i=js(i,c,l.snap)):wn(u,n)&&(c=Kt(u,n),i=js(i,We(),l.snap.getChild(c)));else if(l.children){if(wn(n,u))c=Kt(n,u),i=wm(i,c,l.children);else if(wn(u,n))if(c=Kt(u,n),Te(c))i=wm(i,We(),l.children);else{const h=Vr(l.children,Ce(c));if(h){const d=h.getChild(Je(c));i=js(i,We(),d)}}}else throw Mi("WriteRecord should have .snap or .children")}}return i}function Rm(t,e,n,i,o){if(!i&&!o){const l=ri(t.visibleWrites,e);if(l!=null)return l;{const u=Cr(t.visibleWrites,e);if(Qc(u))return n;if(n==null&&!Yc(u,We()))return null;{const c=n||ae.EMPTY_NODE;return Ki(u,c)}}}else{const l=Cr(t.visibleWrites,e);if(!o&&Qc(l))return n;if(!o&&n==null&&!Yc(l,We()))return null;{const u=function(d){return(d.visible||o)&&(!i||!~i.indexOf(d.writeId))&&(wn(d.path,e)||wn(e,d.path))},c=Sm(t.allWrites,u,e),h=n||ae.EMPTY_NODE;return Ki(c,h)}}}function uN(t,e,n){let i=ae.EMPTY_NODE;const o=ri(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(it,(l,u)=>{i=i.updateImmediateChild(l,u)}),i;if(n){const l=Cr(t.visibleWrites,e);return n.forEachChild(it,(u,c)=>{const h=Ki(Cr(l,new Qe(u)),c);i=i.updateImmediateChild(u,h)}),bm(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const l=Cr(t.visibleWrites,e);return bm(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function cN(t,e,n,i,o){$(i||o,"Either existingEventSnap or existingServerSnap must exist");const l=dt(e,n);if(Yc(t.visibleWrites,l))return null;{const u=Cr(t.visibleWrites,l);return Qc(u)?o.getChild(n):Ki(u,o.getChild(n))}}function fN(t,e,n,i){const o=dt(e,n),l=ri(t.visibleWrites,o);if(l!=null)return l;if(i.isCompleteForChild(n)){const u=Cr(t.visibleWrites,o);return Ki(u,i.getNode().getImmediateChild(n))}else return null}function hN(t,e){return ri(t.visibleWrites,e)}function dN(t,e,n,i,o,l,u){let c;const h=Cr(t.visibleWrites,e),d=ri(h,We());if(d!=null)c=d;else if(n!=null)c=Ki(h,n);else return[];if(c=c.withIndex(u),!c.isEmpty()&&!c.isLeafNode()){const _=[],g=u.getCompare(),y=l?c.getReverseIteratorFrom(i,u):c.getIteratorFrom(i,u);let b=y.getNext();for(;b&&_.length<o;)g(b,i)!==0&&_.push(b),b=y.getNext();return _}else return[]}function pN(){return{visibleWrites:bn.empty(),allWrites:[],lastWriteId:-1}}function $l(t,e,n,i){return Rm(t.writeTree,t.treePath,e,n,i)}function jc(t,e){return uN(t.writeTree,t.treePath,e)}function Am(t,e,n,i){return cN(t.writeTree,t.treePath,e,n,i)}function zl(t,e){return hN(t.writeTree,dt(t.treePath,e))}function _N(t,e,n,i,o,l){return dN(t.writeTree,t.treePath,e,n,i,o,l)}function Jc(t,e,n){return fN(t.writeTree,t.treePath,e,n)}function xm(t,e){return Nm(dt(t.treePath,e),t.writeTree)}function Nm(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;$(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),$(i!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const l=o.type;if(n==="child_added"&&l==="child_removed")this.changeMap.set(i,Gs(i,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&l==="child_changed")this.changeMap.set(i,Ks(i,o.oldSnap));else if(n==="child_changed"&&l==="child_added")this.changeMap.set(i,zi(i,e.snapshotNode));else if(n==="child_changed"&&l==="child_changed")this.changeMap.set(i,Gs(i,e.snapshotNode,o.oldSnap));else throw Mi("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const Om=new mN;class Zc{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new ti(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Jc(this.writes_,e,i)}}getChildAfterChild(e,n,i){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ni(this.viewCache_),l=_N(this.writes_,o,n,1,i,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){return{filter:t}}function yN(t,e){$(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function CN(t,e,n,i,o){const l=new gN;let u,c;if(n.type===In.OVERWRITE){const d=n;d.source.fromUser?u=ef(t,e,d.path,d.snap,i,o,l):($(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!Te(d.path),u=Kl(t,e,d.path,d.snap,i,o,c,l))}else if(n.type===In.MERGE){const d=n;d.source.fromUser?u=wN(t,e,d.path,d.children,i,o,l):($(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),u=tf(t,e,d.path,d.children,i,o,c,l))}else if(n.type===In.ACK_USER_WRITE){const d=n;d.revert?u=TN(t,e,d.path,i,o,l):u=IN(t,e,d.path,d.affectedTree,i,o,l)}else if(n.type===In.LISTEN_COMPLETE)u=bN(t,e,n.path,i,l);else throw Mi("Unknown operation type: "+n.type);const h=l.getChanges();return EN(e,u,h),{viewCache:u,changes:h}}function EN(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const o=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=Vc(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&n.push(_m(Vc(e)))}}function Pm(t,e,n,i,o,l){const u=e.eventCache;if(zl(i,n)!=null)return e;{let c,h;if(Te(n))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=ni(e),_=d instanceof ae?d:ae.EMPTY_NODE,g=jc(i,_);c=t.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const d=$l(i,ni(e));c=t.filter.updateFullNode(e.eventCache.getNode(),d,l)}else{const d=Ce(n);if(d===".priority"){$(yr(n)===1,"Can't have a priority with additional path components");const _=u.getNode();h=e.serverCache.getNode();const g=Am(i,n,_,h);g!=null?c=t.filter.updatePriority(_,g):c=u.getNode()}else{const _=Je(n);let g;if(u.isCompleteForChild(d)){h=e.serverCache.getNode();const y=Am(i,n,u.getNode(),h);y!=null?g=u.getNode().getImmediateChild(d).updateChild(_,y):g=u.getNode().getImmediateChild(d)}else g=Jc(i,d,e.serverCache);g!=null?c=t.filter.updateChild(u.getNode(),d,g,_,o,l):c=u.getNode()}}return Xs(e,c,u.isFullyInitialized()||Te(n),t.filter.filtersNodes())}}function Kl(t,e,n,i,o,l,u,c){const h=e.serverCache;let d;const _=u?t.filter:t.filter.getIndexedFilter();if(Te(n))d=_.updateFullNode(h.getNode(),i,null);else if(_.filtersNodes()&&!h.isFiltered()){const b=h.getNode().updateChild(n,i);d=_.updateFullNode(h.getNode(),b,null)}else{const b=Ce(n);if(!h.isCompleteForPath(n)&&yr(n)>1)return e;const R=Je(n),U=h.getNode().getImmediateChild(b).updateChild(R,i);b===".priority"?d=_.updatePriority(h.getNode(),U):d=_.updateChild(h.getNode(),b,U,R,Om,null)}const g=Em(e,d,h.isFullyInitialized()||Te(n),_.filtersNodes()),y=new Zc(o,g,l);return Pm(t,g,n,o,y,c)}function ef(t,e,n,i,o,l,u){const c=e.eventCache;let h,d;const _=new Zc(o,e,l);if(Te(n))d=t.filter.updateFullNode(e.eventCache.getNode(),i,u),h=Xs(e,d,!0,t.filter.filtersNodes());else{const g=Ce(n);if(g===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),i),h=Xs(e,d,c.isFullyInitialized(),c.isFiltered());else{const y=Je(n),b=c.getNode().getImmediateChild(g);let R;if(Te(y))R=i;else{const W=_.getCompleteChild(g);W!=null?rm(y)===".priority"&&W.getChild(sm(y)).isEmpty()?R=W:R=W.updateChild(y,i):R=ae.EMPTY_NODE}if(b.equals(R))h=e;else{const W=t.filter.updateChild(c.getNode(),g,R,y,_,u);h=Xs(e,W,c.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function Mm(t,e){return t.eventCache.isCompleteForChild(e)}function wN(t,e,n,i,o,l,u){let c=e;return i.foreach((h,d)=>{const _=dt(n,h);Mm(e,Ce(_))&&(c=ef(t,c,_,d,o,l,u))}),i.foreach((h,d)=>{const _=dt(n,h);Mm(e,Ce(_))||(c=ef(t,c,_,d,o,l,u))}),c}function Lm(t,e,n){return n.foreach((i,o)=>{e=e.updateChild(i,o)}),e}function tf(t,e,n,i,o,l,u,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,d;Te(n)?d=i:d=new tt(null).setTree(n,i);const _=e.serverCache.getNode();return d.children.inorderTraversal((g,y)=>{if(_.hasChild(g)){const b=e.serverCache.getNode().getImmediateChild(g),R=Lm(t,b,y);h=Kl(t,h,new Qe(g),R,o,l,u,c)}}),d.children.inorderTraversal((g,y)=>{const b=!e.serverCache.isCompleteForChild(g)&&y.value===void 0;if(!_.hasChild(g)&&!b){const R=e.serverCache.getNode().getImmediateChild(g),W=Lm(t,R,y);h=Kl(t,h,new Qe(g),W,o,l,u,c)}}),h}function IN(t,e,n,i,o,l,u){if(zl(o,n)!=null)return e;const c=e.serverCache.isFiltered(),h=e.serverCache;if(i.value!=null){if(Te(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return Kl(t,e,n,h.getNode().getChild(n),o,l,c,u);if(Te(n)){let d=new tt(null);return h.getNode().forEachChild(Hi,(_,g)=>{d=d.set(new Qe(_),g)}),tf(t,e,n,d,o,l,c,u)}else return e}else{let d=new tt(null);return i.foreach((_,g)=>{const y=dt(n,_);h.isCompleteForPath(y)&&(d=d.set(_,h.getNode().getChild(y)))}),tf(t,e,n,d,o,l,c,u)}}function bN(t,e,n,i,o){const l=e.serverCache,u=Em(e,l.getNode(),l.isFullyInitialized()||Te(n),l.isFiltered());return Pm(t,u,n,i,Om,o)}function TN(t,e,n,i,o,l){let u;if(zl(i,n)!=null)return e;{const c=new Zc(i,e,o),h=e.eventCache.getNode();let d;if(Te(n)||Ce(n)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=$l(i,ni(e));else{const g=e.serverCache.getNode();$(g instanceof ae,"serverChildren would be complete if leaf node"),_=jc(i,g)}_=_,d=t.filter.updateFullNode(h,_,l)}else{const _=Ce(n);let g=Jc(i,_,e.serverCache);g==null&&e.serverCache.isCompleteForChild(_)&&(g=h.getImmediateChild(_)),g!=null?d=t.filter.updateChild(h,_,g,Je(n),c,l):e.eventCache.getNode().hasChild(_)?d=t.filter.updateChild(h,_,ae.EMPTY_NODE,Je(n),c,l):d=h,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=$l(i,ni(e)),u.isLeafNode()&&(d=t.filter.updateFullNode(d,u,l)))}return u=e.serverCache.isFullyInitialized()||zl(i,We())!=null,Xs(e,d,u,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,o=new Hc(i.getIndex()),l=G1(i);this.processor_=vN(l);const u=n.serverCache,c=n.eventCache,h=o.updateFullNode(ae.EMPTY_NODE,u.getNode(),null),d=l.updateFullNode(ae.EMPTY_NODE,c.getNode(),null),_=new ti(h,u.isFullyInitialized(),o.filtersNodes()),g=new ti(d,c.isFullyInitialized(),l.filtersNodes());this.viewCache_=Hl(g,_),this.eventGenerator_=new J1(this.query_)}get query(){return this.query_}}function RN(t){return t.viewCache_.serverCache.getNode()}function AN(t,e){const n=ni(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Te(e)&&!n.getImmediateChild(Ce(e)).isEmpty())?n.getChild(e):null}function km(t){return t.eventRegistrations_.length===0}function xN(t,e){t.eventRegistrations_.push(e)}function Dm(t,e,n){const i=[];if(n){$(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(n,o);u&&i.push(u)})}if(e){let o=[];for(let l=0;l<t.eventRegistrations_.length;++l){const u=t.eventRegistrations_[l];if(!u.matches(e))o.push(u);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(l+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return i}function Fm(t,e,n,i){e.type===In.MERGE&&e.source.queryId!==null&&($(ni(t.viewCache_),"We should always have a full cache before handling merges"),$(Vc(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,l=CN(t.processor_,o,e,n,i);return yN(t.processor_,l.viewCache),$(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=l.viewCache,Um(t,l.changes,l.viewCache.eventCache.getNode(),null)}function NN(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(it,(l,u)=>{i.push(zi(l,u))}),n.isFullyInitialized()&&i.push(_m(n.getNode())),Um(t,i,n.getNode(),e)}function Um(t,e,n,i){const o=i?[i]:t.eventRegistrations_;return Z1(t.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl;class ON{constructor(){this.views=new Map}}function PN(t){$(!Gl,"__referenceConstructor has already been defined"),Gl=t}function MN(){return $(Gl,"Reference.ts has not been loaded"),Gl}function LN(t){return t.views.size===0}function nf(t,e,n,i){const o=e.source.queryId;if(o!==null){const l=t.views.get(o);return $(l!=null,"SyncTree gave us an op for an invalid query."),Fm(l,e,n,i)}else{let l=[];for(const u of t.views.values())l=l.concat(Fm(u,e,n,i));return l}}function kN(t,e,n,i,o){const l=e._queryIdentifier,u=t.views.get(l);if(!u){let c=$l(n,o?i:null),h=!1;c?h=!0:i instanceof ae?(c=jc(n,i),h=!1):(c=ae.EMPTY_NODE,h=!1);const d=Hl(new ti(c,h,!1),new ti(i,o,!1));return new SN(e,d)}return u}function DN(t,e,n,i,o,l){const u=kN(t,e,i,o,l);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,u),xN(u,n),NN(u,n)}function FN(t,e,n,i){const o=e._queryIdentifier,l=[];let u=[];const c=Er(t);if(o==="default")for(const[h,d]of t.views.entries())u=u.concat(Dm(d,n,i)),km(d)&&(t.views.delete(h),d.query._queryParams.loadsAllData()||l.push(d.query));else{const h=t.views.get(o);h&&(u=u.concat(Dm(h,n,i)),km(h)&&(t.views.delete(o),h.query._queryParams.loadsAllData()||l.push(h.query)))}return c&&!Er(t)&&l.push(new(MN())(e._repo,e._path)),{removed:l,events:u}}function Wm(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Gi(t,e){let n=null;for(const i of t.views.values())n=n||AN(i,e);return n}function Bm(t,e){if(e._queryParams.loadsAllData())return Vl(t);{const i=e._queryIdentifier;return t.views.get(i)}}function Hm(t,e){return Bm(t,e)!=null}function Er(t){return Vl(t)!=null}function Vl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql;function UN(t){$(!ql,"__referenceConstructor has already been defined"),ql=t}function WN(){return $(ql,"Reference.ts has not been loaded"),ql}let BN=1;class $m{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tt(null),this.pendingWriteTree_=pN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zm(t,e,n,i,o){return rN(t.pendingWriteTree_,e,n,i,o),o?Js(t,new ei(Cm(),e,n)):[]}function Vi(t,e,n=!1){const i=iN(t.pendingWriteTree_,e);if(sN(t.pendingWriteTree_,e)){let l=new tt(null);return i.snap!=null?l=l.set(We(),!0):zt(i.children,u=>{l=l.set(new Qe(u),!0)}),Js(t,new Bl(i.path,l,n))}else return[]}function Yl(t,e,n){return Js(t,new ei(Kc(),e,n))}function HN(t,e,n){const i=tt.fromObject(n);return Js(t,new Ys(Kc(),e,i))}function $N(t,e){return Js(t,new qs(Kc(),e))}function zN(t,e,n){const i=of(t,n);if(i){const o=lf(i),l=o.path,u=o.queryId,c=Kt(l,e),h=new qs(Gc(u),c);return af(t,l,h)}else return[]}function rf(t,e,n,i){const o=e._path,l=t.syncPointTree_.get(o);let u=[];if(l&&(e._queryIdentifier==="default"||Hm(l,e))){const c=FN(l,e,n,i);LN(l)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const h=c.removed;u=c.events;const d=h.findIndex(g=>g._queryParams.loadsAllData())!==-1,_=t.syncPointTree_.findOnPath(o,(g,y)=>Er(y));if(d&&!_){const g=t.syncPointTree_.subtree(o);if(!g.isEmpty()){const y=VN(g);for(let b=0;b<y.length;++b){const R=y[b],W=R.query,U=qm(t,R);t.listenProvider_.startListening(Zs(W),Ql(t,W),U.hashFn,U.onComplete)}}}if(!_&&h.length>0&&!i)if(d){const g=null;t.listenProvider_.stopListening(Zs(e),g)}else h.forEach(g=>{const y=t.queryToTagMap.get(Xl(g));t.listenProvider_.stopListening(Zs(g),y)});qN(t,h)}return u}function KN(t,e,n,i){const o=of(t,i);if(o!=null){const l=lf(o),u=l.path,c=l.queryId,h=Kt(u,e),d=new ei(Gc(c),h,n);return af(t,u,d)}else return[]}function GN(t,e,n,i){const o=of(t,i);if(o){const l=lf(o),u=l.path,c=l.queryId,h=Kt(u,e),d=tt.fromObject(n),_=new Ys(Gc(c),h,d);return af(t,u,_)}else return[]}function Km(t,e,n){const i=e._path;let o=null,l=!1;t.syncPointTree_.foreachOnPath(i,(g,y)=>{const b=Kt(g,i);o=o||Gi(y,b),l=l||Er(y)});let u=t.syncPointTree_.get(i);u?(l=l||Er(u),o=o||Gi(u,We())):(u=new ON,t.syncPointTree_=t.syncPointTree_.set(i,u));let c;o!=null?c=!0:(c=!1,o=ae.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,b)=>{const R=Gi(b,We());R&&(o=o.updateImmediateChild(y,R))}));const h=Hm(u,e);if(!h&&!e._queryParams.loadsAllData()){const g=Xl(e);$(!t.queryToTagMap.has(g),"View does not exist, but we have a tag");const y=YN();t.queryToTagMap.set(g,y),t.tagToQueryMap.set(y,g)}const d=Xc(t.pendingWriteTree_,i);let _=DN(u,e,n,d,o,c);if(!h&&!l){const g=Bm(u,e);_=_.concat(QN(t,e,g))}return _}function sf(t,e,n){const i=!0,o=t.pendingWriteTree_,l=t.syncPointTree_.findOnPath(e,(u,c)=>{const h=Kt(u,e),d=Gi(c,h);if(d)return d});return Rm(o,e,l,n,i)}function Js(t,e){return Gm(e,t.syncPointTree_,null,Xc(t.pendingWriteTree_,We()))}function Gm(t,e,n,i){if(Te(t.path))return Vm(t,e,n,i);{const o=e.get(We());n==null&&o!=null&&(n=Gi(o,We()));let l=[];const u=Ce(t.path),c=t.operationForChild(u),h=e.children.get(u);if(h&&c){const d=n?n.getImmediateChild(u):null,_=xm(i,u);l=l.concat(Gm(c,h,d,_))}return o&&(l=l.concat(nf(o,t,i,n))),l}}function Vm(t,e,n,i){const o=e.get(We());n==null&&o!=null&&(n=Gi(o,We()));let l=[];return e.children.inorderTraversal((u,c)=>{const h=n?n.getImmediateChild(u):null,d=xm(i,u),_=t.operationForChild(u);_&&(l=l.concat(Vm(_,c,h,d)))}),o&&(l=l.concat(nf(o,t,i,n))),l}function qm(t,e){const n=e.query,i=Ql(t,n);return{hashFn:()=>(RN(e)||ae.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return i?zN(t,n._path,i):$N(t,n._path);{const l=Hx(o,n);return rf(t,n,null,l)}}}}function Ql(t,e){const n=Xl(e);return t.queryToTagMap.get(n)}function Xl(t){return t._path.toString()+"$"+t._queryIdentifier}function of(t,e){return t.tagToQueryMap.get(e)}function lf(t){const e=t.indexOf("$");return $(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Qe(t.substr(0,e))}}function af(t,e,n){const i=t.syncPointTree_.get(e);$(i,"Missing sync point for query tag that we're tracking");const o=Xc(t.pendingWriteTree_,e);return nf(i,n,o,null)}function VN(t){return t.fold((e,n,i)=>{if(n&&Er(n))return[Vl(n)];{let o=[];return n&&(o=Wm(n)),zt(i,(l,u)=>{o=o.concat(u)}),o}})}function Zs(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(WN())(t._repo,t._path):t}function qN(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const o=Xl(i),l=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(l)}}}function YN(){return BN++}function QN(t,e,n){const i=e._path,o=Ql(t,e),l=qm(t,n),u=t.listenProvider_.startListening(Zs(e),o,l.hashFn,l.onComplete),c=t.syncPointTree_.subtree(i);if(o)$(!Er(c.value),"If we're adding a query, it shouldn't be shadowed");else{const h=c.fold((d,_,g)=>{if(!Te(d)&&_&&Er(_))return[Vl(_).query];{let y=[];return _&&(y=y.concat(Wm(_).map(b=>b.query))),zt(g,(b,R)=>{y=y.concat(R)}),y}});for(let d=0;d<h.length;++d){const _=h[d];t.listenProvider_.stopListening(Zs(_),Ql(t,_))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new uf(n)}node(){return this.node_}}class cf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=dt(this.path_,e);return new cf(this.syncTree_,n)}node(){return sf(this.syncTree_,this.path_)}}const XN=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Ym=function(t,e,n){if(!t||typeof t!="object")return t;if($(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return jN(t[".sv"],e,n);if(typeof t[".sv"]=="object")return JN(t[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},jN=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:$(!1,"Unexpected server value: "+t)}},JN=function(t,e,n){t.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&$(!1,"Unexpected increment value: "+i);const o=e.node();if($(o!==null&&typeof o!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const u=o.getValue();return typeof u!="number"?i:u+i},ZN=function(t,e,n,i){return ff(e,new cf(n,t),i)},Qm=function(t,e,n){return ff(t,new uf(e),n)};function ff(t,e,n){const i=t.getPriority().val(),o=Ym(i,e.getImmediateChild(".priority"),n);let l;if(t.isLeafNode()){const u=t,c=Ym(u.getValue(),e,n);return c!==u.getValue()||o!==u.getPriority().val()?new vt(c,It(o)):t}else{const u=t;return l=u,o!==u.getPriority().val()&&(l=l.updatePriority(new vt(o))),u.forEachChild(it,(c,h)=>{const d=ff(h,e.getImmediateChild(c),n);d!==h&&(l=l.updateImmediateChild(c,d))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function jl(t,e){let n=e instanceof Qe?e:new Qe(e),i=t,o=Ce(n);for(;o!==null;){const l=Vr(i.node.children,o)||{children:{},childCount:0};i=new hf(o,i,l),n=Je(n),o=Ce(n)}return i}function ii(t){return t.node.value}function df(t,e){t.node.value=e,pf(t)}function Xm(t){return t.node.childCount>0}function eO(t){return ii(t)===void 0&&!Xm(t)}function Jl(t,e){zt(t.node.children,(n,i)=>{e(new hf(n,t,i))})}function jm(t,e,n,i){n&&!i&&e(t),Jl(t,o=>{jm(o,e,!0,i)}),n&&i&&e(t)}function tO(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function eo(t){return new Qe(t.parent===null?t.name:eo(t.parent)+"/"+t.name)}function pf(t){t.parent!==null&&nO(t.parent,t.name,t)}function nO(t,e,n){const i=eO(n),o=Cn(t.node.children,e);i&&o?(delete t.node.children[e],t.node.childCount--,pf(t)):!i&&!o&&(t.node.children[e]=n.node,t.node.childCount++,pf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=/[\[\].#$\/\u0000-\u001F\u007F]/,iO=/[\[\].#$\u0000-\u001F\u007F]/,_f=10*1024*1024,Jm=function(t){return typeof t=="string"&&t.length!==0&&!rO.test(t)},Zm=function(t){return typeof t=="string"&&t.length!==0&&!iO.test(t)},sO=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Zm(t)},oO=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Tc(t)||t&&typeof t=="object"&&Cn(t,".sv")},gf=function(t,e,n){const i=n instanceof Qe?new w1(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Zr(i));if(typeof e=="function")throw new Error(t+"contains a function "+Zr(i)+" with contents = "+e.toString());if(Tc(e))throw new Error(t+"contains "+e.toString()+" "+Zr(i));if(typeof e=="string"&&e.length>_f/3&&Sl(e)>_f)throw new Error(t+"contains a string greater than "+_f+" utf8 bytes "+Zr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,l=!1;if(zt(e,(u,c)=>{if(u===".value")o=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!Jm(u)))throw new Error(t+" contains an invalid key ("+u+") "+Zr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);I1(i,u),gf(t,c,i),b1(i)}),o&&l)throw new Error(t+' contains ".value" child '+Zr(i)+" in addition to actual children.")}},ev=function(t,e,n,i){if(!(i&&n===void 0)&&!Zm(n))throw new Error(J_(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},lO=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ev(t,e,n,i)},aO=function(t,e){if(Ce(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},uO=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Jm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!sO(n))throw new Error(J_(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tv(t,e){let n=null;for(let i=0;i<e.length;i++){const o=e[i],l=o.getPath();n!==null&&!Dc(l,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:l}),n.events.push(o)}n&&t.eventLists_.push(n)}function nv(t,e,n){tv(t,n),rv(t,i=>Dc(i,e))}function wr(t,e,n){tv(t,n),rv(t,i=>wn(i,e)||wn(e,i))}function rv(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const o=t.eventLists_[i];if(o){const l=o.path;e(l)?(fO(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function fO(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Xr&&At("event: "+n.toString()),Ws(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="repo_interrupt",dO=25;class pO{constructor(e,n,i,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wl(),this.transactionQueueTree_=new hf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _O(t,e,n){if(t.stats_=Pc(t.repoInfo_),t.forceRestClient_||Gx())t.server_=new Ul(t.repoInfo_,(i,o,l,u)=>{iv(t,i,o,l,u)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>sv(t,!0),0);else{if(typeof n!="undefined"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{gt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Zn(t.repoInfo_,e,(i,o,l,u)=>{iv(t,i,o,l,u)},i=>{sv(t,i)},i=>{mO(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=Jx(t.repoInfo_,()=>new j1(t.stats_,t.server_)),t.infoData_=new V1,t.infoSyncTree_=new $m({startListening:(i,o,l,u)=>{let c=[];const h=t.infoData_.getNode(i._path);return h.isEmpty()||(c=Yl(t.infoSyncTree_,i._path,h),setTimeout(()=>{u("ok")},0)),c},stopListening:()=>{}}),vf(t,"connected",!1),t.serverSyncTree_=new $m({startListening:(i,o,l,u)=>(t.server_.listen(i,l,o,(c,h)=>{const d=u(c,h);wr(t.eventQueue_,i._path,d)}),[]),stopListening:(i,o)=>{t.server_.unlisten(i,o)}})}function gO(t){const n=t.infoData_.getNode(new Qe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function mf(t){return XN({timestamp:gO(t)})}function iv(t,e,n,i,o){t.dataUpdateCount++;const l=new Qe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let u=[];if(o)if(i){const h=Tl(n,d=>It(d));u=GN(t.serverSyncTree_,l,h,o)}else{const h=It(n);u=KN(t.serverSyncTree_,l,h,o)}else if(i){const h=Tl(n,d=>It(d));u=HN(t.serverSyncTree_,l,h)}else{const h=It(n);u=Yl(t.serverSyncTree_,l,h)}let c=l;u.length>0&&(c=Ef(t,l)),wr(t.eventQueue_,c,u)}function sv(t,e){vf(t,"connected",e),e===!1&&vO(t)}function mO(t,e){zt(e,(n,i)=>{vf(t,n,i)})}function vf(t,e,n){const i=new Qe("/.info/"+e),o=It(n);t.infoData_.updateSnapshot(i,o);const l=Yl(t.infoSyncTree_,i,o);wr(t.eventQueue_,i,l)}function ov(t){return t.nextWriteId_++}function vO(t){yf(t,"onDisconnectEvents");const e=mf(t),n=Wl();zc(t.onDisconnect_,We(),(o,l)=>{const u=ZN(o,l,t.serverSyncTree_,e);vm(n,o,u)});let i=[];zc(n,We(),(o,l)=>{i=i.concat(Yl(t.serverSyncTree_,o,l));const u=bO(t,o);Ef(t,u)}),t.onDisconnect_=Wl(),wr(t.eventQueue_,We(),i)}function yO(t,e,n){let i;Ce(e._path)===".info"?i=Km(t.infoSyncTree_,e,n):i=Km(t.serverSyncTree_,e,n),nv(t.eventQueue_,e._path,i)}function lv(t,e,n){let i;Ce(e._path)===".info"?i=rf(t.infoSyncTree_,e,n):i=rf(t.serverSyncTree_,e,n),nv(t.eventQueue_,e._path,i)}function CO(t){t.persistentConnection_&&t.persistentConnection_.interrupt(hO)}function yf(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),At(n,...e)}function EO(t,e,n,i,o,l){yf(t,"transaction on "+e);const u={path:e,update:n,onComplete:i,status:null,order:Sg(),applyLocally:l,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=Cf(t,e,void 0);u.currentInputSnapshot=c;const h=u.update(c.val());if(h===void 0)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{gf("transaction failed: Data returned ",h,u.path),u.status=0;const d=jl(t.transactionQueueTree_,e),_=ii(d)||[];_.push(u),df(d,_);let g;typeof h=="object"&&h!==null&&Cn(h,".priority")?(g=Vr(h,".priority"),$(oO(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(sf(t.serverSyncTree_,e)||ae.EMPTY_NODE).getPriority().val();const y=mf(t),b=It(h,g),R=Qm(b,c,y);u.currentOutputSnapshotRaw=b,u.currentOutputSnapshotResolved=R,u.currentWriteId=ov(t);const W=zm(t.serverSyncTree_,e,R,u.currentWriteId,u.applyLocally);wr(t.eventQueue_,e,W),Zl(t,t.transactionQueueTree_)}}function Cf(t,e,n){return sf(t.serverSyncTree_,e,n)||ae.EMPTY_NODE}function Zl(t,e=t.transactionQueueTree_){if(e||ea(t,e),ii(e)){const n=uv(t,e);$(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&wO(t,eo(e),n)}else Xm(e)&&Jl(e,n=>{Zl(t,n)})}function wO(t,e,n){const i=n.map(d=>d.currentWriteId),o=Cf(t,e,i);let l=o;const u=o.hash();for(let d=0;d<n.length;d++){const _=n[d];$(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const g=Kt(e,_.path);l=l.updateChild(g,_.currentOutputSnapshotRaw)}const c=l.val(!0),h=e;t.server_.put(h.toString(),c,d=>{yf(t,"transaction put response",{path:h.toString(),status:d});let _=[];if(d==="ok"){const g=[];for(let y=0;y<n.length;y++)n[y].status=2,_=_.concat(Vi(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&g.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();ea(t,jl(t.transactionQueueTree_,e)),Zl(t,t.transactionQueueTree_),wr(t.eventQueue_,e,_);for(let y=0;y<g.length;y++)Ws(g[y])}else{if(d==="datastale")for(let g=0;g<n.length;g++)n[g].status===3?n[g].status=4:n[g].status=0;else{en("transaction at "+h.toString()+" failed: "+d);for(let g=0;g<n.length;g++)n[g].status=4,n[g].abortReason=d}Ef(t,e)}},u)}function Ef(t,e){const n=av(t,e),i=eo(n),o=uv(t,n);return IO(t,o,i),i}function IO(t,e,n){if(e.length===0)return;const i=[];let o=[];const u=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const h=e[c],d=Kt(n,h.path);let _=!1,g;if($(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)_=!0,g=h.abortReason,o=o.concat(Vi(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=dO)_=!0,g="maxretry",o=o.concat(Vi(t.serverSyncTree_,h.currentWriteId,!0));else{const y=Cf(t,h.path,u);h.currentInputSnapshot=y;const b=e[c].update(y.val());if(b!==void 0){gf("transaction failed: Data returned ",b,h.path);let R=It(b);typeof b=="object"&&b!=null&&Cn(b,".priority")||(R=R.updatePriority(y.getPriority()));const U=h.currentWriteId,G=mf(t),J=Qm(R,y,G);h.currentOutputSnapshotRaw=R,h.currentOutputSnapshotResolved=J,h.currentWriteId=ov(t),u.splice(u.indexOf(U),1),o=o.concat(zm(t.serverSyncTree_,h.path,J,h.currentWriteId,h.applyLocally)),o=o.concat(Vi(t.serverSyncTree_,U,!0))}else _=!0,g="nodata",o=o.concat(Vi(t.serverSyncTree_,h.currentWriteId,!0))}wr(t.eventQueue_,n,o),o=[],_&&(e[c].status=2,function(y){setTimeout(y,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(g==="nodata"?i.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):i.push(()=>e[c].onComplete(new Error(g),!1,null))))}ea(t,t.transactionQueueTree_);for(let c=0;c<i.length;c++)Ws(i[c]);Zl(t,t.transactionQueueTree_)}function av(t,e){let n,i=t.transactionQueueTree_;for(n=Ce(e);n!==null&&ii(i)===void 0;)i=jl(i,n),e=Je(e),n=Ce(e);return i}function uv(t,e){const n=[];return cv(t,e,n),n.sort((i,o)=>i.order-o.order),n}function cv(t,e,n){const i=ii(e);if(i)for(let o=0;o<i.length;o++)n.push(i[o]);Jl(e,o=>{cv(t,o,n)})}function ea(t,e){const n=ii(e);if(n){let i=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[i]=n[o],i++);n.length=i,df(e,n.length>0?n:void 0)}Jl(e,i=>{ea(t,i)})}function bO(t,e){const n=eo(av(t,e)),i=jl(t.transactionQueueTree_,e);return tO(i,o=>{wf(t,o)}),wf(t,i),jm(i,o=>{wf(t,o)}),n}function wf(t,e){const n=ii(e);if(n){const i=[];let o=[],l=-1;for(let u=0;u<n.length;u++)n[u].status===3||(n[u].status===1?($(l===u-1,"All SENT items should be at beginning of queue."),l=u,n[u].status=3,n[u].abortReason="set"):($(n[u].status===0,"Unexpected transaction status in abort"),n[u].unwatcher(),o=o.concat(Vi(t.serverSyncTree_,n[u].currentWriteId,!0)),n[u].onComplete&&i.push(n[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?df(e,void 0):n.length=l+1,wr(t.eventQueue_,eo(e),o);for(let u=0;u<i.length;u++)Ws(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let o=n[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function SO(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):en(`Invalid query segment '${n}' in query '${t}'`)}return e}const fv=function(t,e){const n=RO(t),i=n.namespace;n.domain==="firebase.com"&&jr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&jr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Dx();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Qx(n.host,n.secure,i,e,o,"",i!==n.subdomain),path:new Qe(n.pathString)}},RO=function(t){let e="",n="",i="",o="",l="",u=!0,c="https",h=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(c=t.substring(0,d-1),t=t.substring(d+2));let _=t.indexOf("/");_===-1&&(_=t.length);let g=t.indexOf("?");g===-1&&(g=t.length),e=t.substring(0,Math.min(_,g)),_<g&&(o=TO(t.substring(_,g)));const y=SO(t.substring(Math.min(t.length,g)));d=e.indexOf(":"),d>=0?(u=c==="https"||c==="wss",h=parseInt(e.substring(d+1),10)):d=e.length;const b=e.slice(0,d);if(b.toLowerCase()==="localhost")n="localhost";else if(b.split(".").length<=2)n=b;else{const R=e.indexOf(".");i=e.substring(0,R).toLowerCase(),n=e.substring(R+1),l=i}"ns"in y&&(l=y.ns)}return{host:e,port:h,domain:n,subdomain:i,secure:u,scheme:c,pathString:o,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n,i,o){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+gt(this.snapshot.exportVal())}}class dv{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return $(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,i,o){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=o}get key(){return Te(this._path)?null:rm(this._path)}get ref(){return new Fn(this._repo,this._path)}get _queryIdentifier(){const e=mm(this._queryParams),n=Sc(e);return n==="{}"?"default":n}get _queryObject(){return mm(this._queryParams)}isEqual(e){if(e=gr(e),!(e instanceof If))return!1;const n=this._repo===e._repo,i=Dc(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&i&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+E1(this._path)}}class Fn extends If{constructor(e,n){super(e,n,new $c,!1)}get parent(){const e=sm(this._path);return e===null?null:new Fn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class qi{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Qe(e),i=ta(this.ref,e);return new qi(this._node.getChild(n),i,it)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,o)=>e(new qi(o,ta(this.ref,i),it)))}hasChild(e){const n=new Qe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function aM(t,e){return t=gr(t),t._checkNotDeleted("ref"),e!==void 0?ta(t._root,e):t._root}function ta(t,e){return t=gr(t),Ce(t._path)===null?lO("child","path",e,!1):ev("child","path",e,!1),new Fn(t._repo,dt(t._path,e))}class bf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new hv("value",this,new qi(e.snapshotNode,new Fn(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new dv(this,e,n):null}matches(e){return e instanceof bf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Tf{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new dv(this,e,n):null}createEvent(e,n){$(e.childName!=null,"Child events should have a childName.");const i=ta(new Fn(n._repo,n._path),e.childName),o=n._queryParams.getIndex();return new hv(e.type,this,new qi(e.snapshotNode,i,o),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Tf?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function xO(t,e,n,i,o){let l;if(typeof i=="object"&&(l=void 0,o=i),typeof i=="function"&&(l=i),o&&o.onlyOnce){const h=n,d=(_,g)=>{lv(t._repo,t,c),h(_,g)};d.userCallback=n.userCallback,d.context=n.context,n=d}const u=new AO(n,l||void 0),c=e==="value"?new bf(u):new Tf(e,u);return yO(t._repo,t,c),()=>lv(t._repo,t,c)}function NO(t,e,n,i){return xO(t,"value",e,n,i)}PN(Fn);UN(Fn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="FIREBASE_DATABASE_EMULATOR_HOST",Sf={};let PO=!1;function MO(t,e,n,i,o){let l=i||t.options.databaseURL;l===void 0&&(t.options.projectId||jr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),At("Using default host for project ",t.options.projectId),l=`${t.options.projectId}-default-rtdb.firebaseio.com`);let u=fv(l,o),c=u.repoInfo,h,d;typeof process!="undefined"&&(d=process.env[OO]),d?(h=!0,l=`http://${d}?ns=${c.namespace}`,u=fv(l,o),c=u.repoInfo):h=!u.repoInfo.secure;const _=o&&h?new Rc(Rc.OWNER):new qx(t.name,t.options,e);uO("Invalid Firebase Database URL",u),Te(u.path)||jr("Database URL must point to the root of a Firebase Database (not including a child path).");const g=kO(c,t,_,new Vx(t.name,n));return new DO(g,t)}function LO(t,e){const n=Sf[e];(!n||n[t.key]!==t)&&jr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),CO(t),delete n[t.key]}function kO(t,e,n,i){let o=Sf[e.name];o||(o={},Sf[e.name]=o);let l=o[t.toURLString()];return l&&jr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new pO(t,PO,n,i),o[t.toURLString()]=l,l}class DO{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(_O(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fn(this._repo,We())),this._rootInternal}_delete(){return this._rootInternal!==null&&(LO(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&jr("Cannot call "+e+" on a deleted database.")}}function uM(t=XA(),e){return qA(t,"database").getImmediate({identifier:e})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t){Px(mc),Os(new Li("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return MO(i,o,l,n)},"PUBLIC").setMultipleInstances(!0)),mr(wg,Ig,t),mr(wg,Ig,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function cM(t,e,n){var i;if(t=gr(t),aO("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const o=(i=n==null?void 0:n.applyLocally)!==null&&i!==void 0?i:!0,l=new bl,u=(h,d,_)=>{let g=null;h?l.reject(h):(g=new qi(_,new Fn(t._repo,t._path),it),l.resolve(new UO(d,g)))},c=NO(t,()=>{});return EO(t._repo,t._path,e,u,c,o),l.promise}Zn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Zn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};FO();var to=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Rf={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var n,i="4.17.21",o=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,_="__lodash_placeholder__",g=1,y=2,b=4,R=1,W=2,U=1,G=2,J=4,ne=8,le=16,we=32,Pe=64,ie=128,Me=256,Ie=512,$e=30,xe="...",Ze=800,Tn=16,Un=1,tr=2,ot=3,Ne=1/0,Se=9007199254740991,Lt=17976931348623157e292,pn=0/0,ut=4294967295,tn=ut-1,kt=ut>>>1,Zi=[["ary",ie],["bind",U],["bindKey",G],["curry",ne],["curryRight",le],["flip",Ie],["partial",we],["partialRight",Pe],["rearg",Me]],L="[object Arguments]",Q="[object Array]",K="[object AsyncFunction]",j="[object Boolean]",Oe="[object Date]",Ge="[object DOMException]",de="[object Error]",ce="[object Function]",C="[object GeneratorFunction]",I="[object Map]",x="[object Number]",D="[object Null]",M="[object Object]",z="[object Promise]",q="[object Proxy]",H="[object RegExp]",B="[object Set]",F="[object String]",te="[object Symbol]",X="[object Undefined]",ee="[object WeakMap]",ue="[object WeakSet]",ve="[object ArrayBuffer]",ke="[object DataView]",De="[object Float32Array]",ze="[object Float64Array]",xt="[object Int8Array]",Sn="[object Int16Array]",oi="[object Int32Array]",Wn="[object Uint8Array]",li="[object Uint8ClampedArray]",yt="[object Uint16Array]",Dt="[object Uint32Array]",oo=/\b__p \+= '';/g,Gv=/\b(__p \+=) '' \+/g,Vv=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Uf=/&(?:amp|lt|gt|quot|#39);/g,Wf=/[&<>"']/g,qv=RegExp(Uf.source),Yv=RegExp(Wf.source),Qv=/<%-([\s\S]+?)%>/g,Xv=/<%([\s\S]+?)%>/g,Bf=/<%=([\s\S]+?)%>/g,jv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jv=/^\w*$/,Zv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sa=/[\\^$.*+?()[\]{}|]/g,ey=RegExp(sa.source),oa=/^\s+/,ty=/\s/,ny=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ry=/\{\n\/\* \[wrapped with (.+)\] \*/,iy=/,? & /,sy=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oy=/[()=,{}\[\]\/\s]/,ly=/\\(\\)?/g,ay=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hf=/\w*$/,uy=/^[-+]0x[0-9a-f]+$/i,cy=/^0b[01]+$/i,fy=/^\[object .+?Constructor\]$/,hy=/^0o[0-7]+$/i,dy=/^(?:0|[1-9]\d*)$/,py=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lo=/($^)/,_y=/['\n\r\u2028\u2029\\]/g,ao="\\ud800-\\udfff",gy="\\u0300-\\u036f",my="\\ufe20-\\ufe2f",vy="\\u20d0-\\u20ff",$f=gy+my+vy,zf="\\u2700-\\u27bf",Kf="a-z\\xdf-\\xf6\\xf8-\\xff",yy="\\xac\\xb1\\xd7\\xf7",Cy="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ey="\\u2000-\\u206f",wy=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Gf="A-Z\\xc0-\\xd6\\xd8-\\xde",Vf="\\ufe0e\\ufe0f",qf=yy+Cy+Ey+wy,la="['\u2019]",Iy="["+ao+"]",Yf="["+qf+"]",uo="["+$f+"]",Qf="\\d+",by="["+zf+"]",Xf="["+Kf+"]",jf="[^"+ao+qf+Qf+zf+Kf+Gf+"]",aa="\\ud83c[\\udffb-\\udfff]",Ty="(?:"+uo+"|"+aa+")",Jf="[^"+ao+"]",ua="(?:\\ud83c[\\udde6-\\uddff]){2}",ca="[\\ud800-\\udbff][\\udc00-\\udfff]",ai="["+Gf+"]",Zf="\\u200d",eh="(?:"+Xf+"|"+jf+")",Sy="(?:"+ai+"|"+jf+")",th="(?:"+la+"(?:d|ll|m|re|s|t|ve))?",nh="(?:"+la+"(?:D|LL|M|RE|S|T|VE))?",rh=Ty+"?",ih="["+Vf+"]?",Ry="(?:"+Zf+"(?:"+[Jf,ua,ca].join("|")+")"+ih+rh+")*",Ay="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xy="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",sh=ih+rh+Ry,Ny="(?:"+[by,ua,ca].join("|")+")"+sh,Oy="(?:"+[Jf+uo+"?",uo,ua,ca,Iy].join("|")+")",Py=RegExp(la,"g"),My=RegExp(uo,"g"),fa=RegExp(aa+"(?="+aa+")|"+Oy+sh,"g"),Ly=RegExp([ai+"?"+Xf+"+"+th+"(?="+[Yf,ai,"$"].join("|")+")",Sy+"+"+nh+"(?="+[Yf,ai+eh,"$"].join("|")+")",ai+"?"+eh+"+"+th,ai+"+"+nh,xy,Ay,Qf,Ny].join("|"),"g"),ky=RegExp("["+Zf+ao+$f+Vf+"]"),Dy=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Uy=-1,et={};et[De]=et[ze]=et[xt]=et[Sn]=et[oi]=et[Wn]=et[li]=et[yt]=et[Dt]=!0,et[L]=et[Q]=et[ve]=et[j]=et[ke]=et[Oe]=et[de]=et[ce]=et[I]=et[x]=et[M]=et[H]=et[B]=et[F]=et[ee]=!1;var je={};je[L]=je[Q]=je[ve]=je[ke]=je[j]=je[Oe]=je[De]=je[ze]=je[xt]=je[Sn]=je[oi]=je[I]=je[x]=je[M]=je[H]=je[B]=je[F]=je[te]=je[Wn]=je[li]=je[yt]=je[Dt]=!0,je[de]=je[ce]=je[ee]=!1;var Wy={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},By={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hy={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$y={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zy=parseFloat,Ky=parseInt,oh=typeof to=="object"&&to&&to.Object===Object&&to,Gy=typeof self=="object"&&self&&self.Object===Object&&self,Ct=oh||Gy||Function("return this")(),ha=e&&!e.nodeType&&e,Tr=ha&&!0&&t&&!t.nodeType&&t,lh=Tr&&Tr.exports===ha,da=lh&&oh.process,nn=function(){try{var T=Tr&&Tr.require&&Tr.require("util").types;return T||da&&da.binding&&da.binding("util")}catch{}}(),ah=nn&&nn.isArrayBuffer,uh=nn&&nn.isDate,ch=nn&&nn.isMap,fh=nn&&nn.isRegExp,hh=nn&&nn.isSet,dh=nn&&nn.isTypedArray;function Vt(T,N,A){switch(A.length){case 0:return T.call(N);case 1:return T.call(N,A[0]);case 2:return T.call(N,A[0],A[1]);case 3:return T.call(N,A[0],A[1],A[2])}return T.apply(N,A)}function Vy(T,N,A,Y){for(var fe=-1,Fe=T==null?0:T.length;++fe<Fe;){var ct=T[fe];N(Y,ct,A(ct),T)}return Y}function rn(T,N){for(var A=-1,Y=T==null?0:T.length;++A<Y&&N(T[A],A,T)!==!1;);return T}function qy(T,N){for(var A=T==null?0:T.length;A--&&N(T[A],A,T)!==!1;);return T}function ph(T,N){for(var A=-1,Y=T==null?0:T.length;++A<Y;)if(!N(T[A],A,T))return!1;return!0}function nr(T,N){for(var A=-1,Y=T==null?0:T.length,fe=0,Fe=[];++A<Y;){var ct=T[A];N(ct,A,T)&&(Fe[fe++]=ct)}return Fe}function co(T,N){var A=T==null?0:T.length;return!!A&&ui(T,N,0)>-1}function pa(T,N,A){for(var Y=-1,fe=T==null?0:T.length;++Y<fe;)if(A(N,T[Y]))return!0;return!1}function nt(T,N){for(var A=-1,Y=T==null?0:T.length,fe=Array(Y);++A<Y;)fe[A]=N(T[A],A,T);return fe}function rr(T,N){for(var A=-1,Y=N.length,fe=T.length;++A<Y;)T[fe+A]=N[A];return T}function _a(T,N,A,Y){var fe=-1,Fe=T==null?0:T.length;for(Y&&Fe&&(A=T[++fe]);++fe<Fe;)A=N(A,T[fe],fe,T);return A}function Yy(T,N,A,Y){var fe=T==null?0:T.length;for(Y&&fe&&(A=T[--fe]);fe--;)A=N(A,T[fe],fe,T);return A}function ga(T,N){for(var A=-1,Y=T==null?0:T.length;++A<Y;)if(N(T[A],A,T))return!0;return!1}var Qy=ma("length");function Xy(T){return T.split("")}function jy(T){return T.match(sy)||[]}function _h(T,N,A){var Y;return A(T,function(fe,Fe,ct){if(N(fe,Fe,ct))return Y=Fe,!1}),Y}function fo(T,N,A,Y){for(var fe=T.length,Fe=A+(Y?1:-1);Y?Fe--:++Fe<fe;)if(N(T[Fe],Fe,T))return Fe;return-1}function ui(T,N,A){return N===N?u0(T,N,A):fo(T,gh,A)}function Jy(T,N,A,Y){for(var fe=A-1,Fe=T.length;++fe<Fe;)if(Y(T[fe],N))return fe;return-1}function gh(T){return T!==T}function mh(T,N){var A=T==null?0:T.length;return A?ya(T,N)/A:pn}function ma(T){return function(N){return N==null?n:N[T]}}function va(T){return function(N){return T==null?n:T[N]}}function vh(T,N,A,Y,fe){return fe(T,function(Fe,ct,Ve){A=Y?(Y=!1,Fe):N(A,Fe,ct,Ve)}),A}function Zy(T,N){var A=T.length;for(T.sort(N);A--;)T[A]=T[A].value;return T}function ya(T,N){for(var A,Y=-1,fe=T.length;++Y<fe;){var Fe=N(T[Y]);Fe!==n&&(A=A===n?Fe:A+Fe)}return A}function Ca(T,N){for(var A=-1,Y=Array(T);++A<T;)Y[A]=N(A);return Y}function e0(T,N){return nt(N,function(A){return[A,T[A]]})}function yh(T){return T&&T.slice(0,Ih(T)+1).replace(oa,"")}function qt(T){return function(N){return T(N)}}function Ea(T,N){return nt(N,function(A){return T[A]})}function es(T,N){return T.has(N)}function Ch(T,N){for(var A=-1,Y=T.length;++A<Y&&ui(N,T[A],0)>-1;);return A}function Eh(T,N){for(var A=T.length;A--&&ui(N,T[A],0)>-1;);return A}function t0(T,N){for(var A=T.length,Y=0;A--;)T[A]===N&&++Y;return Y}var n0=va(Wy),r0=va(By);function i0(T){return"\\"+$y[T]}function s0(T,N){return T==null?n:T[N]}function ci(T){return ky.test(T)}function o0(T){return Dy.test(T)}function l0(T){for(var N,A=[];!(N=T.next()).done;)A.push(N.value);return A}function wa(T){var N=-1,A=Array(T.size);return T.forEach(function(Y,fe){A[++N]=[fe,Y]}),A}function wh(T,N){return function(A){return T(N(A))}}function ir(T,N){for(var A=-1,Y=T.length,fe=0,Fe=[];++A<Y;){var ct=T[A];(ct===N||ct===_)&&(T[A]=_,Fe[fe++]=A)}return Fe}function ho(T){var N=-1,A=Array(T.size);return T.forEach(function(Y){A[++N]=Y}),A}function a0(T){var N=-1,A=Array(T.size);return T.forEach(function(Y){A[++N]=[Y,Y]}),A}function u0(T,N,A){for(var Y=A-1,fe=T.length;++Y<fe;)if(T[Y]===N)return Y;return-1}function c0(T,N,A){for(var Y=A+1;Y--;)if(T[Y]===N)return Y;return Y}function fi(T){return ci(T)?h0(T):Qy(T)}function _n(T){return ci(T)?d0(T):Xy(T)}function Ih(T){for(var N=T.length;N--&&ty.test(T.charAt(N)););return N}var f0=va(Hy);function h0(T){for(var N=fa.lastIndex=0;fa.test(T);)++N;return N}function d0(T){return T.match(fa)||[]}function p0(T){return T.match(Ly)||[]}var _0=function T(N){N=N==null?Ct:hi.defaults(Ct.Object(),N,hi.pick(Ct,Fy));var A=N.Array,Y=N.Date,fe=N.Error,Fe=N.Function,ct=N.Math,Ve=N.Object,Ia=N.RegExp,g0=N.String,sn=N.TypeError,po=A.prototype,m0=Fe.prototype,di=Ve.prototype,_o=N["__core-js_shared__"],go=m0.toString,Ke=di.hasOwnProperty,v0=0,bh=function(){var r=/[^.]+$/.exec(_o&&_o.keys&&_o.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),mo=di.toString,y0=go.call(Ve),C0=Ct._,E0=Ia("^"+go.call(Ke).replace(sa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vo=lh?N.Buffer:n,sr=N.Symbol,yo=N.Uint8Array,Th=vo?vo.allocUnsafe:n,Co=wh(Ve.getPrototypeOf,Ve),Sh=Ve.create,Rh=di.propertyIsEnumerable,Eo=po.splice,Ah=sr?sr.isConcatSpreadable:n,ts=sr?sr.iterator:n,Sr=sr?sr.toStringTag:n,wo=function(){try{var r=Or(Ve,"defineProperty");return r({},"",{}),r}catch{}}(),w0=N.clearTimeout!==Ct.clearTimeout&&N.clearTimeout,I0=Y&&Y.now!==Ct.Date.now&&Y.now,b0=N.setTimeout!==Ct.setTimeout&&N.setTimeout,Io=ct.ceil,bo=ct.floor,ba=Ve.getOwnPropertySymbols,T0=vo?vo.isBuffer:n,xh=N.isFinite,S0=po.join,R0=wh(Ve.keys,Ve),ft=ct.max,bt=ct.min,A0=Y.now,x0=N.parseInt,Nh=ct.random,N0=po.reverse,Ta=Or(N,"DataView"),ns=Or(N,"Map"),Sa=Or(N,"Promise"),pi=Or(N,"Set"),rs=Or(N,"WeakMap"),is=Or(Ve,"create"),To=rs&&new rs,_i={},O0=Pr(Ta),P0=Pr(ns),M0=Pr(Sa),L0=Pr(pi),k0=Pr(rs),So=sr?sr.prototype:n,ss=So?So.valueOf:n,Oh=So?So.toString:n;function m(r){if(st(r)&&!he(r)&&!(r instanceof Re)){if(r instanceof on)return r;if(Ke.call(r,"__wrapped__"))return Pd(r)}return new on(r)}var gi=function(){function r(){}return function(s){if(!rt(s))return{};if(Sh)return Sh(s);r.prototype=s;var a=new r;return r.prototype=n,a}}();function Ro(){}function on(r,s){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=n}m.templateSettings={escape:Qv,evaluate:Xv,interpolate:Bf,variable:"",imports:{_:m}},m.prototype=Ro.prototype,m.prototype.constructor=m,on.prototype=gi(Ro.prototype),on.prototype.constructor=on;function Re(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ut,this.__views__=[]}function D0(){var r=new Re(this.__wrapped__);return r.__actions__=Ft(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Ft(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Ft(this.__views__),r}function F0(){if(this.__filtered__){var r=new Re(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function U0(){var r=this.__wrapped__.value(),s=this.__dir__,a=he(r),f=s<0,p=a?r.length:0,v=XC(0,p,this.__views__),E=v.start,w=v.end,S=w-E,O=f?w:E-1,P=this.__iteratees__,k=P.length,V=0,Z=bt(S,this.__takeCount__);if(!a||!f&&p==S&&Z==S)return td(r,this.__actions__);var se=[];e:for(;S--&&V<Z;){O+=s;for(var ge=-1,oe=r[O];++ge<k;){var be=P[ge],Ae=be.iteratee,Xt=be.type,Pt=Ae(oe);if(Xt==tr)oe=Pt;else if(!Pt){if(Xt==Un)continue e;break e}}se[V++]=oe}return se}Re.prototype=gi(Ro.prototype),Re.prototype.constructor=Re;function Rr(r){var s=-1,a=r==null?0:r.length;for(this.clear();++s<a;){var f=r[s];this.set(f[0],f[1])}}function W0(){this.__data__=is?is(null):{},this.size=0}function B0(r){var s=this.has(r)&&delete this.__data__[r];return this.size-=s?1:0,s}function H0(r){var s=this.__data__;if(is){var a=s[r];return a===h?n:a}return Ke.call(s,r)?s[r]:n}function $0(r){var s=this.__data__;return is?s[r]!==n:Ke.call(s,r)}function z0(r,s){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=is&&s===n?h:s,this}Rr.prototype.clear=W0,Rr.prototype.delete=B0,Rr.prototype.get=H0,Rr.prototype.has=$0,Rr.prototype.set=z0;function Bn(r){var s=-1,a=r==null?0:r.length;for(this.clear();++s<a;){var f=r[s];this.set(f[0],f[1])}}function K0(){this.__data__=[],this.size=0}function G0(r){var s=this.__data__,a=Ao(s,r);if(a<0)return!1;var f=s.length-1;return a==f?s.pop():Eo.call(s,a,1),--this.size,!0}function V0(r){var s=this.__data__,a=Ao(s,r);return a<0?n:s[a][1]}function q0(r){return Ao(this.__data__,r)>-1}function Y0(r,s){var a=this.__data__,f=Ao(a,r);return f<0?(++this.size,a.push([r,s])):a[f][1]=s,this}Bn.prototype.clear=K0,Bn.prototype.delete=G0,Bn.prototype.get=V0,Bn.prototype.has=q0,Bn.prototype.set=Y0;function Hn(r){var s=-1,a=r==null?0:r.length;for(this.clear();++s<a;){var f=r[s];this.set(f[0],f[1])}}function Q0(){this.size=0,this.__data__={hash:new Rr,map:new(ns||Bn),string:new Rr}}function X0(r){var s=Bo(this,r).delete(r);return this.size-=s?1:0,s}function j0(r){return Bo(this,r).get(r)}function J0(r){return Bo(this,r).has(r)}function Z0(r,s){var a=Bo(this,r),f=a.size;return a.set(r,s),this.size+=a.size==f?0:1,this}Hn.prototype.clear=Q0,Hn.prototype.delete=X0,Hn.prototype.get=j0,Hn.prototype.has=J0,Hn.prototype.set=Z0;function Ar(r){var s=-1,a=r==null?0:r.length;for(this.__data__=new Hn;++s<a;)this.add(r[s])}function eC(r){return this.__data__.set(r,h),this}function tC(r){return this.__data__.has(r)}Ar.prototype.add=Ar.prototype.push=eC,Ar.prototype.has=tC;function gn(r){var s=this.__data__=new Bn(r);this.size=s.size}function nC(){this.__data__=new Bn,this.size=0}function rC(r){var s=this.__data__,a=s.delete(r);return this.size=s.size,a}function iC(r){return this.__data__.get(r)}function sC(r){return this.__data__.has(r)}function oC(r,s){var a=this.__data__;if(a instanceof Bn){var f=a.__data__;if(!ns||f.length<o-1)return f.push([r,s]),this.size=++a.size,this;a=this.__data__=new Hn(f)}return a.set(r,s),this.size=a.size,this}gn.prototype.clear=nC,gn.prototype.delete=rC,gn.prototype.get=iC,gn.prototype.has=sC,gn.prototype.set=oC;function Ph(r,s){var a=he(r),f=!a&&Mr(r),p=!a&&!f&&cr(r),v=!a&&!f&&!p&&Ci(r),E=a||f||p||v,w=E?Ca(r.length,g0):[],S=w.length;for(var O in r)(s||Ke.call(r,O))&&!(E&&(O=="length"||p&&(O=="offset"||O=="parent")||v&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||Gn(O,S)))&&w.push(O);return w}function Mh(r){var s=r.length;return s?r[Fa(0,s-1)]:n}function lC(r,s){return Ho(Ft(r),xr(s,0,r.length))}function aC(r){return Ho(Ft(r))}function Ra(r,s,a){(a!==n&&!mn(r[s],a)||a===n&&!(s in r))&&$n(r,s,a)}function os(r,s,a){var f=r[s];(!(Ke.call(r,s)&&mn(f,a))||a===n&&!(s in r))&&$n(r,s,a)}function Ao(r,s){for(var a=r.length;a--;)if(mn(r[a][0],s))return a;return-1}function uC(r,s,a,f){return or(r,function(p,v,E){s(f,p,a(p),E)}),f}function Lh(r,s){return r&&An(s,pt(s),r)}function cC(r,s){return r&&An(s,Wt(s),r)}function $n(r,s,a){s=="__proto__"&&wo?wo(r,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[s]=a}function Aa(r,s){for(var a=-1,f=s.length,p=A(f),v=r==null;++a<f;)p[a]=v?n:au(r,s[a]);return p}function xr(r,s,a){return r===r&&(a!==n&&(r=r<=a?r:a),s!==n&&(r=r>=s?r:s)),r}function ln(r,s,a,f,p,v){var E,w=s&g,S=s&y,O=s&b;if(a&&(E=p?a(r,f,p,v):a(r)),E!==n)return E;if(!rt(r))return r;var P=he(r);if(P){if(E=JC(r),!w)return Ft(r,E)}else{var k=Tt(r),V=k==ce||k==C;if(cr(r))return id(r,w);if(k==M||k==L||V&&!p){if(E=S||V?{}:Id(r),!w)return S?HC(r,cC(E,r)):BC(r,Lh(E,r))}else{if(!je[k])return p?r:{};E=ZC(r,k,w)}}v||(v=new gn);var Z=v.get(r);if(Z)return Z;v.set(r,E),Jd(r)?r.forEach(function(oe){E.add(ln(oe,s,a,oe,r,v))}):Xd(r)&&r.forEach(function(oe,be){E.set(be,ln(oe,s,a,be,r,v))});var se=O?S?Ya:qa:S?Wt:pt,ge=P?n:se(r);return rn(ge||r,function(oe,be){ge&&(be=oe,oe=r[be]),os(E,be,ln(oe,s,a,be,r,v))}),E}function fC(r){var s=pt(r);return function(a){return kh(a,r,s)}}function kh(r,s,a){var f=a.length;if(r==null)return!f;for(r=Ve(r);f--;){var p=a[f],v=s[p],E=r[p];if(E===n&&!(p in r)||!v(E))return!1}return!0}function Dh(r,s,a){if(typeof r!="function")throw new sn(u);return ds(function(){r.apply(n,a)},s)}function ls(r,s,a,f){var p=-1,v=co,E=!0,w=r.length,S=[],O=s.length;if(!w)return S;a&&(s=nt(s,qt(a))),f?(v=pa,E=!1):s.length>=o&&(v=es,E=!1,s=new Ar(s));e:for(;++p<w;){var P=r[p],k=a==null?P:a(P);if(P=f||P!==0?P:0,E&&k===k){for(var V=O;V--;)if(s[V]===k)continue e;S.push(P)}else v(s,k,f)||S.push(P)}return S}var or=ud(Rn),Fh=ud(Na,!0);function hC(r,s){var a=!0;return or(r,function(f,p,v){return a=!!s(f,p,v),a}),a}function xo(r,s,a){for(var f=-1,p=r.length;++f<p;){var v=r[f],E=s(v);if(E!=null&&(w===n?E===E&&!Qt(E):a(E,w)))var w=E,S=v}return S}function dC(r,s,a,f){var p=r.length;for(a=_e(a),a<0&&(a=-a>p?0:p+a),f=f===n||f>p?p:_e(f),f<0&&(f+=p),f=a>f?0:ep(f);a<f;)r[a++]=s;return r}function Uh(r,s){var a=[];return or(r,function(f,p,v){s(f,p,v)&&a.push(f)}),a}function Et(r,s,a,f,p){var v=-1,E=r.length;for(a||(a=tE),p||(p=[]);++v<E;){var w=r[v];s>0&&a(w)?s>1?Et(w,s-1,a,f,p):rr(p,w):f||(p[p.length]=w)}return p}var xa=cd(),Wh=cd(!0);function Rn(r,s){return r&&xa(r,s,pt)}function Na(r,s){return r&&Wh(r,s,pt)}function No(r,s){return nr(s,function(a){return Vn(r[a])})}function Nr(r,s){s=ar(s,r);for(var a=0,f=s.length;r!=null&&a<f;)r=r[xn(s[a++])];return a&&a==f?r:n}function Bh(r,s,a){var f=s(r);return he(r)?f:rr(f,a(r))}function Nt(r){return r==null?r===n?X:D:Sr&&Sr in Ve(r)?QC(r):aE(r)}function Oa(r,s){return r>s}function pC(r,s){return r!=null&&Ke.call(r,s)}function _C(r,s){return r!=null&&s in Ve(r)}function gC(r,s,a){return r>=bt(s,a)&&r<ft(s,a)}function Pa(r,s,a){for(var f=a?pa:co,p=r[0].length,v=r.length,E=v,w=A(v),S=1/0,O=[];E--;){var P=r[E];E&&s&&(P=nt(P,qt(s))),S=bt(P.length,S),w[E]=!a&&(s||p>=120&&P.length>=120)?new Ar(E&&P):n}P=r[0];var k=-1,V=w[0];e:for(;++k<p&&O.length<S;){var Z=P[k],se=s?s(Z):Z;if(Z=a||Z!==0?Z:0,!(V?es(V,se):f(O,se,a))){for(E=v;--E;){var ge=w[E];if(!(ge?es(ge,se):f(r[E],se,a)))continue e}V&&V.push(se),O.push(Z)}}return O}function mC(r,s,a,f){return Rn(r,function(p,v,E){s(f,a(p),v,E)}),f}function as(r,s,a){s=ar(s,r),r=Rd(r,s);var f=r==null?r:r[xn(un(s))];return f==null?n:Vt(f,r,a)}function Hh(r){return st(r)&&Nt(r)==L}function vC(r){return st(r)&&Nt(r)==ve}function yC(r){return st(r)&&Nt(r)==Oe}function us(r,s,a,f,p){return r===s?!0:r==null||s==null||!st(r)&&!st(s)?r!==r&&s!==s:CC(r,s,a,f,us,p)}function CC(r,s,a,f,p,v){var E=he(r),w=he(s),S=E?Q:Tt(r),O=w?Q:Tt(s);S=S==L?M:S,O=O==L?M:O;var P=S==M,k=O==M,V=S==O;if(V&&cr(r)){if(!cr(s))return!1;E=!0,P=!1}if(V&&!P)return v||(v=new gn),E||Ci(r)?Cd(r,s,a,f,p,v):qC(r,s,S,a,f,p,v);if(!(a&R)){var Z=P&&Ke.call(r,"__wrapped__"),se=k&&Ke.call(s,"__wrapped__");if(Z||se){var ge=Z?r.value():r,oe=se?s.value():s;return v||(v=new gn),p(ge,oe,a,f,v)}}return V?(v||(v=new gn),YC(r,s,a,f,p,v)):!1}function EC(r){return st(r)&&Tt(r)==I}function Ma(r,s,a,f){var p=a.length,v=p,E=!f;if(r==null)return!v;for(r=Ve(r);p--;){var w=a[p];if(E&&w[2]?w[1]!==r[w[0]]:!(w[0]in r))return!1}for(;++p<v;){w=a[p];var S=w[0],O=r[S],P=w[1];if(E&&w[2]){if(O===n&&!(S in r))return!1}else{var k=new gn;if(f)var V=f(O,P,S,r,s,k);if(!(V===n?us(P,O,R|W,f,k):V))return!1}}return!0}function $h(r){if(!rt(r)||rE(r))return!1;var s=Vn(r)?E0:fy;return s.test(Pr(r))}function wC(r){return st(r)&&Nt(r)==H}function IC(r){return st(r)&&Tt(r)==B}function bC(r){return st(r)&&qo(r.length)&&!!et[Nt(r)]}function zh(r){return typeof r=="function"?r:r==null?Bt:typeof r=="object"?he(r)?Vh(r[0],r[1]):Gh(r):fp(r)}function La(r){if(!hs(r))return R0(r);var s=[];for(var a in Ve(r))Ke.call(r,a)&&a!="constructor"&&s.push(a);return s}function TC(r){if(!rt(r))return lE(r);var s=hs(r),a=[];for(var f in r)f=="constructor"&&(s||!Ke.call(r,f))||a.push(f);return a}function ka(r,s){return r<s}function Kh(r,s){var a=-1,f=Ut(r)?A(r.length):[];return or(r,function(p,v,E){f[++a]=s(p,v,E)}),f}function Gh(r){var s=Xa(r);return s.length==1&&s[0][2]?Td(s[0][0],s[0][1]):function(a){return a===r||Ma(a,r,s)}}function Vh(r,s){return Ja(r)&&bd(s)?Td(xn(r),s):function(a){var f=au(a,r);return f===n&&f===s?uu(a,r):us(s,f,R|W)}}function Oo(r,s,a,f,p){r!==s&&xa(s,function(v,E){if(p||(p=new gn),rt(v))SC(r,s,E,a,Oo,f,p);else{var w=f?f(eu(r,E),v,E+"",r,s,p):n;w===n&&(w=v),Ra(r,E,w)}},Wt)}function SC(r,s,a,f,p,v,E){var w=eu(r,a),S=eu(s,a),O=E.get(S);if(O){Ra(r,a,O);return}var P=v?v(w,S,a+"",r,s,E):n,k=P===n;if(k){var V=he(S),Z=!V&&cr(S),se=!V&&!Z&&Ci(S);P=S,V||Z||se?he(w)?P=w:lt(w)?P=Ft(w):Z?(k=!1,P=id(S,!0)):se?(k=!1,P=sd(S,!0)):P=[]:ps(S)||Mr(S)?(P=w,Mr(w)?P=tp(w):(!rt(w)||Vn(w))&&(P=Id(S))):k=!1}k&&(E.set(S,P),p(P,S,f,v,E),E.delete(S)),Ra(r,a,P)}function qh(r,s){var a=r.length;if(!!a)return s+=s<0?a:0,Gn(s,a)?r[s]:n}function Yh(r,s,a){s.length?s=nt(s,function(v){return he(v)?function(E){return Nr(E,v.length===1?v[0]:v)}:v}):s=[Bt];var f=-1;s=nt(s,qt(re()));var p=Kh(r,function(v,E,w){var S=nt(s,function(O){return O(v)});return{criteria:S,index:++f,value:v}});return Zy(p,function(v,E){return WC(v,E,a)})}function RC(r,s){return Qh(r,s,function(a,f){return uu(r,f)})}function Qh(r,s,a){for(var f=-1,p=s.length,v={};++f<p;){var E=s[f],w=Nr(r,E);a(w,E)&&cs(v,ar(E,r),w)}return v}function AC(r){return function(s){return Nr(s,r)}}function Da(r,s,a,f){var p=f?Jy:ui,v=-1,E=s.length,w=r;for(r===s&&(s=Ft(s)),a&&(w=nt(r,qt(a)));++v<E;)for(var S=0,O=s[v],P=a?a(O):O;(S=p(w,P,S,f))>-1;)w!==r&&Eo.call(w,S,1),Eo.call(r,S,1);return r}function Xh(r,s){for(var a=r?s.length:0,f=a-1;a--;){var p=s[a];if(a==f||p!==v){var v=p;Gn(p)?Eo.call(r,p,1):Ba(r,p)}}return r}function Fa(r,s){return r+bo(Nh()*(s-r+1))}function xC(r,s,a,f){for(var p=-1,v=ft(Io((s-r)/(a||1)),0),E=A(v);v--;)E[f?v:++p]=r,r+=a;return E}function Ua(r,s){var a="";if(!r||s<1||s>Se)return a;do s%2&&(a+=r),s=bo(s/2),s&&(r+=r);while(s);return a}function ye(r,s){return tu(Sd(r,s,Bt),r+"")}function NC(r){return Mh(Ei(r))}function OC(r,s){var a=Ei(r);return Ho(a,xr(s,0,a.length))}function cs(r,s,a,f){if(!rt(r))return r;s=ar(s,r);for(var p=-1,v=s.length,E=v-1,w=r;w!=null&&++p<v;){var S=xn(s[p]),O=a;if(S==="__proto__"||S==="constructor"||S==="prototype")return r;if(p!=E){var P=w[S];O=f?f(P,S,w):n,O===n&&(O=rt(P)?P:Gn(s[p+1])?[]:{})}os(w,S,O),w=w[S]}return r}var jh=To?function(r,s){return To.set(r,s),r}:Bt,PC=wo?function(r,s){return wo(r,"toString",{configurable:!0,enumerable:!1,value:fu(s),writable:!0})}:Bt;function MC(r){return Ho(Ei(r))}function an(r,s,a){var f=-1,p=r.length;s<0&&(s=-s>p?0:p+s),a=a>p?p:a,a<0&&(a+=p),p=s>a?0:a-s>>>0,s>>>=0;for(var v=A(p);++f<p;)v[f]=r[f+s];return v}function LC(r,s){var a;return or(r,function(f,p,v){return a=s(f,p,v),!a}),!!a}function Po(r,s,a){var f=0,p=r==null?f:r.length;if(typeof s=="number"&&s===s&&p<=kt){for(;f<p;){var v=f+p>>>1,E=r[v];E!==null&&!Qt(E)&&(a?E<=s:E<s)?f=v+1:p=v}return p}return Wa(r,s,Bt,a)}function Wa(r,s,a,f){var p=0,v=r==null?0:r.length;if(v===0)return 0;s=a(s);for(var E=s!==s,w=s===null,S=Qt(s),O=s===n;p<v;){var P=bo((p+v)/2),k=a(r[P]),V=k!==n,Z=k===null,se=k===k,ge=Qt(k);if(E)var oe=f||se;else O?oe=se&&(f||V):w?oe=se&&V&&(f||!Z):S?oe=se&&V&&!Z&&(f||!ge):Z||ge?oe=!1:oe=f?k<=s:k<s;oe?p=P+1:v=P}return bt(v,tn)}function Jh(r,s){for(var a=-1,f=r.length,p=0,v=[];++a<f;){var E=r[a],w=s?s(E):E;if(!a||!mn(w,S)){var S=w;v[p++]=E===0?0:E}}return v}function Zh(r){return typeof r=="number"?r:Qt(r)?pn:+r}function Yt(r){if(typeof r=="string")return r;if(he(r))return nt(r,Yt)+"";if(Qt(r))return Oh?Oh.call(r):"";var s=r+"";return s=="0"&&1/r==-Ne?"-0":s}function lr(r,s,a){var f=-1,p=co,v=r.length,E=!0,w=[],S=w;if(a)E=!1,p=pa;else if(v>=o){var O=s?null:GC(r);if(O)return ho(O);E=!1,p=es,S=new Ar}else S=s?[]:w;e:for(;++f<v;){var P=r[f],k=s?s(P):P;if(P=a||P!==0?P:0,E&&k===k){for(var V=S.length;V--;)if(S[V]===k)continue e;s&&S.push(k),w.push(P)}else p(S,k,a)||(S!==w&&S.push(k),w.push(P))}return w}function Ba(r,s){return s=ar(s,r),r=Rd(r,s),r==null||delete r[xn(un(s))]}function ed(r,s,a,f){return cs(r,s,a(Nr(r,s)),f)}function Mo(r,s,a,f){for(var p=r.length,v=f?p:-1;(f?v--:++v<p)&&s(r[v],v,r););return a?an(r,f?0:v,f?v+1:p):an(r,f?v+1:0,f?p:v)}function td(r,s){var a=r;return a instanceof Re&&(a=a.value()),_a(s,function(f,p){return p.func.apply(p.thisArg,rr([f],p.args))},a)}function Ha(r,s,a){var f=r.length;if(f<2)return f?lr(r[0]):[];for(var p=-1,v=A(f);++p<f;)for(var E=r[p],w=-1;++w<f;)w!=p&&(v[p]=ls(v[p]||E,r[w],s,a));return lr(Et(v,1),s,a)}function nd(r,s,a){for(var f=-1,p=r.length,v=s.length,E={};++f<p;){var w=f<v?s[f]:n;a(E,r[f],w)}return E}function $a(r){return lt(r)?r:[]}function za(r){return typeof r=="function"?r:Bt}function ar(r,s){return he(r)?r:Ja(r,s)?[r]:Od(Be(r))}var kC=ye;function ur(r,s,a){var f=r.length;return a=a===n?f:a,!s&&a>=f?r:an(r,s,a)}var rd=w0||function(r){return Ct.clearTimeout(r)};function id(r,s){if(s)return r.slice();var a=r.length,f=Th?Th(a):new r.constructor(a);return r.copy(f),f}function Ka(r){var s=new r.constructor(r.byteLength);return new yo(s).set(new yo(r)),s}function DC(r,s){var a=s?Ka(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function FC(r){var s=new r.constructor(r.source,Hf.exec(r));return s.lastIndex=r.lastIndex,s}function UC(r){return ss?Ve(ss.call(r)):{}}function sd(r,s){var a=s?Ka(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function od(r,s){if(r!==s){var a=r!==n,f=r===null,p=r===r,v=Qt(r),E=s!==n,w=s===null,S=s===s,O=Qt(s);if(!w&&!O&&!v&&r>s||v&&E&&S&&!w&&!O||f&&E&&S||!a&&S||!p)return 1;if(!f&&!v&&!O&&r<s||O&&a&&p&&!f&&!v||w&&a&&p||!E&&p||!S)return-1}return 0}function WC(r,s,a){for(var f=-1,p=r.criteria,v=s.criteria,E=p.length,w=a.length;++f<E;){var S=od(p[f],v[f]);if(S){if(f>=w)return S;var O=a[f];return S*(O=="desc"?-1:1)}}return r.index-s.index}function ld(r,s,a,f){for(var p=-1,v=r.length,E=a.length,w=-1,S=s.length,O=ft(v-E,0),P=A(S+O),k=!f;++w<S;)P[w]=s[w];for(;++p<E;)(k||p<v)&&(P[a[p]]=r[p]);for(;O--;)P[w++]=r[p++];return P}function ad(r,s,a,f){for(var p=-1,v=r.length,E=-1,w=a.length,S=-1,O=s.length,P=ft(v-w,0),k=A(P+O),V=!f;++p<P;)k[p]=r[p];for(var Z=p;++S<O;)k[Z+S]=s[S];for(;++E<w;)(V||p<v)&&(k[Z+a[E]]=r[p++]);return k}function Ft(r,s){var a=-1,f=r.length;for(s||(s=A(f));++a<f;)s[a]=r[a];return s}function An(r,s,a,f){var p=!a;a||(a={});for(var v=-1,E=s.length;++v<E;){var w=s[v],S=f?f(a[w],r[w],w,a,r):n;S===n&&(S=r[w]),p?$n(a,w,S):os(a,w,S)}return a}function BC(r,s){return An(r,ja(r),s)}function HC(r,s){return An(r,Ed(r),s)}function Lo(r,s){return function(a,f){var p=he(a)?Vy:uC,v=s?s():{};return p(a,r,re(f,2),v)}}function mi(r){return ye(function(s,a){var f=-1,p=a.length,v=p>1?a[p-1]:n,E=p>2?a[2]:n;for(v=r.length>3&&typeof v=="function"?(p--,v):n,E&&Ot(a[0],a[1],E)&&(v=p<3?n:v,p=1),s=Ve(s);++f<p;){var w=a[f];w&&r(s,w,f,v)}return s})}function ud(r,s){return function(a,f){if(a==null)return a;if(!Ut(a))return r(a,f);for(var p=a.length,v=s?p:-1,E=Ve(a);(s?v--:++v<p)&&f(E[v],v,E)!==!1;);return a}}function cd(r){return function(s,a,f){for(var p=-1,v=Ve(s),E=f(s),w=E.length;w--;){var S=E[r?w:++p];if(a(v[S],S,v)===!1)break}return s}}function $C(r,s,a){var f=s&U,p=fs(r);function v(){var E=this&&this!==Ct&&this instanceof v?p:r;return E.apply(f?a:this,arguments)}return v}function fd(r){return function(s){s=Be(s);var a=ci(s)?_n(s):n,f=a?a[0]:s.charAt(0),p=a?ur(a,1).join(""):s.slice(1);return f[r]()+p}}function vi(r){return function(s){return _a(up(ap(s).replace(Py,"")),r,"")}}function fs(r){return function(){var s=arguments;switch(s.length){case 0:return new r;case 1:return new r(s[0]);case 2:return new r(s[0],s[1]);case 3:return new r(s[0],s[1],s[2]);case 4:return new r(s[0],s[1],s[2],s[3]);case 5:return new r(s[0],s[1],s[2],s[3],s[4]);case 6:return new r(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new r(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var a=gi(r.prototype),f=r.apply(a,s);return rt(f)?f:a}}function zC(r,s,a){var f=fs(r);function p(){for(var v=arguments.length,E=A(v),w=v,S=yi(p);w--;)E[w]=arguments[w];var O=v<3&&E[0]!==S&&E[v-1]!==S?[]:ir(E,S);if(v-=O.length,v<a)return gd(r,s,ko,p.placeholder,n,E,O,n,n,a-v);var P=this&&this!==Ct&&this instanceof p?f:r;return Vt(P,this,E)}return p}function hd(r){return function(s,a,f){var p=Ve(s);if(!Ut(s)){var v=re(a,3);s=pt(s),a=function(w){return v(p[w],w,p)}}var E=r(s,a,f);return E>-1?p[v?s[E]:E]:n}}function dd(r){return Kn(function(s){var a=s.length,f=a,p=on.prototype.thru;for(r&&s.reverse();f--;){var v=s[f];if(typeof v!="function")throw new sn(u);if(p&&!E&&Wo(v)=="wrapper")var E=new on([],!0)}for(f=E?f:a;++f<a;){v=s[f];var w=Wo(v),S=w=="wrapper"?Qa(v):n;S&&Za(S[0])&&S[1]==(ie|ne|we|Me)&&!S[4].length&&S[9]==1?E=E[Wo(S[0])].apply(E,S[3]):E=v.length==1&&Za(v)?E[w]():E.thru(v)}return function(){var O=arguments,P=O[0];if(E&&O.length==1&&he(P))return E.plant(P).value();for(var k=0,V=a?s[k].apply(this,O):P;++k<a;)V=s[k].call(this,V);return V}})}function ko(r,s,a,f,p,v,E,w,S,O){var P=s&ie,k=s&U,V=s&G,Z=s&(ne|le),se=s&Ie,ge=V?n:fs(r);function oe(){for(var be=arguments.length,Ae=A(be),Xt=be;Xt--;)Ae[Xt]=arguments[Xt];if(Z)var Pt=yi(oe),jt=t0(Ae,Pt);if(f&&(Ae=ld(Ae,f,p,Z)),v&&(Ae=ad(Ae,v,E,Z)),be-=jt,Z&&be<O){var at=ir(Ae,Pt);return gd(r,s,ko,oe.placeholder,a,Ae,at,w,S,O-be)}var vn=k?a:this,Yn=V?vn[r]:r;return be=Ae.length,w?Ae=uE(Ae,w):se&&be>1&&Ae.reverse(),P&&S<be&&(Ae.length=S),this&&this!==Ct&&this instanceof oe&&(Yn=ge||fs(Yn)),Yn.apply(vn,Ae)}return oe}function pd(r,s){return function(a,f){return mC(a,r,s(f),{})}}function Do(r,s){return function(a,f){var p;if(a===n&&f===n)return s;if(a!==n&&(p=a),f!==n){if(p===n)return f;typeof a=="string"||typeof f=="string"?(a=Yt(a),f=Yt(f)):(a=Zh(a),f=Zh(f)),p=r(a,f)}return p}}function Ga(r){return Kn(function(s){return s=nt(s,qt(re())),ye(function(a){var f=this;return r(s,function(p){return Vt(p,f,a)})})})}function Fo(r,s){s=s===n?" ":Yt(s);var a=s.length;if(a<2)return a?Ua(s,r):s;var f=Ua(s,Io(r/fi(s)));return ci(s)?ur(_n(f),0,r).join(""):f.slice(0,r)}function KC(r,s,a,f){var p=s&U,v=fs(r);function E(){for(var w=-1,S=arguments.length,O=-1,P=f.length,k=A(P+S),V=this&&this!==Ct&&this instanceof E?v:r;++O<P;)k[O]=f[O];for(;S--;)k[O++]=arguments[++w];return Vt(V,p?a:this,k)}return E}function _d(r){return function(s,a,f){return f&&typeof f!="number"&&Ot(s,a,f)&&(a=f=n),s=qn(s),a===n?(a=s,s=0):a=qn(a),f=f===n?s<a?1:-1:qn(f),xC(s,a,f,r)}}function Uo(r){return function(s,a){return typeof s=="string"&&typeof a=="string"||(s=cn(s),a=cn(a)),r(s,a)}}function gd(r,s,a,f,p,v,E,w,S,O){var P=s&ne,k=P?E:n,V=P?n:E,Z=P?v:n,se=P?n:v;s|=P?we:Pe,s&=~(P?Pe:we),s&J||(s&=~(U|G));var ge=[r,s,p,Z,k,se,V,w,S,O],oe=a.apply(n,ge);return Za(r)&&Ad(oe,ge),oe.placeholder=f,xd(oe,r,s)}function Va(r){var s=ct[r];return function(a,f){if(a=cn(a),f=f==null?0:bt(_e(f),292),f&&xh(a)){var p=(Be(a)+"e").split("e"),v=s(p[0]+"e"+(+p[1]+f));return p=(Be(v)+"e").split("e"),+(p[0]+"e"+(+p[1]-f))}return s(a)}}var GC=pi&&1/ho(new pi([,-0]))[1]==Ne?function(r){return new pi(r)}:pu;function md(r){return function(s){var a=Tt(s);return a==I?wa(s):a==B?a0(s):e0(s,r(s))}}function zn(r,s,a,f,p,v,E,w){var S=s&G;if(!S&&typeof r!="function")throw new sn(u);var O=f?f.length:0;if(O||(s&=~(we|Pe),f=p=n),E=E===n?E:ft(_e(E),0),w=w===n?w:_e(w),O-=p?p.length:0,s&Pe){var P=f,k=p;f=p=n}var V=S?n:Qa(r),Z=[r,s,a,f,p,P,k,v,E,w];if(V&&oE(Z,V),r=Z[0],s=Z[1],a=Z[2],f=Z[3],p=Z[4],w=Z[9]=Z[9]===n?S?0:r.length:ft(Z[9]-O,0),!w&&s&(ne|le)&&(s&=~(ne|le)),!s||s==U)var se=$C(r,s,a);else s==ne||s==le?se=zC(r,s,w):(s==we||s==(U|we))&&!p.length?se=KC(r,s,a,f):se=ko.apply(n,Z);var ge=V?jh:Ad;return xd(ge(se,Z),r,s)}function vd(r,s,a,f){return r===n||mn(r,di[a])&&!Ke.call(f,a)?s:r}function yd(r,s,a,f,p,v){return rt(r)&&rt(s)&&(v.set(s,r),Oo(r,s,n,yd,v),v.delete(s)),r}function VC(r){return ps(r)?n:r}function Cd(r,s,a,f,p,v){var E=a&R,w=r.length,S=s.length;if(w!=S&&!(E&&S>w))return!1;var O=v.get(r),P=v.get(s);if(O&&P)return O==s&&P==r;var k=-1,V=!0,Z=a&W?new Ar:n;for(v.set(r,s),v.set(s,r);++k<w;){var se=r[k],ge=s[k];if(f)var oe=E?f(ge,se,k,s,r,v):f(se,ge,k,r,s,v);if(oe!==n){if(oe)continue;V=!1;break}if(Z){if(!ga(s,function(be,Ae){if(!es(Z,Ae)&&(se===be||p(se,be,a,f,v)))return Z.push(Ae)})){V=!1;break}}else if(!(se===ge||p(se,ge,a,f,v))){V=!1;break}}return v.delete(r),v.delete(s),V}function qC(r,s,a,f,p,v,E){switch(a){case ke:if(r.byteLength!=s.byteLength||r.byteOffset!=s.byteOffset)return!1;r=r.buffer,s=s.buffer;case ve:return!(r.byteLength!=s.byteLength||!v(new yo(r),new yo(s)));case j:case Oe:case x:return mn(+r,+s);case de:return r.name==s.name&&r.message==s.message;case H:case F:return r==s+"";case I:var w=wa;case B:var S=f&R;if(w||(w=ho),r.size!=s.size&&!S)return!1;var O=E.get(r);if(O)return O==s;f|=W,E.set(r,s);var P=Cd(w(r),w(s),f,p,v,E);return E.delete(r),P;case te:if(ss)return ss.call(r)==ss.call(s)}return!1}function YC(r,s,a,f,p,v){var E=a&R,w=qa(r),S=w.length,O=qa(s),P=O.length;if(S!=P&&!E)return!1;for(var k=S;k--;){var V=w[k];if(!(E?V in s:Ke.call(s,V)))return!1}var Z=v.get(r),se=v.get(s);if(Z&&se)return Z==s&&se==r;var ge=!0;v.set(r,s),v.set(s,r);for(var oe=E;++k<S;){V=w[k];var be=r[V],Ae=s[V];if(f)var Xt=E?f(Ae,be,V,s,r,v):f(be,Ae,V,r,s,v);if(!(Xt===n?be===Ae||p(be,Ae,a,f,v):Xt)){ge=!1;break}oe||(oe=V=="constructor")}if(ge&&!oe){var Pt=r.constructor,jt=s.constructor;Pt!=jt&&"constructor"in r&&"constructor"in s&&!(typeof Pt=="function"&&Pt instanceof Pt&&typeof jt=="function"&&jt instanceof jt)&&(ge=!1)}return v.delete(r),v.delete(s),ge}function Kn(r){return tu(Sd(r,n,kd),r+"")}function qa(r){return Bh(r,pt,ja)}function Ya(r){return Bh(r,Wt,Ed)}var Qa=To?function(r){return To.get(r)}:pu;function Wo(r){for(var s=r.name+"",a=_i[s],f=Ke.call(_i,s)?a.length:0;f--;){var p=a[f],v=p.func;if(v==null||v==r)return p.name}return s}function yi(r){var s=Ke.call(m,"placeholder")?m:r;return s.placeholder}function re(){var r=m.iteratee||hu;return r=r===hu?zh:r,arguments.length?r(arguments[0],arguments[1]):r}function Bo(r,s){var a=r.__data__;return nE(s)?a[typeof s=="string"?"string":"hash"]:a.map}function Xa(r){for(var s=pt(r),a=s.length;a--;){var f=s[a],p=r[f];s[a]=[f,p,bd(p)]}return s}function Or(r,s){var a=s0(r,s);return $h(a)?a:n}function QC(r){var s=Ke.call(r,Sr),a=r[Sr];try{r[Sr]=n;var f=!0}catch{}var p=mo.call(r);return f&&(s?r[Sr]=a:delete r[Sr]),p}var ja=ba?function(r){return r==null?[]:(r=Ve(r),nr(ba(r),function(s){return Rh.call(r,s)}))}:_u,Ed=ba?function(r){for(var s=[];r;)rr(s,ja(r)),r=Co(r);return s}:_u,Tt=Nt;(Ta&&Tt(new Ta(new ArrayBuffer(1)))!=ke||ns&&Tt(new ns)!=I||Sa&&Tt(Sa.resolve())!=z||pi&&Tt(new pi)!=B||rs&&Tt(new rs)!=ee)&&(Tt=function(r){var s=Nt(r),a=s==M?r.constructor:n,f=a?Pr(a):"";if(f)switch(f){case O0:return ke;case P0:return I;case M0:return z;case L0:return B;case k0:return ee}return s});function XC(r,s,a){for(var f=-1,p=a.length;++f<p;){var v=a[f],E=v.size;switch(v.type){case"drop":r+=E;break;case"dropRight":s-=E;break;case"take":s=bt(s,r+E);break;case"takeRight":r=ft(r,s-E);break}}return{start:r,end:s}}function jC(r){var s=r.match(ry);return s?s[1].split(iy):[]}function wd(r,s,a){s=ar(s,r);for(var f=-1,p=s.length,v=!1;++f<p;){var E=xn(s[f]);if(!(v=r!=null&&a(r,E)))break;r=r[E]}return v||++f!=p?v:(p=r==null?0:r.length,!!p&&qo(p)&&Gn(E,p)&&(he(r)||Mr(r)))}function JC(r){var s=r.length,a=new r.constructor(s);return s&&typeof r[0]=="string"&&Ke.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function Id(r){return typeof r.constructor=="function"&&!hs(r)?gi(Co(r)):{}}function ZC(r,s,a){var f=r.constructor;switch(s){case ve:return Ka(r);case j:case Oe:return new f(+r);case ke:return DC(r,a);case De:case ze:case xt:case Sn:case oi:case Wn:case li:case yt:case Dt:return sd(r,a);case I:return new f;case x:case F:return new f(r);case H:return FC(r);case B:return new f;case te:return UC(r)}}function eE(r,s){var a=s.length;if(!a)return r;var f=a-1;return s[f]=(a>1?"& ":"")+s[f],s=s.join(a>2?", ":" "),r.replace(ny,`{
/* [wrapped with `+s+`] */
`)}function tE(r){return he(r)||Mr(r)||!!(Ah&&r&&r[Ah])}function Gn(r,s){var a=typeof r;return s=s==null?Se:s,!!s&&(a=="number"||a!="symbol"&&dy.test(r))&&r>-1&&r%1==0&&r<s}function Ot(r,s,a){if(!rt(a))return!1;var f=typeof s;return(f=="number"?Ut(a)&&Gn(s,a.length):f=="string"&&s in a)?mn(a[s],r):!1}function Ja(r,s){if(he(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Qt(r)?!0:Jv.test(r)||!jv.test(r)||s!=null&&r in Ve(s)}function nE(r){var s=typeof r;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?r!=="__proto__":r===null}function Za(r){var s=Wo(r),a=m[s];if(typeof a!="function"||!(s in Re.prototype))return!1;if(r===a)return!0;var f=Qa(a);return!!f&&r===f[0]}function rE(r){return!!bh&&bh in r}var iE=_o?Vn:gu;function hs(r){var s=r&&r.constructor,a=typeof s=="function"&&s.prototype||di;return r===a}function bd(r){return r===r&&!rt(r)}function Td(r,s){return function(a){return a==null?!1:a[r]===s&&(s!==n||r in Ve(a))}}function sE(r){var s=Go(r,function(f){return a.size===d&&a.clear(),f}),a=s.cache;return s}function oE(r,s){var a=r[1],f=s[1],p=a|f,v=p<(U|G|ie),E=f==ie&&a==ne||f==ie&&a==Me&&r[7].length<=s[8]||f==(ie|Me)&&s[7].length<=s[8]&&a==ne;if(!(v||E))return r;f&U&&(r[2]=s[2],p|=a&U?0:J);var w=s[3];if(w){var S=r[3];r[3]=S?ld(S,w,s[4]):w,r[4]=S?ir(r[3],_):s[4]}return w=s[5],w&&(S=r[5],r[5]=S?ad(S,w,s[6]):w,r[6]=S?ir(r[5],_):s[6]),w=s[7],w&&(r[7]=w),f&ie&&(r[8]=r[8]==null?s[8]:bt(r[8],s[8])),r[9]==null&&(r[9]=s[9]),r[0]=s[0],r[1]=p,r}function lE(r){var s=[];if(r!=null)for(var a in Ve(r))s.push(a);return s}function aE(r){return mo.call(r)}function Sd(r,s,a){return s=ft(s===n?r.length-1:s,0),function(){for(var f=arguments,p=-1,v=ft(f.length-s,0),E=A(v);++p<v;)E[p]=f[s+p];p=-1;for(var w=A(s+1);++p<s;)w[p]=f[p];return w[s]=a(E),Vt(r,this,w)}}function Rd(r,s){return s.length<2?r:Nr(r,an(s,0,-1))}function uE(r,s){for(var a=r.length,f=bt(s.length,a),p=Ft(r);f--;){var v=s[f];r[f]=Gn(v,a)?p[v]:n}return r}function eu(r,s){if(!(s==="constructor"&&typeof r[s]=="function")&&s!="__proto__")return r[s]}var Ad=Nd(jh),ds=b0||function(r,s){return Ct.setTimeout(r,s)},tu=Nd(PC);function xd(r,s,a){var f=s+"";return tu(r,eE(f,cE(jC(f),a)))}function Nd(r){var s=0,a=0;return function(){var f=A0(),p=Tn-(f-a);if(a=f,p>0){if(++s>=Ze)return arguments[0]}else s=0;return r.apply(n,arguments)}}function Ho(r,s){var a=-1,f=r.length,p=f-1;for(s=s===n?f:s;++a<s;){var v=Fa(a,p),E=r[v];r[v]=r[a],r[a]=E}return r.length=s,r}var Od=sE(function(r){var s=[];return r.charCodeAt(0)===46&&s.push(""),r.replace(Zv,function(a,f,p,v){s.push(p?v.replace(ly,"$1"):f||a)}),s});function xn(r){if(typeof r=="string"||Qt(r))return r;var s=r+"";return s=="0"&&1/r==-Ne?"-0":s}function Pr(r){if(r!=null){try{return go.call(r)}catch{}try{return r+""}catch{}}return""}function cE(r,s){return rn(Zi,function(a){var f="_."+a[0];s&a[1]&&!co(r,f)&&r.push(f)}),r.sort()}function Pd(r){if(r instanceof Re)return r.clone();var s=new on(r.__wrapped__,r.__chain__);return s.__actions__=Ft(r.__actions__),s.__index__=r.__index__,s.__values__=r.__values__,s}function fE(r,s,a){(a?Ot(r,s,a):s===n)?s=1:s=ft(_e(s),0);var f=r==null?0:r.length;if(!f||s<1)return[];for(var p=0,v=0,E=A(Io(f/s));p<f;)E[v++]=an(r,p,p+=s);return E}function hE(r){for(var s=-1,a=r==null?0:r.length,f=0,p=[];++s<a;){var v=r[s];v&&(p[f++]=v)}return p}function dE(){var r=arguments.length;if(!r)return[];for(var s=A(r-1),a=arguments[0],f=r;f--;)s[f-1]=arguments[f];return rr(he(a)?Ft(a):[a],Et(s,1))}var pE=ye(function(r,s){return lt(r)?ls(r,Et(s,1,lt,!0)):[]}),_E=ye(function(r,s){var a=un(s);return lt(a)&&(a=n),lt(r)?ls(r,Et(s,1,lt,!0),re(a,2)):[]}),gE=ye(function(r,s){var a=un(s);return lt(a)&&(a=n),lt(r)?ls(r,Et(s,1,lt,!0),n,a):[]});function mE(r,s,a){var f=r==null?0:r.length;return f?(s=a||s===n?1:_e(s),an(r,s<0?0:s,f)):[]}function vE(r,s,a){var f=r==null?0:r.length;return f?(s=a||s===n?1:_e(s),s=f-s,an(r,0,s<0?0:s)):[]}function yE(r,s){return r&&r.length?Mo(r,re(s,3),!0,!0):[]}function CE(r,s){return r&&r.length?Mo(r,re(s,3),!0):[]}function EE(r,s,a,f){var p=r==null?0:r.length;return p?(a&&typeof a!="number"&&Ot(r,s,a)&&(a=0,f=p),dC(r,s,a,f)):[]}function Md(r,s,a){var f=r==null?0:r.length;if(!f)return-1;var p=a==null?0:_e(a);return p<0&&(p=ft(f+p,0)),fo(r,re(s,3),p)}function Ld(r,s,a){var f=r==null?0:r.length;if(!f)return-1;var p=f-1;return a!==n&&(p=_e(a),p=a<0?ft(f+p,0):bt(p,f-1)),fo(r,re(s,3),p,!0)}function kd(r){var s=r==null?0:r.length;return s?Et(r,1):[]}function wE(r){var s=r==null?0:r.length;return s?Et(r,Ne):[]}function IE(r,s){var a=r==null?0:r.length;return a?(s=s===n?1:_e(s),Et(r,s)):[]}function bE(r){for(var s=-1,a=r==null?0:r.length,f={};++s<a;){var p=r[s];f[p[0]]=p[1]}return f}function Dd(r){return r&&r.length?r[0]:n}function TE(r,s,a){var f=r==null?0:r.length;if(!f)return-1;var p=a==null?0:_e(a);return p<0&&(p=ft(f+p,0)),ui(r,s,p)}function SE(r){var s=r==null?0:r.length;return s?an(r,0,-1):[]}var RE=ye(function(r){var s=nt(r,$a);return s.length&&s[0]===r[0]?Pa(s):[]}),AE=ye(function(r){var s=un(r),a=nt(r,$a);return s===un(a)?s=n:a.pop(),a.length&&a[0]===r[0]?Pa(a,re(s,2)):[]}),xE=ye(function(r){var s=un(r),a=nt(r,$a);return s=typeof s=="function"?s:n,s&&a.pop(),a.length&&a[0]===r[0]?Pa(a,n,s):[]});function NE(r,s){return r==null?"":S0.call(r,s)}function un(r){var s=r==null?0:r.length;return s?r[s-1]:n}function OE(r,s,a){var f=r==null?0:r.length;if(!f)return-1;var p=f;return a!==n&&(p=_e(a),p=p<0?ft(f+p,0):bt(p,f-1)),s===s?c0(r,s,p):fo(r,gh,p,!0)}function PE(r,s){return r&&r.length?qh(r,_e(s)):n}var ME=ye(Fd);function Fd(r,s){return r&&r.length&&s&&s.length?Da(r,s):r}function LE(r,s,a){return r&&r.length&&s&&s.length?Da(r,s,re(a,2)):r}function kE(r,s,a){return r&&r.length&&s&&s.length?Da(r,s,n,a):r}var DE=Kn(function(r,s){var a=r==null?0:r.length,f=Aa(r,s);return Xh(r,nt(s,function(p){return Gn(p,a)?+p:p}).sort(od)),f});function FE(r,s){var a=[];if(!(r&&r.length))return a;var f=-1,p=[],v=r.length;for(s=re(s,3);++f<v;){var E=r[f];s(E,f,r)&&(a.push(E),p.push(f))}return Xh(r,p),a}function nu(r){return r==null?r:N0.call(r)}function UE(r,s,a){var f=r==null?0:r.length;return f?(a&&typeof a!="number"&&Ot(r,s,a)?(s=0,a=f):(s=s==null?0:_e(s),a=a===n?f:_e(a)),an(r,s,a)):[]}function WE(r,s){return Po(r,s)}function BE(r,s,a){return Wa(r,s,re(a,2))}function HE(r,s){var a=r==null?0:r.length;if(a){var f=Po(r,s);if(f<a&&mn(r[f],s))return f}return-1}function $E(r,s){return Po(r,s,!0)}function zE(r,s,a){return Wa(r,s,re(a,2),!0)}function KE(r,s){var a=r==null?0:r.length;if(a){var f=Po(r,s,!0)-1;if(mn(r[f],s))return f}return-1}function GE(r){return r&&r.length?Jh(r):[]}function VE(r,s){return r&&r.length?Jh(r,re(s,2)):[]}function qE(r){var s=r==null?0:r.length;return s?an(r,1,s):[]}function YE(r,s,a){return r&&r.length?(s=a||s===n?1:_e(s),an(r,0,s<0?0:s)):[]}function QE(r,s,a){var f=r==null?0:r.length;return f?(s=a||s===n?1:_e(s),s=f-s,an(r,s<0?0:s,f)):[]}function XE(r,s){return r&&r.length?Mo(r,re(s,3),!1,!0):[]}function jE(r,s){return r&&r.length?Mo(r,re(s,3)):[]}var JE=ye(function(r){return lr(Et(r,1,lt,!0))}),ZE=ye(function(r){var s=un(r);return lt(s)&&(s=n),lr(Et(r,1,lt,!0),re(s,2))}),ew=ye(function(r){var s=un(r);return s=typeof s=="function"?s:n,lr(Et(r,1,lt,!0),n,s)});function tw(r){return r&&r.length?lr(r):[]}function nw(r,s){return r&&r.length?lr(r,re(s,2)):[]}function rw(r,s){return s=typeof s=="function"?s:n,r&&r.length?lr(r,n,s):[]}function ru(r){if(!(r&&r.length))return[];var s=0;return r=nr(r,function(a){if(lt(a))return s=ft(a.length,s),!0}),Ca(s,function(a){return nt(r,ma(a))})}function Ud(r,s){if(!(r&&r.length))return[];var a=ru(r);return s==null?a:nt(a,function(f){return Vt(s,n,f)})}var iw=ye(function(r,s){return lt(r)?ls(r,s):[]}),sw=ye(function(r){return Ha(nr(r,lt))}),ow=ye(function(r){var s=un(r);return lt(s)&&(s=n),Ha(nr(r,lt),re(s,2))}),lw=ye(function(r){var s=un(r);return s=typeof s=="function"?s:n,Ha(nr(r,lt),n,s)}),aw=ye(ru);function uw(r,s){return nd(r||[],s||[],os)}function cw(r,s){return nd(r||[],s||[],cs)}var fw=ye(function(r){var s=r.length,a=s>1?r[s-1]:n;return a=typeof a=="function"?(r.pop(),a):n,Ud(r,a)});function Wd(r){var s=m(r);return s.__chain__=!0,s}function hw(r,s){return s(r),r}function $o(r,s){return s(r)}var dw=Kn(function(r){var s=r.length,a=s?r[0]:0,f=this.__wrapped__,p=function(v){return Aa(v,r)};return s>1||this.__actions__.length||!(f instanceof Re)||!Gn(a)?this.thru(p):(f=f.slice(a,+a+(s?1:0)),f.__actions__.push({func:$o,args:[p],thisArg:n}),new on(f,this.__chain__).thru(function(v){return s&&!v.length&&v.push(n),v}))});function pw(){return Wd(this)}function _w(){return new on(this.value(),this.__chain__)}function gw(){this.__values__===n&&(this.__values__=Zd(this.value()));var r=this.__index__>=this.__values__.length,s=r?n:this.__values__[this.__index__++];return{done:r,value:s}}function mw(){return this}function vw(r){for(var s,a=this;a instanceof Ro;){var f=Pd(a);f.__index__=0,f.__values__=n,s?p.__wrapped__=f:s=f;var p=f;a=a.__wrapped__}return p.__wrapped__=r,s}function yw(){var r=this.__wrapped__;if(r instanceof Re){var s=r;return this.__actions__.length&&(s=new Re(this)),s=s.reverse(),s.__actions__.push({func:$o,args:[nu],thisArg:n}),new on(s,this.__chain__)}return this.thru(nu)}function Cw(){return td(this.__wrapped__,this.__actions__)}var Ew=Lo(function(r,s,a){Ke.call(r,a)?++r[a]:$n(r,a,1)});function ww(r,s,a){var f=he(r)?ph:hC;return a&&Ot(r,s,a)&&(s=n),f(r,re(s,3))}function Iw(r,s){var a=he(r)?nr:Uh;return a(r,re(s,3))}var bw=hd(Md),Tw=hd(Ld);function Sw(r,s){return Et(zo(r,s),1)}function Rw(r,s){return Et(zo(r,s),Ne)}function Aw(r,s,a){return a=a===n?1:_e(a),Et(zo(r,s),a)}function Bd(r,s){var a=he(r)?rn:or;return a(r,re(s,3))}function Hd(r,s){var a=he(r)?qy:Fh;return a(r,re(s,3))}var xw=Lo(function(r,s,a){Ke.call(r,a)?r[a].push(s):$n(r,a,[s])});function Nw(r,s,a,f){r=Ut(r)?r:Ei(r),a=a&&!f?_e(a):0;var p=r.length;return a<0&&(a=ft(p+a,0)),Yo(r)?a<=p&&r.indexOf(s,a)>-1:!!p&&ui(r,s,a)>-1}var Ow=ye(function(r,s,a){var f=-1,p=typeof s=="function",v=Ut(r)?A(r.length):[];return or(r,function(E){v[++f]=p?Vt(s,E,a):as(E,s,a)}),v}),Pw=Lo(function(r,s,a){$n(r,a,s)});function zo(r,s){var a=he(r)?nt:Kh;return a(r,re(s,3))}function Mw(r,s,a,f){return r==null?[]:(he(s)||(s=s==null?[]:[s]),a=f?n:a,he(a)||(a=a==null?[]:[a]),Yh(r,s,a))}var Lw=Lo(function(r,s,a){r[a?0:1].push(s)},function(){return[[],[]]});function kw(r,s,a){var f=he(r)?_a:vh,p=arguments.length<3;return f(r,re(s,4),a,p,or)}function Dw(r,s,a){var f=he(r)?Yy:vh,p=arguments.length<3;return f(r,re(s,4),a,p,Fh)}function Fw(r,s){var a=he(r)?nr:Uh;return a(r,Vo(re(s,3)))}function Uw(r){var s=he(r)?Mh:NC;return s(r)}function Ww(r,s,a){(a?Ot(r,s,a):s===n)?s=1:s=_e(s);var f=he(r)?lC:OC;return f(r,s)}function Bw(r){var s=he(r)?aC:MC;return s(r)}function Hw(r){if(r==null)return 0;if(Ut(r))return Yo(r)?fi(r):r.length;var s=Tt(r);return s==I||s==B?r.size:La(r).length}function $w(r,s,a){var f=he(r)?ga:LC;return a&&Ot(r,s,a)&&(s=n),f(r,re(s,3))}var zw=ye(function(r,s){if(r==null)return[];var a=s.length;return a>1&&Ot(r,s[0],s[1])?s=[]:a>2&&Ot(s[0],s[1],s[2])&&(s=[s[0]]),Yh(r,Et(s,1),[])}),Ko=I0||function(){return Ct.Date.now()};function Kw(r,s){if(typeof s!="function")throw new sn(u);return r=_e(r),function(){if(--r<1)return s.apply(this,arguments)}}function $d(r,s,a){return s=a?n:s,s=r&&s==null?r.length:s,zn(r,ie,n,n,n,n,s)}function zd(r,s){var a;if(typeof s!="function")throw new sn(u);return r=_e(r),function(){return--r>0&&(a=s.apply(this,arguments)),r<=1&&(s=n),a}}var iu=ye(function(r,s,a){var f=U;if(a.length){var p=ir(a,yi(iu));f|=we}return zn(r,f,s,a,p)}),Kd=ye(function(r,s,a){var f=U|G;if(a.length){var p=ir(a,yi(Kd));f|=we}return zn(s,f,r,a,p)});function Gd(r,s,a){s=a?n:s;var f=zn(r,ne,n,n,n,n,n,s);return f.placeholder=Gd.placeholder,f}function Vd(r,s,a){s=a?n:s;var f=zn(r,le,n,n,n,n,n,s);return f.placeholder=Vd.placeholder,f}function qd(r,s,a){var f,p,v,E,w,S,O=0,P=!1,k=!1,V=!0;if(typeof r!="function")throw new sn(u);s=cn(s)||0,rt(a)&&(P=!!a.leading,k="maxWait"in a,v=k?ft(cn(a.maxWait)||0,s):v,V="trailing"in a?!!a.trailing:V);function Z(at){var vn=f,Yn=p;return f=p=n,O=at,E=r.apply(Yn,vn),E}function se(at){return O=at,w=ds(be,s),P?Z(at):E}function ge(at){var vn=at-S,Yn=at-O,hp=s-vn;return k?bt(hp,v-Yn):hp}function oe(at){var vn=at-S,Yn=at-O;return S===n||vn>=s||vn<0||k&&Yn>=v}function be(){var at=Ko();if(oe(at))return Ae(at);w=ds(be,ge(at))}function Ae(at){return w=n,V&&f?Z(at):(f=p=n,E)}function Xt(){w!==n&&rd(w),O=0,f=S=p=w=n}function Pt(){return w===n?E:Ae(Ko())}function jt(){var at=Ko(),vn=oe(at);if(f=arguments,p=this,S=at,vn){if(w===n)return se(S);if(k)return rd(w),w=ds(be,s),Z(S)}return w===n&&(w=ds(be,s)),E}return jt.cancel=Xt,jt.flush=Pt,jt}var Gw=ye(function(r,s){return Dh(r,1,s)}),Vw=ye(function(r,s,a){return Dh(r,cn(s)||0,a)});function qw(r){return zn(r,Ie)}function Go(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new sn(u);var a=function(){var f=arguments,p=s?s.apply(this,f):f[0],v=a.cache;if(v.has(p))return v.get(p);var E=r.apply(this,f);return a.cache=v.set(p,E)||v,E};return a.cache=new(Go.Cache||Hn),a}Go.Cache=Hn;function Vo(r){if(typeof r!="function")throw new sn(u);return function(){var s=arguments;switch(s.length){case 0:return!r.call(this);case 1:return!r.call(this,s[0]);case 2:return!r.call(this,s[0],s[1]);case 3:return!r.call(this,s[0],s[1],s[2])}return!r.apply(this,s)}}function Yw(r){return zd(2,r)}var Qw=kC(function(r,s){s=s.length==1&&he(s[0])?nt(s[0],qt(re())):nt(Et(s,1),qt(re()));var a=s.length;return ye(function(f){for(var p=-1,v=bt(f.length,a);++p<v;)f[p]=s[p].call(this,f[p]);return Vt(r,this,f)})}),su=ye(function(r,s){var a=ir(s,yi(su));return zn(r,we,n,s,a)}),Yd=ye(function(r,s){var a=ir(s,yi(Yd));return zn(r,Pe,n,s,a)}),Xw=Kn(function(r,s){return zn(r,Me,n,n,n,s)});function jw(r,s){if(typeof r!="function")throw new sn(u);return s=s===n?s:_e(s),ye(r,s)}function Jw(r,s){if(typeof r!="function")throw new sn(u);return s=s==null?0:ft(_e(s),0),ye(function(a){var f=a[s],p=ur(a,0,s);return f&&rr(p,f),Vt(r,this,p)})}function Zw(r,s,a){var f=!0,p=!0;if(typeof r!="function")throw new sn(u);return rt(a)&&(f="leading"in a?!!a.leading:f,p="trailing"in a?!!a.trailing:p),qd(r,s,{leading:f,maxWait:s,trailing:p})}function eI(r){return $d(r,1)}function tI(r,s){return su(za(s),r)}function nI(){if(!arguments.length)return[];var r=arguments[0];return he(r)?r:[r]}function rI(r){return ln(r,b)}function iI(r,s){return s=typeof s=="function"?s:n,ln(r,b,s)}function sI(r){return ln(r,g|b)}function oI(r,s){return s=typeof s=="function"?s:n,ln(r,g|b,s)}function lI(r,s){return s==null||kh(r,s,pt(s))}function mn(r,s){return r===s||r!==r&&s!==s}var aI=Uo(Oa),uI=Uo(function(r,s){return r>=s}),Mr=Hh(function(){return arguments}())?Hh:function(r){return st(r)&&Ke.call(r,"callee")&&!Rh.call(r,"callee")},he=A.isArray,cI=ah?qt(ah):vC;function Ut(r){return r!=null&&qo(r.length)&&!Vn(r)}function lt(r){return st(r)&&Ut(r)}function fI(r){return r===!0||r===!1||st(r)&&Nt(r)==j}var cr=T0||gu,hI=uh?qt(uh):yC;function dI(r){return st(r)&&r.nodeType===1&&!ps(r)}function pI(r){if(r==null)return!0;if(Ut(r)&&(he(r)||typeof r=="string"||typeof r.splice=="function"||cr(r)||Ci(r)||Mr(r)))return!r.length;var s=Tt(r);if(s==I||s==B)return!r.size;if(hs(r))return!La(r).length;for(var a in r)if(Ke.call(r,a))return!1;return!0}function _I(r,s){return us(r,s)}function gI(r,s,a){a=typeof a=="function"?a:n;var f=a?a(r,s):n;return f===n?us(r,s,n,a):!!f}function ou(r){if(!st(r))return!1;var s=Nt(r);return s==de||s==Ge||typeof r.message=="string"&&typeof r.name=="string"&&!ps(r)}function mI(r){return typeof r=="number"&&xh(r)}function Vn(r){if(!rt(r))return!1;var s=Nt(r);return s==ce||s==C||s==K||s==q}function Qd(r){return typeof r=="number"&&r==_e(r)}function qo(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Se}function rt(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}function st(r){return r!=null&&typeof r=="object"}var Xd=ch?qt(ch):EC;function vI(r,s){return r===s||Ma(r,s,Xa(s))}function yI(r,s,a){return a=typeof a=="function"?a:n,Ma(r,s,Xa(s),a)}function CI(r){return jd(r)&&r!=+r}function EI(r){if(iE(r))throw new fe(l);return $h(r)}function wI(r){return r===null}function II(r){return r==null}function jd(r){return typeof r=="number"||st(r)&&Nt(r)==x}function ps(r){if(!st(r)||Nt(r)!=M)return!1;var s=Co(r);if(s===null)return!0;var a=Ke.call(s,"constructor")&&s.constructor;return typeof a=="function"&&a instanceof a&&go.call(a)==y0}var lu=fh?qt(fh):wC;function bI(r){return Qd(r)&&r>=-Se&&r<=Se}var Jd=hh?qt(hh):IC;function Yo(r){return typeof r=="string"||!he(r)&&st(r)&&Nt(r)==F}function Qt(r){return typeof r=="symbol"||st(r)&&Nt(r)==te}var Ci=dh?qt(dh):bC;function TI(r){return r===n}function SI(r){return st(r)&&Tt(r)==ee}function RI(r){return st(r)&&Nt(r)==ue}var AI=Uo(ka),xI=Uo(function(r,s){return r<=s});function Zd(r){if(!r)return[];if(Ut(r))return Yo(r)?_n(r):Ft(r);if(ts&&r[ts])return l0(r[ts]());var s=Tt(r),a=s==I?wa:s==B?ho:Ei;return a(r)}function qn(r){if(!r)return r===0?r:0;if(r=cn(r),r===Ne||r===-Ne){var s=r<0?-1:1;return s*Lt}return r===r?r:0}function _e(r){var s=qn(r),a=s%1;return s===s?a?s-a:s:0}function ep(r){return r?xr(_e(r),0,ut):0}function cn(r){if(typeof r=="number")return r;if(Qt(r))return pn;if(rt(r)){var s=typeof r.valueOf=="function"?r.valueOf():r;r=rt(s)?s+"":s}if(typeof r!="string")return r===0?r:+r;r=yh(r);var a=cy.test(r);return a||hy.test(r)?Ky(r.slice(2),a?2:8):uy.test(r)?pn:+r}function tp(r){return An(r,Wt(r))}function NI(r){return r?xr(_e(r),-Se,Se):r===0?r:0}function Be(r){return r==null?"":Yt(r)}var OI=mi(function(r,s){if(hs(s)||Ut(s)){An(s,pt(s),r);return}for(var a in s)Ke.call(s,a)&&os(r,a,s[a])}),np=mi(function(r,s){An(s,Wt(s),r)}),Qo=mi(function(r,s,a,f){An(s,Wt(s),r,f)}),PI=mi(function(r,s,a,f){An(s,pt(s),r,f)}),MI=Kn(Aa);function LI(r,s){var a=gi(r);return s==null?a:Lh(a,s)}var kI=ye(function(r,s){r=Ve(r);var a=-1,f=s.length,p=f>2?s[2]:n;for(p&&Ot(s[0],s[1],p)&&(f=1);++a<f;)for(var v=s[a],E=Wt(v),w=-1,S=E.length;++w<S;){var O=E[w],P=r[O];(P===n||mn(P,di[O])&&!Ke.call(r,O))&&(r[O]=v[O])}return r}),DI=ye(function(r){return r.push(n,yd),Vt(rp,n,r)});function FI(r,s){return _h(r,re(s,3),Rn)}function UI(r,s){return _h(r,re(s,3),Na)}function WI(r,s){return r==null?r:xa(r,re(s,3),Wt)}function BI(r,s){return r==null?r:Wh(r,re(s,3),Wt)}function HI(r,s){return r&&Rn(r,re(s,3))}function $I(r,s){return r&&Na(r,re(s,3))}function zI(r){return r==null?[]:No(r,pt(r))}function KI(r){return r==null?[]:No(r,Wt(r))}function au(r,s,a){var f=r==null?n:Nr(r,s);return f===n?a:f}function GI(r,s){return r!=null&&wd(r,s,pC)}function uu(r,s){return r!=null&&wd(r,s,_C)}var VI=pd(function(r,s,a){s!=null&&typeof s.toString!="function"&&(s=mo.call(s)),r[s]=a},fu(Bt)),qI=pd(function(r,s,a){s!=null&&typeof s.toString!="function"&&(s=mo.call(s)),Ke.call(r,s)?r[s].push(a):r[s]=[a]},re),YI=ye(as);function pt(r){return Ut(r)?Ph(r):La(r)}function Wt(r){return Ut(r)?Ph(r,!0):TC(r)}function QI(r,s){var a={};return s=re(s,3),Rn(r,function(f,p,v){$n(a,s(f,p,v),f)}),a}function XI(r,s){var a={};return s=re(s,3),Rn(r,function(f,p,v){$n(a,p,s(f,p,v))}),a}var jI=mi(function(r,s,a){Oo(r,s,a)}),rp=mi(function(r,s,a,f){Oo(r,s,a,f)}),JI=Kn(function(r,s){var a={};if(r==null)return a;var f=!1;s=nt(s,function(v){return v=ar(v,r),f||(f=v.length>1),v}),An(r,Ya(r),a),f&&(a=ln(a,g|y|b,VC));for(var p=s.length;p--;)Ba(a,s[p]);return a});function ZI(r,s){return ip(r,Vo(re(s)))}var eb=Kn(function(r,s){return r==null?{}:RC(r,s)});function ip(r,s){if(r==null)return{};var a=nt(Ya(r),function(f){return[f]});return s=re(s),Qh(r,a,function(f,p){return s(f,p[0])})}function tb(r,s,a){s=ar(s,r);var f=-1,p=s.length;for(p||(p=1,r=n);++f<p;){var v=r==null?n:r[xn(s[f])];v===n&&(f=p,v=a),r=Vn(v)?v.call(r):v}return r}function nb(r,s,a){return r==null?r:cs(r,s,a)}function rb(r,s,a,f){return f=typeof f=="function"?f:n,r==null?r:cs(r,s,a,f)}var sp=md(pt),op=md(Wt);function ib(r,s,a){var f=he(r),p=f||cr(r)||Ci(r);if(s=re(s,4),a==null){var v=r&&r.constructor;p?a=f?new v:[]:rt(r)?a=Vn(v)?gi(Co(r)):{}:a={}}return(p?rn:Rn)(r,function(E,w,S){return s(a,E,w,S)}),a}function sb(r,s){return r==null?!0:Ba(r,s)}function ob(r,s,a){return r==null?r:ed(r,s,za(a))}function lb(r,s,a,f){return f=typeof f=="function"?f:n,r==null?r:ed(r,s,za(a),f)}function Ei(r){return r==null?[]:Ea(r,pt(r))}function ab(r){return r==null?[]:Ea(r,Wt(r))}function ub(r,s,a){return a===n&&(a=s,s=n),a!==n&&(a=cn(a),a=a===a?a:0),s!==n&&(s=cn(s),s=s===s?s:0),xr(cn(r),s,a)}function cb(r,s,a){return s=qn(s),a===n?(a=s,s=0):a=qn(a),r=cn(r),gC(r,s,a)}function fb(r,s,a){if(a&&typeof a!="boolean"&&Ot(r,s,a)&&(s=a=n),a===n&&(typeof s=="boolean"?(a=s,s=n):typeof r=="boolean"&&(a=r,r=n)),r===n&&s===n?(r=0,s=1):(r=qn(r),s===n?(s=r,r=0):s=qn(s)),r>s){var f=r;r=s,s=f}if(a||r%1||s%1){var p=Nh();return bt(r+p*(s-r+zy("1e-"+((p+"").length-1))),s)}return Fa(r,s)}var hb=vi(function(r,s,a){return s=s.toLowerCase(),r+(a?lp(s):s)});function lp(r){return cu(Be(r).toLowerCase())}function ap(r){return r=Be(r),r&&r.replace(py,n0).replace(My,"")}function db(r,s,a){r=Be(r),s=Yt(s);var f=r.length;a=a===n?f:xr(_e(a),0,f);var p=a;return a-=s.length,a>=0&&r.slice(a,p)==s}function pb(r){return r=Be(r),r&&Yv.test(r)?r.replace(Wf,r0):r}function _b(r){return r=Be(r),r&&ey.test(r)?r.replace(sa,"\\$&"):r}var gb=vi(function(r,s,a){return r+(a?"-":"")+s.toLowerCase()}),mb=vi(function(r,s,a){return r+(a?" ":"")+s.toLowerCase()}),vb=fd("toLowerCase");function yb(r,s,a){r=Be(r),s=_e(s);var f=s?fi(r):0;if(!s||f>=s)return r;var p=(s-f)/2;return Fo(bo(p),a)+r+Fo(Io(p),a)}function Cb(r,s,a){r=Be(r),s=_e(s);var f=s?fi(r):0;return s&&f<s?r+Fo(s-f,a):r}function Eb(r,s,a){r=Be(r),s=_e(s);var f=s?fi(r):0;return s&&f<s?Fo(s-f,a)+r:r}function wb(r,s,a){return a||s==null?s=0:s&&(s=+s),x0(Be(r).replace(oa,""),s||0)}function Ib(r,s,a){return(a?Ot(r,s,a):s===n)?s=1:s=_e(s),Ua(Be(r),s)}function bb(){var r=arguments,s=Be(r[0]);return r.length<3?s:s.replace(r[1],r[2])}var Tb=vi(function(r,s,a){return r+(a?"_":"")+s.toLowerCase()});function Sb(r,s,a){return a&&typeof a!="number"&&Ot(r,s,a)&&(s=a=n),a=a===n?ut:a>>>0,a?(r=Be(r),r&&(typeof s=="string"||s!=null&&!lu(s))&&(s=Yt(s),!s&&ci(r))?ur(_n(r),0,a):r.split(s,a)):[]}var Rb=vi(function(r,s,a){return r+(a?" ":"")+cu(s)});function Ab(r,s,a){return r=Be(r),a=a==null?0:xr(_e(a),0,r.length),s=Yt(s),r.slice(a,a+s.length)==s}function xb(r,s,a){var f=m.templateSettings;a&&Ot(r,s,a)&&(s=n),r=Be(r),s=Qo({},s,f,vd);var p=Qo({},s.imports,f.imports,vd),v=pt(p),E=Ea(p,v),w,S,O=0,P=s.interpolate||lo,k="__p += '",V=Ia((s.escape||lo).source+"|"+P.source+"|"+(P===Bf?ay:lo).source+"|"+(s.evaluate||lo).source+"|$","g"),Z="//# sourceURL="+(Ke.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Uy+"]")+`
`;r.replace(V,function(oe,be,Ae,Xt,Pt,jt){return Ae||(Ae=Xt),k+=r.slice(O,jt).replace(_y,i0),be&&(w=!0,k+=`' +
__e(`+be+`) +
'`),Pt&&(S=!0,k+=`';
`+Pt+`;
__p += '`),Ae&&(k+=`' +
((__t = (`+Ae+`)) == null ? '' : __t) +
'`),O=jt+oe.length,oe}),k+=`';
`;var se=Ke.call(s,"variable")&&s.variable;if(!se)k=`with (obj) {
`+k+`
}
`;else if(oy.test(se))throw new fe(c);k=(S?k.replace(oo,""):k).replace(Gv,"$1").replace(Vv,"$1;"),k="function("+(se||"obj")+`) {
`+(se?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(w?", __e = _.escape":"")+(S?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+k+`return __p
}`;var ge=cp(function(){return Fe(v,Z+"return "+k).apply(n,E)});if(ge.source=k,ou(ge))throw ge;return ge}function Nb(r){return Be(r).toLowerCase()}function Ob(r){return Be(r).toUpperCase()}function Pb(r,s,a){if(r=Be(r),r&&(a||s===n))return yh(r);if(!r||!(s=Yt(s)))return r;var f=_n(r),p=_n(s),v=Ch(f,p),E=Eh(f,p)+1;return ur(f,v,E).join("")}function Mb(r,s,a){if(r=Be(r),r&&(a||s===n))return r.slice(0,Ih(r)+1);if(!r||!(s=Yt(s)))return r;var f=_n(r),p=Eh(f,_n(s))+1;return ur(f,0,p).join("")}function Lb(r,s,a){if(r=Be(r),r&&(a||s===n))return r.replace(oa,"");if(!r||!(s=Yt(s)))return r;var f=_n(r),p=Ch(f,_n(s));return ur(f,p).join("")}function kb(r,s){var a=$e,f=xe;if(rt(s)){var p="separator"in s?s.separator:p;a="length"in s?_e(s.length):a,f="omission"in s?Yt(s.omission):f}r=Be(r);var v=r.length;if(ci(r)){var E=_n(r);v=E.length}if(a>=v)return r;var w=a-fi(f);if(w<1)return f;var S=E?ur(E,0,w).join(""):r.slice(0,w);if(p===n)return S+f;if(E&&(w+=S.length-w),lu(p)){if(r.slice(w).search(p)){var O,P=S;for(p.global||(p=Ia(p.source,Be(Hf.exec(p))+"g")),p.lastIndex=0;O=p.exec(P);)var k=O.index;S=S.slice(0,k===n?w:k)}}else if(r.indexOf(Yt(p),w)!=w){var V=S.lastIndexOf(p);V>-1&&(S=S.slice(0,V))}return S+f}function Db(r){return r=Be(r),r&&qv.test(r)?r.replace(Uf,f0):r}var Fb=vi(function(r,s,a){return r+(a?" ":"")+s.toUpperCase()}),cu=fd("toUpperCase");function up(r,s,a){return r=Be(r),s=a?n:s,s===n?o0(r)?p0(r):jy(r):r.match(s)||[]}var cp=ye(function(r,s){try{return Vt(r,n,s)}catch(a){return ou(a)?a:new fe(a)}}),Ub=Kn(function(r,s){return rn(s,function(a){a=xn(a),$n(r,a,iu(r[a],r))}),r});function Wb(r){var s=r==null?0:r.length,a=re();return r=s?nt(r,function(f){if(typeof f[1]!="function")throw new sn(u);return[a(f[0]),f[1]]}):[],ye(function(f){for(var p=-1;++p<s;){var v=r[p];if(Vt(v[0],this,f))return Vt(v[1],this,f)}})}function Bb(r){return fC(ln(r,g))}function fu(r){return function(){return r}}function Hb(r,s){return r==null||r!==r?s:r}var $b=dd(),zb=dd(!0);function Bt(r){return r}function hu(r){return zh(typeof r=="function"?r:ln(r,g))}function Kb(r){return Gh(ln(r,g))}function Gb(r,s){return Vh(r,ln(s,g))}var Vb=ye(function(r,s){return function(a){return as(a,r,s)}}),qb=ye(function(r,s){return function(a){return as(r,a,s)}});function du(r,s,a){var f=pt(s),p=No(s,f);a==null&&!(rt(s)&&(p.length||!f.length))&&(a=s,s=r,r=this,p=No(s,pt(s)));var v=!(rt(a)&&"chain"in a)||!!a.chain,E=Vn(r);return rn(p,function(w){var S=s[w];r[w]=S,E&&(r.prototype[w]=function(){var O=this.__chain__;if(v||O){var P=r(this.__wrapped__),k=P.__actions__=Ft(this.__actions__);return k.push({func:S,args:arguments,thisArg:r}),P.__chain__=O,P}return S.apply(r,rr([this.value()],arguments))})}),r}function Yb(){return Ct._===this&&(Ct._=C0),this}function pu(){}function Qb(r){return r=_e(r),ye(function(s){return qh(s,r)})}var Xb=Ga(nt),jb=Ga(ph),Jb=Ga(ga);function fp(r){return Ja(r)?ma(xn(r)):AC(r)}function Zb(r){return function(s){return r==null?n:Nr(r,s)}}var eT=_d(),tT=_d(!0);function _u(){return[]}function gu(){return!1}function nT(){return{}}function rT(){return""}function iT(){return!0}function sT(r,s){if(r=_e(r),r<1||r>Se)return[];var a=ut,f=bt(r,ut);s=re(s),r-=ut;for(var p=Ca(f,s);++a<r;)s(a);return p}function oT(r){return he(r)?nt(r,xn):Qt(r)?[r]:Ft(Od(Be(r)))}function lT(r){var s=++v0;return Be(r)+s}var aT=Do(function(r,s){return r+s},0),uT=Va("ceil"),cT=Do(function(r,s){return r/s},1),fT=Va("floor");function hT(r){return r&&r.length?xo(r,Bt,Oa):n}function dT(r,s){return r&&r.length?xo(r,re(s,2),Oa):n}function pT(r){return mh(r,Bt)}function _T(r,s){return mh(r,re(s,2))}function gT(r){return r&&r.length?xo(r,Bt,ka):n}function mT(r,s){return r&&r.length?xo(r,re(s,2),ka):n}var vT=Do(function(r,s){return r*s},1),yT=Va("round"),CT=Do(function(r,s){return r-s},0);function ET(r){return r&&r.length?ya(r,Bt):0}function wT(r,s){return r&&r.length?ya(r,re(s,2)):0}return m.after=Kw,m.ary=$d,m.assign=OI,m.assignIn=np,m.assignInWith=Qo,m.assignWith=PI,m.at=MI,m.before=zd,m.bind=iu,m.bindAll=Ub,m.bindKey=Kd,m.castArray=nI,m.chain=Wd,m.chunk=fE,m.compact=hE,m.concat=dE,m.cond=Wb,m.conforms=Bb,m.constant=fu,m.countBy=Ew,m.create=LI,m.curry=Gd,m.curryRight=Vd,m.debounce=qd,m.defaults=kI,m.defaultsDeep=DI,m.defer=Gw,m.delay=Vw,m.difference=pE,m.differenceBy=_E,m.differenceWith=gE,m.drop=mE,m.dropRight=vE,m.dropRightWhile=yE,m.dropWhile=CE,m.fill=EE,m.filter=Iw,m.flatMap=Sw,m.flatMapDeep=Rw,m.flatMapDepth=Aw,m.flatten=kd,m.flattenDeep=wE,m.flattenDepth=IE,m.flip=qw,m.flow=$b,m.flowRight=zb,m.fromPairs=bE,m.functions=zI,m.functionsIn=KI,m.groupBy=xw,m.initial=SE,m.intersection=RE,m.intersectionBy=AE,m.intersectionWith=xE,m.invert=VI,m.invertBy=qI,m.invokeMap=Ow,m.iteratee=hu,m.keyBy=Pw,m.keys=pt,m.keysIn=Wt,m.map=zo,m.mapKeys=QI,m.mapValues=XI,m.matches=Kb,m.matchesProperty=Gb,m.memoize=Go,m.merge=jI,m.mergeWith=rp,m.method=Vb,m.methodOf=qb,m.mixin=du,m.negate=Vo,m.nthArg=Qb,m.omit=JI,m.omitBy=ZI,m.once=Yw,m.orderBy=Mw,m.over=Xb,m.overArgs=Qw,m.overEvery=jb,m.overSome=Jb,m.partial=su,m.partialRight=Yd,m.partition=Lw,m.pick=eb,m.pickBy=ip,m.property=fp,m.propertyOf=Zb,m.pull=ME,m.pullAll=Fd,m.pullAllBy=LE,m.pullAllWith=kE,m.pullAt=DE,m.range=eT,m.rangeRight=tT,m.rearg=Xw,m.reject=Fw,m.remove=FE,m.rest=jw,m.reverse=nu,m.sampleSize=Ww,m.set=nb,m.setWith=rb,m.shuffle=Bw,m.slice=UE,m.sortBy=zw,m.sortedUniq=GE,m.sortedUniqBy=VE,m.split=Sb,m.spread=Jw,m.tail=qE,m.take=YE,m.takeRight=QE,m.takeRightWhile=XE,m.takeWhile=jE,m.tap=hw,m.throttle=Zw,m.thru=$o,m.toArray=Zd,m.toPairs=sp,m.toPairsIn=op,m.toPath=oT,m.toPlainObject=tp,m.transform=ib,m.unary=eI,m.union=JE,m.unionBy=ZE,m.unionWith=ew,m.uniq=tw,m.uniqBy=nw,m.uniqWith=rw,m.unset=sb,m.unzip=ru,m.unzipWith=Ud,m.update=ob,m.updateWith=lb,m.values=Ei,m.valuesIn=ab,m.without=iw,m.words=up,m.wrap=tI,m.xor=sw,m.xorBy=ow,m.xorWith=lw,m.zip=aw,m.zipObject=uw,m.zipObjectDeep=cw,m.zipWith=fw,m.entries=sp,m.entriesIn=op,m.extend=np,m.extendWith=Qo,du(m,m),m.add=aT,m.attempt=cp,m.camelCase=hb,m.capitalize=lp,m.ceil=uT,m.clamp=ub,m.clone=rI,m.cloneDeep=sI,m.cloneDeepWith=oI,m.cloneWith=iI,m.conformsTo=lI,m.deburr=ap,m.defaultTo=Hb,m.divide=cT,m.endsWith=db,m.eq=mn,m.escape=pb,m.escapeRegExp=_b,m.every=ww,m.find=bw,m.findIndex=Md,m.findKey=FI,m.findLast=Tw,m.findLastIndex=Ld,m.findLastKey=UI,m.floor=fT,m.forEach=Bd,m.forEachRight=Hd,m.forIn=WI,m.forInRight=BI,m.forOwn=HI,m.forOwnRight=$I,m.get=au,m.gt=aI,m.gte=uI,m.has=GI,m.hasIn=uu,m.head=Dd,m.identity=Bt,m.includes=Nw,m.indexOf=TE,m.inRange=cb,m.invoke=YI,m.isArguments=Mr,m.isArray=he,m.isArrayBuffer=cI,m.isArrayLike=Ut,m.isArrayLikeObject=lt,m.isBoolean=fI,m.isBuffer=cr,m.isDate=hI,m.isElement=dI,m.isEmpty=pI,m.isEqual=_I,m.isEqualWith=gI,m.isError=ou,m.isFinite=mI,m.isFunction=Vn,m.isInteger=Qd,m.isLength=qo,m.isMap=Xd,m.isMatch=vI,m.isMatchWith=yI,m.isNaN=CI,m.isNative=EI,m.isNil=II,m.isNull=wI,m.isNumber=jd,m.isObject=rt,m.isObjectLike=st,m.isPlainObject=ps,m.isRegExp=lu,m.isSafeInteger=bI,m.isSet=Jd,m.isString=Yo,m.isSymbol=Qt,m.isTypedArray=Ci,m.isUndefined=TI,m.isWeakMap=SI,m.isWeakSet=RI,m.join=NE,m.kebabCase=gb,m.last=un,m.lastIndexOf=OE,m.lowerCase=mb,m.lowerFirst=vb,m.lt=AI,m.lte=xI,m.max=hT,m.maxBy=dT,m.mean=pT,m.meanBy=_T,m.min=gT,m.minBy=mT,m.stubArray=_u,m.stubFalse=gu,m.stubObject=nT,m.stubString=rT,m.stubTrue=iT,m.multiply=vT,m.nth=PE,m.noConflict=Yb,m.noop=pu,m.now=Ko,m.pad=yb,m.padEnd=Cb,m.padStart=Eb,m.parseInt=wb,m.random=fb,m.reduce=kw,m.reduceRight=Dw,m.repeat=Ib,m.replace=bb,m.result=tb,m.round=yT,m.runInContext=T,m.sample=Uw,m.size=Hw,m.snakeCase=Tb,m.some=$w,m.sortedIndex=WE,m.sortedIndexBy=BE,m.sortedIndexOf=HE,m.sortedLastIndex=$E,m.sortedLastIndexBy=zE,m.sortedLastIndexOf=KE,m.startCase=Rb,m.startsWith=Ab,m.subtract=CT,m.sum=ET,m.sumBy=wT,m.template=xb,m.times=sT,m.toFinite=qn,m.toInteger=_e,m.toLength=ep,m.toLower=Nb,m.toNumber=cn,m.toSafeInteger=NI,m.toString=Be,m.toUpper=Ob,m.trim=Pb,m.trimEnd=Mb,m.trimStart=Lb,m.truncate=kb,m.unescape=Db,m.uniqueId=lT,m.upperCase=Fb,m.upperFirst=cu,m.each=Bd,m.eachRight=Hd,m.first=Dd,du(m,function(){var r={};return Rn(m,function(s,a){Ke.call(m.prototype,a)||(r[a]=s)}),r}(),{chain:!1}),m.VERSION=i,rn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){m[r].placeholder=m}),rn(["drop","take"],function(r,s){Re.prototype[r]=function(a){a=a===n?1:ft(_e(a),0);var f=this.__filtered__&&!s?new Re(this):this.clone();return f.__filtered__?f.__takeCount__=bt(a,f.__takeCount__):f.__views__.push({size:bt(a,ut),type:r+(f.__dir__<0?"Right":"")}),f},Re.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),rn(["filter","map","takeWhile"],function(r,s){var a=s+1,f=a==Un||a==ot;Re.prototype[r]=function(p){var v=this.clone();return v.__iteratees__.push({iteratee:re(p,3),type:a}),v.__filtered__=v.__filtered__||f,v}}),rn(["head","last"],function(r,s){var a="take"+(s?"Right":"");Re.prototype[r]=function(){return this[a](1).value()[0]}}),rn(["initial","tail"],function(r,s){var a="drop"+(s?"":"Right");Re.prototype[r]=function(){return this.__filtered__?new Re(this):this[a](1)}}),Re.prototype.compact=function(){return this.filter(Bt)},Re.prototype.find=function(r){return this.filter(r).head()},Re.prototype.findLast=function(r){return this.reverse().find(r)},Re.prototype.invokeMap=ye(function(r,s){return typeof r=="function"?new Re(this):this.map(function(a){return as(a,r,s)})}),Re.prototype.reject=function(r){return this.filter(Vo(re(r)))},Re.prototype.slice=function(r,s){r=_e(r);var a=this;return a.__filtered__&&(r>0||s<0)?new Re(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),s!==n&&(s=_e(s),a=s<0?a.dropRight(-s):a.take(s-r)),a)},Re.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Re.prototype.toArray=function(){return this.take(ut)},Rn(Re.prototype,function(r,s){var a=/^(?:filter|find|map|reject)|While$/.test(s),f=/^(?:head|last)$/.test(s),p=m[f?"take"+(s=="last"?"Right":""):s],v=f||/^find/.test(s);!p||(m.prototype[s]=function(){var E=this.__wrapped__,w=f?[1]:arguments,S=E instanceof Re,O=w[0],P=S||he(E),k=function(be){var Ae=p.apply(m,rr([be],w));return f&&V?Ae[0]:Ae};P&&a&&typeof O=="function"&&O.length!=1&&(S=P=!1);var V=this.__chain__,Z=!!this.__actions__.length,se=v&&!V,ge=S&&!Z;if(!v&&P){E=ge?E:new Re(this);var oe=r.apply(E,w);return oe.__actions__.push({func:$o,args:[k],thisArg:n}),new on(oe,V)}return se&&ge?r.apply(this,w):(oe=this.thru(k),se?f?oe.value()[0]:oe.value():oe)})}),rn(["pop","push","shift","sort","splice","unshift"],function(r){var s=po[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",f=/^(?:pop|shift)$/.test(r);m.prototype[r]=function(){var p=arguments;if(f&&!this.__chain__){var v=this.value();return s.apply(he(v)?v:[],p)}return this[a](function(E){return s.apply(he(E)?E:[],p)})}}),Rn(Re.prototype,function(r,s){var a=m[s];if(a){var f=a.name+"";Ke.call(_i,f)||(_i[f]=[]),_i[f].push({name:s,func:a})}}),_i[ko(n,G).name]=[{name:"wrapper",func:n}],Re.prototype.clone=D0,Re.prototype.reverse=F0,Re.prototype.value=U0,m.prototype.at=dw,m.prototype.chain=pw,m.prototype.commit=_w,m.prototype.next=gw,m.prototype.plant=vw,m.prototype.reverse=yw,m.prototype.toJSON=m.prototype.valueOf=m.prototype.value=Cw,m.prototype.first=m.prototype.head,ts&&(m.prototype[ts]=mw),m},hi=_0();Tr?((Tr.exports=hi)._=hi,ha._=hi):Ct._=hi}).call(to)})(Rf,Rf.exports);var fM=Rf.exports,Af={exports:{}},WO=pv;function pv(t,e,n){t=t||{},this.handleQuery=n,this.options=t,this.locals=this.options.locals||{},this.globals=this.options.globals||{},this.rootContext=xf(t.data,t.rootContext,t.context,t.source),this.parent=t.parent,this.override=t.override,this.filters=t.filters||{},this.params=e||t.params||[],this.context=xf(t.currentItem,t.context,t.source),this.currentItem=xf(this.context,t.rootContext,t.data),this.currentKey=null,this.currentReferences=[],this.currentParents=[]}pv.prototype={setCurrent:function(t,e){(this.currentItem||this.currentKey||this.currentParents.length>0)&&this.currentParents.push({key:this.currentKey,value:this.currentItem}),this.currentItem=e,this.currentKey=t},resetCurrent:function(){this.currentItem=null,this.currentKey=null,this.currentParents=[]},force:function(t){var e=this.currentParents[this.currentParents.length-1];return!this.currentItem&&e&&this.currentKey!=null&&(this.currentItem=t||{},e.value[this.currentKey]=this.currentItem),!!this.currentItem},getLocal:function(t){if(~t.indexOf("/")){for(var e=null,n=t.split("/"),i=0;i<n.length;i++){var o=n[i];i==0?e=this.locals[o]:e&&e[o]&&(e=e[o])}return e}else return this.locals[t]},getGlobal:function(t){if(~t.indexOf("/")){for(var e=null,n=t.split("/"),i=0;i<n.length;i++){var o=n[i];i==0?e=this.globals[o]:e&&e[o]&&(e=e[o])}return e}else return this.globals[t]},getFilter:function(t){if(~t.indexOf("/")){for(var e=null,n=t.split("/"),i=0;i<n.length;i++){var o=n[i];i==0?e=this.filters[o]:e&&e[o]&&(e=e[o])}return e}else return this.filters[t]},addReferences:function(t){t&&t.forEach(this.addReference,this)},addReference:function(t){t instanceof Object&&!~this.currentReferences.indexOf(t)&&this.currentReferences.push(t)},getValues:function(t,e){return t.map(this.getValue,this)},getValue:function(t){return this.getValueFrom(t,null)},getValueFrom:function(t,e){if(t._param!=null)return this.params[t._param];if(t._sub){var n=_v(this.options);n.force=null,n.currentItem=e;var i=this.handleQuery(t._sub,n,this.params);return this.addReferences(i.references),i.value}else return t},deepQuery:function(t,e,n,i){for(var o in t)if(o in t){var n=_v(this.options);n.currentItem=t[o];var l=this.handleQuery(e,n,this.params);if(l.value)return l}return null}};function xf(t){for(var e=0;e<arguments.length;e++)if(arguments[e]!=null)return arguments[e]}function _v(t){var e={};if(t)for(var n in t)n in t&&(e[n]=t[n]);return e}var gv={exports:{}},BO=HO;function HO(t,e,n){var i=n&&n.max||1/0,o=n&&n.includeDelimiters||!1,l=0,u=0,c=[],h=[];t.replace(/([\[\(\{])|([\]\)\}])/g,function(y,b,R,W){b?(l===0&&h.push([u,W]),l+=1):R&&(l-=1,l===0&&(u=W+y.length))}),l===0&&u<t.length&&h.push([u,t.length]),u=0;for(var d=0;d<h.length&&i>0;d++)for(var _=h[d][0],g=e.exec(t.slice(_,h[d][1]));g&&i>1;_+=g.index+g[0].length,u=_,g=e.exec(t.slice(_,h[d][1])))c.push(t.slice(u,g.index+_)),o&&c.push(g[0]),i-=1;return u<t.length&&c.push(t.slice(u)),c}(function(t){var e=BO;t.exports=function(d,_){if(!d)return[];var g=[],y,b=d.charAt(0),R=0,W=0,U=0,G=0,J=0,ne="get",le=null;_&&(d=h(d));var we={".":{mode:"get"},":":{mode:"filter"},"|":{handle:"or"},"[":{open:"select"},"]":{close:"select"},"{":{open:"meta"},"}":{close:"meta"},"(":{open:"args"},")":{close:"args"}};function Pe(xe){le?le.push(xe):g.push(xe)}var ie={get:function(xe){var Ze=typeof xe=="string"?xe.trim():null;Ze&&Pe({get:Ze})},select:function(xe){if(xe)Pe(i(xe));else{var Ze={deep:[]};g.push(Ze),le=Ze.deep}},filter:function(xe){xe&&Pe({filter:xe.trim()})},or:function(){le=null,g.push({or:!0}),U=Ie+1},args:function(xe){var Ze=n(xe);g[g.length-1].args=Ze}};function Me(){var xe=d.slice(R,W);ie[ne]&&ie[ne](xe),ne="get",R=W+1}for(var Ie=0;Ie<d.length;Ie++){y=b,b=d.charAt(Ie+1),G=Ie-U,G===0&&y!==":"&&y!=="."&&g.push({root:!0}),G===0&&y==="."&&b==="."&&g.push({parent:!0});var $e=we[y];$e&&(J===0&&($e.mode||$e.open)&&(Me(),ne=$e.mode||$e.open),J===0&&$e.handle&&(Me(),ie[$e.handle]()),$e.open?J+=1:$e.close&&(J-=1),J===0&&$e.close&&Me()),W=Ie+1}return Me(),g};function n(d){return d===","?[","]:e(d,/,/).map(function(_){return u(_.trim())})}function i(d){if(d==="*")return{values:!0};if(d==="**")return{values:!0,deep:!0};var _=!1;d.charAt(0)==="*"&&(_=!0,d=d.slice(1));var g=e(d,/&|\|/,{includeDelimiters:!0});if(g.length>1){for(var y=[o(g[0].trim())],b=1;b<g.length;b+=2){var R=o(g[b+1].trim());R&&(R.booleanOp=g[b],y.push(R))}return{multiple:_,boolean:!0,select:y}}else{var y=o(d.trim());return y?(_&&(y.multiple=!0),y):{get:u(d.trim())}}}function o(d){var _=e(d,/(!)?(=|~|\:|<=|>=|<|>)/,{max:2,includeDelimiters:!0});if(_.length===3){var g=_[1].charAt(0)==="!",y=u(_[0].trim()),b={negate:g,op:g?_[1].slice(1):_[1]};if(b.op===":")b.select=[y,{_sub:t.exports(":"+_[2].trim())}];else if(b.op==="~"){var R=u(_[2].trim());if(typeof R=="string"){var W=_[2].trim().match(/^\/(.*)\/([a-z]?)$/);W?b.select=[y,new RegExp(W[1],W[2])]:b.select=[y,R]}else b.select=[y,R]}else b.select=[y,u(_[2].trim())];return b}}function l(d){return d.charAt(0)==="{"&&d.charAt(d.length-1)==="}"}function u(d){if(l(d)){var _=d.slice(1,-1);return{_sub:t.exports(_)}}else return c(d)}function c(d){if(d.charAt(0)==="?"){var _=parseInt(d.slice(1));return isNaN(_)?d:{_param:_}}else return d}function h(d){var _=0;return d.replace(/\?/g,function(g){return g+_++})}})(gv);var $O=WO,zO=gv.exports,Nf={};Af.exports=function(e,n){var i=n&&n.params||null;return Array.isArray(e)&&(i=e.slice(1),e=e[0]),Nf[e]||(Nf[e]=zO(e,!0)),mv(Nf[e],n,i)};Af.exports.lastParent=function(t){var e=t.parents[t.parents.length-1];return e?e.value:null};function mv(t,e,n){for(var i=new $O(e,n,mv),o=0;o<t.length&&!vv(t[o],i);o++);if(vv(null,i),i.currentItem instanceof Object)i.addReference(i.currentItem);else{var l=qO(i.currentParents);l&&i.addReference(l)}return{value:i.currentItem,key:i.currentKey,references:i.currentReferences,parents:i.currentParents}}function vv(t,e){if(t==null)!e.currentItem&&e.options.force&&e.force(e.options.force);else if(t.values)if(e.currentItem){var n=Object.keys(e.currentItem),i=[];n.forEach(function(g){t.deep&&Array.isArray(e.currentItem[g])?e.currentItem[g].forEach(function(y){i.push(y)}):i.push(e.currentItem[g])}),e.setCurrent(n,i)}else e.setCurrent(n,[]);else if(t.get){var o=e.getValue(t.get);if(GO(e,o))e.setCurrent(o,e.override[o]);else if(e.currentItem||e.options.force&&e.force({}))if(VO(e.currentItem,o)||t.multiple){var i=e.currentItem.map(function(y){return y[o]}).filter(KO);i=Array.prototype.concat.apply([],i),e.setCurrent(o,i)}else e.setCurrent(o,e.currentItem[o]);else e.setCurrent(o,null)}else if(t.select)if(Array.isArray(e.currentItem)||e.options.force&&e.force([])){var l=(t.boolean?t.select:[t]).map(function(g){if(g.op===":"){var y=e.getValue(g.select[0]);return{func:function(R){return y&&(R=R[y]),e.getValueFrom(g.select[1],R)},negate:g.negate,booleanOp:g.booleanOp}}else{var b=e.getValues(g.select);if(!e.options.allowRegexp&&g.op==="~"&&b[1]instanceof RegExp)throw new Error("options.allowRegexp is not enabled.");return{key:b[0],value:b[1],negate:g.negate,booleanOp:g.booleanOp,op:g.op}}});if(t.multiple){var n=[],u=[];e.currentItem.forEach(function(y,b){yv(y,l)&&(n.push(b),u.push(y))}),e.setCurrent(n,u)}else e.currentItem.some(function(g,y){if(yv(g,l))return e.setCurrent(y,g),!0})||e.setCurrent(null,null)}else e.setCurrent(null,null);else if(t.root)e.resetCurrent(),t.args&&t.args.length?e.setCurrent(null,e.getValue(t.args[0])):e.setCurrent(null,e.rootContext);else if(t.parent)e.resetCurrent(),e.setCurrent(null,e.options.parent);else if(t.or){if(e.currentItem)return!0;e.resetCurrent(),e.setCurrent(null,e.context)}else if(t.filter){var c=e.getLocal(t.filter)||e.getGlobal(t.filter);if(typeof c=="function"){var i=e.getValues(t.args||[]),h=c.apply(e.options,[e.currentItem].concat(i));e.setCurrent(null,h)}else{var d=e.getFilter(t.filter);if(typeof d=="function"){var i=e.getValues(t.args||[]),h=d.call(e.options,e.currentItem,{args:i,state:e,data:e.rootContext});e.setCurrent(null,h)}}}else if(t.deep)if(e.currentItem){if(t.deep.length===0)return;var h=e.deepQuery(e.currentItem,t.deep,e.options);if(h){e.setCurrent(h.key,h.value);for(var _=0;_<h.parents.length;_++)e.currentParents.push(h.parents[_])}else e.setCurrent(null,null)}else e.currentItem=null}function yv(t,e){for(var n=!1,i=0;i<e.length;i++){var o=e[i],l=!1;o.func?l=o.func(t):o.op==="~"?o.value instanceof RegExp?l=t[o.key]&&!!t[o.key].match(o.value):l=t[o.key]&&!!~t[o.key].indexOf(o.value):o.op==="="?t[o.key]===!0&&o.value==="true"||t[o.key]===!1&&o.value==="false"?l=!0:l=t[o.key]==o.value:o.op===">"?l=t[o.key]>o.value:o.op==="<"?l=t[o.key]<o.value:o.op===">="?l=t[o.key]>=o.value:o.op==="<="&&(l=t[o.key]<=o.value),o.negate&&(l=!l),o.booleanOp==="&"?n=n&&l:o.booleanOp==="|"?n=n||l:n=l}return n}function KO(t){return typeof t!="undefined"}function GO(t,e){return t.override&&t.currentItem===t.rootContext&&t.override[e]!==void 0}function VO(t,e){return t instanceof Array&&parseInt(e)!=e}function qO(t){for(var e=0;e<t.length;e++)if(!t[e+1]||!(t[e+1].value instanceof Object))return t[e].value}var hM=Af.exports;/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const Cv=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Yi=t=>Cv?Symbol(t):"_vr_"+t,YO=Yi("rvlm"),Ev=Yi("rvd"),na=Yi("r"),wv=Yi("rl"),Of=Yi("rvl"),Qi=typeof window!="undefined";function QO(t){return t.__esModule||Cv&&t[Symbol.toStringTag]==="Module"}const Xe=Object.assign;function Pf(t,e){const n={};for(const i in e){const o=e[i];n[i]=Array.isArray(o)?o.map(t):t(o)}return n}const no=()=>{},XO=/\/$/,jO=t=>t.replace(XO,"");function Mf(t,e,n="/"){let i,o={},l="",u="";const c=e.indexOf("?"),h=e.indexOf("#",c>-1?c:0);return c>-1&&(i=e.slice(0,c),l=e.slice(c+1,h>-1?h:e.length),o=t(l)),h>-1&&(i=i||e.slice(0,h),u=e.slice(h,e.length)),i=tP(i!=null?i:e,n),{fullPath:i+(l&&"?")+l+u,path:i,query:o,hash:u}}function JO(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Iv(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ZO(t,e,n){const i=e.matched.length-1,o=n.matched.length-1;return i>-1&&i===o&&Xi(e.matched[i],n.matched[o])&&bv(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Xi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function bv(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!eP(t[n],e[n]))return!1;return!0}function eP(t,e){return Array.isArray(t)?Tv(t,e):Array.isArray(e)?Tv(e,t):t===e}function Tv(t,e){return Array.isArray(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function tP(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/");let o=n.length-1,l,u;for(l=0;l<i.length;l++)if(u=i[l],!(o===1||u==="."))if(u==="..")o--;else break;return n.slice(0,o).join("/")+"/"+i.slice(l-(l===i.length?1:0)).join("/")}var ro;(function(t){t.pop="pop",t.push="push"})(ro||(ro={}));var io;(function(t){t.back="back",t.forward="forward",t.unknown=""})(io||(io={}));function nP(t){if(!t)if(Qi){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),jO(t)}const rP=/^[^#]+#/;function iP(t,e){return t.replace(rP,"#")+e}function sP(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const ra=()=>({left:window.pageXOffset,top:window.pageYOffset});function oP(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;e=sP(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Sv(t,e){return(history.state?history.state.position-e:-1)+t}const Lf=new Map;function lP(t,e){Lf.set(t,e)}function aP(t){const e=Lf.get(t);return Lf.delete(t),e}let uP=()=>location.protocol+"//"+location.host;function Rv(t,e){const{pathname:n,search:i,hash:o}=e,l=t.indexOf("#");if(l>-1){let c=o.includes(t.slice(l))?t.slice(l).length:1,h=o.slice(c);return h[0]!=="/"&&(h="/"+h),Iv(h,"")}return Iv(n,t)+i+o}function cP(t,e,n,i){let o=[],l=[],u=null;const c=({state:y})=>{const b=Rv(t,location),R=n.value,W=e.value;let U=0;if(y){if(n.value=b,e.value=y,u&&u===R){u=null;return}U=W?y.position-W.position:0}else i(b);o.forEach(G=>{G(n.value,R,{delta:U,type:ro.pop,direction:U?U>0?io.forward:io.back:io.unknown})})};function h(){u=n.value}function d(y){o.push(y);const b=()=>{const R=o.indexOf(y);R>-1&&o.splice(R,1)};return l.push(b),b}function _(){const{history:y}=window;!y.state||y.replaceState(Xe({},y.state,{scroll:ra()}),"")}function g(){for(const y of l)y();l=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",_)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",_),{pauseListeners:h,listen:d,destroy:g}}function Av(t,e,n,i=!1,o=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:o?ra():null}}function fP(t){const{history:e,location:n}=window,i={value:Rv(t,n)},o={value:e.state};o.value||l(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function l(h,d,_){const g=t.indexOf("#"),y=g>-1?(n.host&&document.querySelector("base")?t:t.slice(g))+h:uP()+t+h;try{e[_?"replaceState":"pushState"](d,"",y),o.value=d}catch(b){console.error(b),n[_?"replace":"assign"](y)}}function u(h,d){const _=Xe({},e.state,Av(o.value.back,h,o.value.forward,!0),d,{position:o.value.position});l(h,_,!0),i.value=h}function c(h,d){const _=Xe({},o.value,e.state,{forward:h,scroll:ra()});l(_.current,_,!0);const g=Xe({},Av(i.value,h,null),{position:_.position+1},d);l(h,g,!1),i.value=h}return{location:i,state:o,push:c,replace:u}}function dM(t){t=nP(t);const e=fP(t),n=cP(t,e.state,e.location,e.replace);function i(l,u=!0){u||n.pauseListeners(),history.go(l)}const o=Xe({location:"",base:t,go:i,createHref:iP.bind(null,t)},e,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function hP(t){return typeof t=="string"||t&&typeof t=="object"}function xv(t){return typeof t=="string"||typeof t=="symbol"}const Ir={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Nv=Yi("nf");var Ov;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Ov||(Ov={}));function ji(t,e){return Xe(new Error,{type:t,[Nv]:!0},e)}function si(t,e){return t instanceof Error&&Nv in t&&(e==null||!!(t.type&e))}const Pv="[^/]+?",dP={sensitive:!1,strict:!1,start:!0,end:!0},pP=/[.+*?^${}()[\]/\\]/g;function _P(t,e){const n=Xe({},dP,e),i=[];let o=n.start?"^":"";const l=[];for(const d of t){const _=d.length?[]:[90];n.strict&&!d.length&&(o+="/");for(let g=0;g<d.length;g++){const y=d[g];let b=40+(n.sensitive?.25:0);if(y.type===0)g||(o+="/"),o+=y.value.replace(pP,"\\$&"),b+=40;else if(y.type===1){const{value:R,repeatable:W,optional:U,regexp:G}=y;l.push({name:R,repeatable:W,optional:U});const J=G||Pv;if(J!==Pv){b+=10;try{new RegExp(`(${J})`)}catch(le){throw new Error(`Invalid custom RegExp for param "${R}" (${J}): `+le.message)}}let ne=W?`((?:${J})(?:/(?:${J}))*)`:`(${J})`;g||(ne=U&&d.length<2?`(?:/${ne})`:"/"+ne),U&&(ne+="?"),o+=ne,b+=20,U&&(b+=-8),W&&(b+=-20),J===".*"&&(b+=-50)}_.push(b)}i.push(_)}if(n.strict&&n.end){const d=i.length-1;i[d][i[d].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const u=new RegExp(o,n.sensitive?"":"i");function c(d){const _=d.match(u),g={};if(!_)return null;for(let y=1;y<_.length;y++){const b=_[y]||"",R=l[y-1];g[R.name]=b&&R.repeatable?b.split("/"):b}return g}function h(d){let _="",g=!1;for(const y of t){(!g||!_.endsWith("/"))&&(_+="/"),g=!1;for(const b of y)if(b.type===0)_+=b.value;else if(b.type===1){const{value:R,repeatable:W,optional:U}=b,G=R in d?d[R]:"";if(Array.isArray(G)&&!W)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const J=Array.isArray(G)?G.join("/"):G;if(!J)if(U)y.length<2&&(_.endsWith("/")?_=_.slice(0,-1):g=!0);else throw new Error(`Missing required param "${R}"`);_+=J}}return _}return{re:u,score:i,keys:l,parse:c,stringify:h}}function gP(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function mP(t,e){let n=0;const i=t.score,o=e.score;for(;n<i.length&&n<o.length;){const l=gP(i[n],o[n]);if(l)return l;n++}return o.length-i.length}const vP={type:0,value:""},yP=/[a-zA-Z0-9_]/;function CP(t){if(!t)return[[]];if(t==="/")return[[vP]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(b){throw new Error(`ERR (${n})/"${d}": ${b}`)}let n=0,i=n;const o=[];let l;function u(){l&&o.push(l),l=[]}let c=0,h,d="",_="";function g(){!d||(n===0?l.push({type:0,value:d}):n===1||n===2||n===3?(l.length>1&&(h==="*"||h==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:d,regexp:_,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):e("Invalid state to consume buffer"),d="")}function y(){d+=h}for(;c<t.length;){if(h=t[c++],h==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:h==="/"?(d&&g(),u()):h===":"?(g(),n=1):y();break;case 4:y(),n=i;break;case 1:h==="("?n=2:yP.test(h)?y():(g(),n=0,h!=="*"&&h!=="?"&&h!=="+"&&c--);break;case 2:h===")"?_[_.length-1]=="\\"?_=_.slice(0,-1)+h:n=3:_+=h;break;case 3:g(),n=0,h!=="*"&&h!=="?"&&h!=="+"&&c--,_="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${d}"`),g(),u(),o}function EP(t,e,n){const i=_P(CP(t.path),n),o=Xe(i,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function wP(t,e){const n=[],i=new Map;e=Lv({strict:!1,end:!0,sensitive:!1},e);function o(_){return i.get(_)}function l(_,g,y){const b=!y,R=bP(_);R.aliasOf=y&&y.record;const W=Lv(e,_),U=[R];if("alias"in _){const ne=typeof _.alias=="string"?[_.alias]:_.alias;for(const le of ne)U.push(Xe({},R,{components:y?y.record.components:R.components,path:le,aliasOf:y?y.record:R}))}let G,J;for(const ne of U){const{path:le}=ne;if(g&&le[0]!=="/"){const we=g.record.path,Pe=we[we.length-1]==="/"?"":"/";ne.path=g.record.path+(le&&Pe+le)}if(G=EP(ne,g,W),y?y.alias.push(G):(J=J||G,J!==G&&J.alias.push(G),b&&_.name&&!Mv(G)&&u(_.name)),"children"in R){const we=R.children;for(let Pe=0;Pe<we.length;Pe++)l(we[Pe],G,y&&y.children[Pe])}y=y||G,h(G)}return J?()=>{u(J)}:no}function u(_){if(xv(_)){const g=i.get(_);g&&(i.delete(_),n.splice(n.indexOf(g),1),g.children.forEach(u),g.alias.forEach(u))}else{const g=n.indexOf(_);g>-1&&(n.splice(g,1),_.record.name&&i.delete(_.record.name),_.children.forEach(u),_.alias.forEach(u))}}function c(){return n}function h(_){let g=0;for(;g<n.length&&mP(_,n[g])>=0;)g++;n.splice(g,0,_),_.record.name&&!Mv(_)&&i.set(_.record.name,_)}function d(_,g){let y,b={},R,W;if("name"in _&&_.name){if(y=i.get(_.name),!y)throw ji(1,{location:_});W=y.record.name,b=Xe(IP(g.params,y.keys.filter(J=>!J.optional).map(J=>J.name)),_.params),R=y.stringify(b)}else if("path"in _)R=_.path,y=n.find(J=>J.re.test(R)),y&&(b=y.parse(R),W=y.record.name);else{if(y=g.name?i.get(g.name):n.find(J=>J.re.test(g.path)),!y)throw ji(1,{location:_,currentLocation:g});W=y.record.name,b=Xe({},g.params,_.params),R=y.stringify(b)}const U=[];let G=y;for(;G;)U.unshift(G.record),G=G.parent;return{name:W,path:R,params:b,matched:U,meta:SP(U)}}return t.forEach(_=>l(_)),{addRoute:l,resolve:d,removeRoute:u,getRoutes:c,getRecordMatcher:o}}function IP(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function bP(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:TP(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function TP(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="boolean"?n:n[i];return e}function Mv(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function SP(t){return t.reduce((e,n)=>Xe(e,n.meta),{})}function Lv(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}const kv=/#/g,RP=/&/g,AP=/\//g,xP=/=/g,NP=/\?/g,Dv=/\+/g,OP=/%5B/g,PP=/%5D/g,Fv=/%5E/g,MP=/%60/g,Uv=/%7B/g,LP=/%7C/g,Wv=/%7D/g,kP=/%20/g;function kf(t){return encodeURI(""+t).replace(LP,"|").replace(OP,"[").replace(PP,"]")}function DP(t){return kf(t).replace(Uv,"{").replace(Wv,"}").replace(Fv,"^")}function Df(t){return kf(t).replace(Dv,"%2B").replace(kP,"+").replace(kv,"%23").replace(RP,"%26").replace(MP,"`").replace(Uv,"{").replace(Wv,"}").replace(Fv,"^")}function FP(t){return Df(t).replace(xP,"%3D")}function UP(t){return kf(t).replace(kv,"%23").replace(NP,"%3F")}function WP(t){return t==null?"":UP(t).replace(AP,"%2F")}function ia(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function BP(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<i.length;++o){const l=i[o].replace(Dv," "),u=l.indexOf("="),c=ia(u<0?l:l.slice(0,u)),h=u<0?null:ia(l.slice(u+1));if(c in e){let d=e[c];Array.isArray(d)||(d=e[c]=[d]),d.push(h)}else e[c]=h}return e}function Bv(t){let e="";for(let n in t){const i=t[n];if(n=FP(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(i)?i.map(l=>l&&Df(l)):[i&&Df(i)]).forEach(l=>{l!==void 0&&(e+=(e.length?"&":"")+n,l!=null&&(e+="="+l))})}return e}function HP(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=Array.isArray(i)?i.map(o=>o==null?null:""+o):i==null?i:""+i)}return e}function so(){let t=[];function e(i){return t.push(i),()=>{const o=t.indexOf(i);o>-1&&t.splice(o,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function br(t,e,n,i,o){const l=i&&(i.enterCallbacks[o]=i.enterCallbacks[o]||[]);return()=>new Promise((u,c)=>{const h=g=>{g===!1?c(ji(4,{from:n,to:e})):g instanceof Error?c(g):hP(g)?c(ji(2,{from:e,to:g})):(l&&i.enterCallbacks[o]===l&&typeof g=="function"&&l.push(g),u())},d=t.call(i&&i.instances[o],e,n,h);let _=Promise.resolve(d);t.length<3&&(_=_.then(h)),_.catch(g=>c(g))})}function Ff(t,e,n,i){const o=[];for(const l of t)for(const u in l.components){let c=l.components[u];if(!(e!=="beforeRouteEnter"&&!l.instances[u]))if($P(c)){const d=(c.__vccOpts||c)[e];d&&o.push(br(d,n,i,l,u))}else{let h=c();o.push(()=>h.then(d=>{if(!d)return Promise.reject(new Error(`Couldn't resolve component "${u}" at "${l.path}"`));const _=QO(d)?d.default:d;l.components[u]=_;const y=(_.__vccOpts||_)[e];return y&&br(y,n,i,l,u)()}))}}return o}function $P(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Hv(t){const e=jn(na),n=jn(wv),i=kn(()=>e.resolve(Cs(t.to))),o=kn(()=>{const{matched:h}=i.value,{length:d}=h,_=h[d-1],g=n.matched;if(!_||!g.length)return-1;const y=g.findIndex(Xi.bind(null,_));if(y>-1)return y;const b=$v(h[d-2]);return d>1&&$v(_)===b&&g[g.length-1].path!==b?g.findIndex(Xi.bind(null,h[d-2])):y}),l=kn(()=>o.value>-1&&VP(n.params,i.value.params)),u=kn(()=>o.value>-1&&o.value===n.matched.length-1&&bv(n.params,i.value.params));function c(h={}){return GP(h)?e[Cs(t.replace)?"replace":"push"](Cs(t.to)).catch(no):Promise.resolve()}return{route:i,href:kn(()=>i.value.href),isActive:l,isExactActive:u,navigate:c}}const zP=s_({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Hv,setup(t,{slots:e}){const n=ms(Hv(t)),{options:i}=jn(na),o=kn(()=>({[zv(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[zv(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=e.default&&e.default(n);return t.custom?l:k_("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},l)}}}),KP=zP;function GP(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function VP(t,e){for(const n in e){const i=e[n],o=t[n];if(typeof i=="string"){if(i!==o)return!1}else if(!Array.isArray(o)||o.length!==i.length||i.some((l,u)=>l!==o[u]))return!1}return!0}function $v(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const zv=(t,e,n)=>t!=null?t:e!=null?e:n,qP=s_({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const i=jn(Of),o=kn(()=>t.route||i.value),l=jn(Ev,0),u=kn(()=>o.value.matched[l]);dl(Ev,l+1),dl(YO,u),dl(Of,o);const c=fS();return pl(()=>[c.value,u.value,t.name],([h,d,_],[g,y,b])=>{d&&(d.instances[_]=h,y&&y!==d&&h&&h===g&&(d.leaveGuards.size||(d.leaveGuards=y.leaveGuards),d.updateGuards.size||(d.updateGuards=y.updateGuards))),h&&d&&(!y||!Xi(d,y)||!g)&&(d.enterCallbacks[_]||[]).forEach(R=>R(h))},{flush:"post"}),()=>{const h=o.value,d=u.value,_=d&&d.components[t.name],g=t.name;if(!_)return Kv(n.default,{Component:_,route:h});const y=d.props[t.name],b=y?y===!0?h.params:typeof y=="function"?y(h):y:null,W=k_(_,Xe({},b,e,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(d.instances[g]=null)},ref:c}));return Kv(n.default,{Component:W,route:h})||W}}});function Kv(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const YP=qP;function pM(t){const e=wP(t.routes,t),n=t.parseQuery||BP,i=t.stringifyQuery||Bv,o=t.history,l=so(),u=so(),c=so(),h=hS(Ir);let d=Ir;Qi&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=Pf.bind(null,L=>""+L),g=Pf.bind(null,WP),y=Pf.bind(null,ia);function b(L,Q){let K,j;return xv(L)?(K=e.getRecordMatcher(L),j=Q):j=L,e.addRoute(j,K)}function R(L){const Q=e.getRecordMatcher(L);Q&&e.removeRoute(Q)}function W(){return e.getRoutes().map(L=>L.record)}function U(L){return!!e.getRecordMatcher(L)}function G(L,Q){if(Q=Xe({},Q||h.value),typeof L=="string"){const ce=Mf(n,L,Q.path),C=e.resolve({path:ce.path},Q),I=o.createHref(ce.fullPath);return Xe(ce,C,{params:y(C.params),hash:ia(ce.hash),redirectedFrom:void 0,href:I})}let K;if("path"in L)K=Xe({},L,{path:Mf(n,L.path,Q.path).path});else{const ce=Xe({},L.params);for(const C in ce)ce[C]==null&&delete ce[C];K=Xe({},L,{params:g(L.params)}),Q.params=g(Q.params)}const j=e.resolve(K,Q),Oe=L.hash||"";j.params=_(y(j.params));const Ge=JO(i,Xe({},L,{hash:DP(Oe),path:j.path})),de=o.createHref(Ge);return Xe({fullPath:Ge,hash:Oe,query:i===Bv?HP(L.query):L.query||{}},j,{redirectedFrom:void 0,href:de})}function J(L){return typeof L=="string"?Mf(n,L,h.value.path):Xe({},L)}function ne(L,Q){if(d!==L)return ji(8,{from:Q,to:L})}function le(L){return ie(L)}function we(L){return le(Xe(J(L),{replace:!0}))}function Pe(L){const Q=L.matched[L.matched.length-1];if(Q&&Q.redirect){const{redirect:K}=Q;let j=typeof K=="function"?K(L):K;return typeof j=="string"&&(j=j.includes("?")||j.includes("#")?j=J(j):{path:j},j.params={}),Xe({query:L.query,hash:L.hash,params:L.params},j)}}function ie(L,Q){const K=d=G(L),j=h.value,Oe=L.state,Ge=L.force,de=L.replace===!0,ce=Pe(K);if(ce)return ie(Xe(J(ce),{state:Oe,force:Ge,replace:de}),Q||K);const C=K;C.redirectedFrom=Q;let I;return!Ge&&ZO(i,j,K)&&(I=ji(16,{to:C,from:j}),pn(j,j,!0,!1)),(I?Promise.resolve(I):Ie(C,j)).catch(x=>si(x)?x:Ne(x,C,j)).then(x=>{if(x){if(si(x,2))return ie(Xe(J(x.to),{state:Oe,force:Ge,replace:de}),Q||C)}else x=xe(C,j,!0,de,Oe);return $e(C,j,x),x})}function Me(L,Q){const K=ne(L,Q);return K?Promise.reject(K):Promise.resolve()}function Ie(L,Q){let K;const[j,Oe,Ge]=QP(L,Q);K=Ff(j.reverse(),"beforeRouteLeave",L,Q);for(const ce of j)ce.leaveGuards.forEach(C=>{K.push(br(C,L,Q))});const de=Me.bind(null,L,Q);return K.push(de),Ji(K).then(()=>{K=[];for(const ce of l.list())K.push(br(ce,L,Q));return K.push(de),Ji(K)}).then(()=>{K=Ff(Oe,"beforeRouteUpdate",L,Q);for(const ce of Oe)ce.updateGuards.forEach(C=>{K.push(br(C,L,Q))});return K.push(de),Ji(K)}).then(()=>{K=[];for(const ce of L.matched)if(ce.beforeEnter&&!Q.matched.includes(ce))if(Array.isArray(ce.beforeEnter))for(const C of ce.beforeEnter)K.push(br(C,L,Q));else K.push(br(ce.beforeEnter,L,Q));return K.push(de),Ji(K)}).then(()=>(L.matched.forEach(ce=>ce.enterCallbacks={}),K=Ff(Ge,"beforeRouteEnter",L,Q),K.push(de),Ji(K))).then(()=>{K=[];for(const ce of u.list())K.push(br(ce,L,Q));return K.push(de),Ji(K)}).catch(ce=>si(ce,8)?ce:Promise.reject(ce))}function $e(L,Q,K){for(const j of c.list())j(L,Q,K)}function xe(L,Q,K,j,Oe){const Ge=ne(L,Q);if(Ge)return Ge;const de=Q===Ir,ce=Qi?history.state:{};K&&(j||de?o.replace(L.fullPath,Xe({scroll:de&&ce&&ce.scroll},Oe)):o.push(L.fullPath,Oe)),h.value=L,pn(L,Q,K,de),Lt()}let Ze;function Tn(){Ze=o.listen((L,Q,K)=>{const j=G(L),Oe=Pe(j);if(Oe){ie(Xe(Oe,{replace:!0}),j).catch(no);return}d=j;const Ge=h.value;Qi&&lP(Sv(Ge.fullPath,K.delta),ra()),Ie(j,Ge).catch(de=>si(de,4|8)?de:si(de,2)?(ie(de.to,j).then(ce=>{si(ce,4|16)&&!K.delta&&K.type===ro.pop&&o.go(-1,!1)}).catch(no),Promise.reject()):(K.delta&&o.go(-K.delta,!1),Ne(de,j,Ge))).then(de=>{de=de||xe(j,Ge,!1),de&&(K.delta?o.go(-K.delta,!1):K.type===ro.pop&&si(de,4|16)&&o.go(-1,!1)),$e(j,Ge,de)}).catch(no)})}let Un=so(),tr=so(),ot;function Ne(L,Q,K){Lt(L);const j=tr.list();return j.length?j.forEach(Oe=>Oe(L,Q,K)):console.error(L),Promise.reject(L)}function Se(){return ot&&h.value!==Ir?Promise.resolve():new Promise((L,Q)=>{Un.add([L,Q])})}function Lt(L){ot||(ot=!0,Tn(),Un.list().forEach(([Q,K])=>L?K(L):Q()),Un.reset())}function pn(L,Q,K,j){const{scrollBehavior:Oe}=t;if(!Qi||!Oe)return Promise.resolve();const Ge=!K&&aP(Sv(L.fullPath,0))||(j||!K)&&history.state&&history.state.scroll||null;return Gp().then(()=>Oe(L,Q,Ge)).then(de=>de&&oP(de)).catch(de=>Ne(de,L,Q))}const ut=L=>o.go(L);let tn;const kt=new Set;return{currentRoute:h,addRoute:b,removeRoute:R,hasRoute:U,getRoutes:W,resolve:G,options:t,push:le,replace:we,go:ut,back:()=>ut(-1),forward:()=>ut(1),beforeEach:l.add,beforeResolve:u.add,afterEach:c.add,onError:tr.add,isReady:Se,install(L){const Q=this;L.component("RouterLink",KP),L.component("RouterView",YP),L.config.globalProperties.$router=Q,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>Cs(h)}),Qi&&!tn&&h.value===Ir&&(tn=!0,le(o.location).catch(Oe=>{}));const K={};for(const Oe in Ir)K[Oe]=kn(()=>h.value[Oe]);L.provide(na,Q),L.provide(wv,ms(K)),L.provide(Of,h);const j=L.unmount;kt.add(L),L.unmount=function(){kt.delete(L),kt.size<1&&(d=Ir,Ze&&Ze(),h.value=Ir,tn=!1,ot=!1),j()}}}}function Ji(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function QP(t,e){const n=[],i=[],o=[],l=Math.max(e.matched.length,t.matched.length);for(let u=0;u<l;u++){const c=e.matched[u];c&&(t.matched.find(d=>Xi(d,c))?i.push(c):n.push(c));const h=t.matched[u];h&&(e.matched.find(d=>Xi(d,h))||o.push(h))}return[n,i,o]}function _M(){return jn(na)}export{nM as A,oM as B,pM as C,dM as D,On as F,fM as _,eM as a,N_ as b,tM as c,$t as d,JP as e,dR as f,uM as g,ms as h,lM as i,NO as j,aM as k,vu as l,hM as m,yu as n,aR as o,jP as p,iM as q,fS as r,_M as s,XP as t,Cs as u,rM as v,IS as w,ZP as x,sM as y,cM as z};
